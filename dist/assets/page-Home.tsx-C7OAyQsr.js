import{r as e}from"./rolldown-runtime-Ckerh37x.js";import{G as t,I as n,M as r,N as i,_ as a,c as o,g as s,m as c,o as l,s as u}from"./component-Layout-lYLVnTc5.js";import{n as d}from"./page-ArticleDetail.tsx-_ReSTKFC.js";import{f,p}from"./component-common-gnEao21y.js";var m=e(t(),1),h=e(a(),1),g=()=>{let{language:e,currentCategory:t}=s(),[a,u]=(0,m.useState)(null),[g,_]=(0,m.useState)(!0),[v,y]=(0,m.useState)([]);(0,m.useEffect)(()=>{try{let e=localStorage.getItem(`breachtimes-bookmarks`);e&&y(JSON.parse(e))}catch{}},[]);let b=(0,m.useCallback)(e=>{y(t=>{let n=t.indexOf(e),r;return r=n>-1?t.filter(t=>t!==e):[...t,e],localStorage.setItem(`breachtimes-bookmarks`,JSON.stringify(r)),r})},[]);(0,m.useEffect)(()=>{(async()=>{_(!0);try{u(await l.getHomeData(e,t===`saved`?void 0:t))}catch{}finally{_(!1)}})()},[e,t]);let x=(t,r)=>{let i=r?`text-white`:`text-card-text`,a=r?`text-white/60`:`text-muted-text`,s=o(t.published_at,e);return(0,h.jsxs)(n,{to:`/article/${t.id}`,onClick:()=>window.scrollTo({top:0,behavior:`smooth`}),className:`group flex gap-4 p-4 rounded-xl hover:bg-muted-bg transition-colors duration-200 border border-transparent hover:border-border-color`,children:[(0,h.jsx)(`div`,{className:`flex-shrink-0 w-12 h-12 rounded-lg overflow-hidden`,children:(0,h.jsx)(`img`,{src:t.image||`https://placehold.co/600x400/1a1a1a/FFF?text=BreachTimes`,alt:t.title,className:`w-full h-full object-cover group-hover:scale-105 transition-transform duration-300`})}),(0,h.jsxs)(`div`,{className:`flex-1 flex flex-col justify-between min-w-0`,children:[(0,h.jsxs)(`div`,{children:[(0,h.jsx)(`h3`,{className:`font-semibold text-sm leading-tight group-hover:text-bbcRed transition-colors line-clamp-2 ${i}`,children:t.title}),(0,h.jsx)(`p`,{className:`text-xs mt-1 line-clamp-2 ${a}`,children:t.summary})]}),(0,h.jsxs)(`div`,{className:`flex items-center gap-2 text-xs ${a}`,children:[(0,h.jsx)(p,{className:`w-3 h-3`}),(0,h.jsx)(`span`,{children:s})]})]})]},t.id)},S=t=>{let i=t.style===`dark`,a=i?`text-white`:`text-card-text`,o=i?`white`:t.highlightColor||`var(--text-page)`,s=null;if(t.type===`hero-grid`){let e=t.articles[0],n=t.articles.slice(1);s=(0,h.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8`,children:[e&&(0,h.jsx)(`div`,{className:`lg:col-span-2`,children:(0,h.jsx)(f,{article:e,type:`hero-grid`,isSectionDark:i,onBookmarkToggle:b,isBookmarked:v.includes(e.id)})}),n.length>0&&(0,h.jsx)(`div`,{className:`lg:col-span-1`,children:(0,h.jsxs)(`div`,{className:`${i?`bg-card-elevated`:`bg-card`} p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color h-full`,children:[(0,h.jsxs)(`h3`,{className:`font-bold text-base sm:text-lg mb-3 sm:mb-4 flex items-center gap-2 ${a}`,children:[(0,h.jsx)(`span`,{className:`w-1 h-6 rounded-full`,style:{backgroundColor:o}}),`আরও খবর`]}),(0,h.jsx)(`div`,{className:`space-y-2`,children:n.slice(0,5).map(e=>x(e,i))})]})})]})}else s=t.type===`list`?(0,h.jsx)(`div`,{className:`space-y-2`,children:t.articles.map(e=>x(e,i))}):(0,h.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6`,children:t.articles.map(e=>(0,h.jsx)(f,{article:e,type:`grid`,isSectionDark:i,onBookmarkToggle:b,isBookmarked:v.includes(e.id)},e.id))});return(0,h.jsxs)(`section`,{className:`animate-fade-in-up relative z-10 ${t.style===`dark`?`bg-card-elevated text-white p-4 sm:p-6 md:p-8 lg:p-10 rounded-3xl mb-8 sm:mb-10 lg:mb-12 shadow-2xl relative overflow-hidden`:`mb-8 sm:mb-10 lg:mb-12`}`,children:[(0,h.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 sm:mb-8 gap-2`,children:[(0,h.jsxs)(`h2`,{className:`text-xl sm:text-2xl font-bold flex items-center gap-3 ${a}`,children:[(0,h.jsx)(`span`,{className:`w-2 h-8 rounded-full`,style:{backgroundColor:o}}),t.title]}),t.type!==`hero-grid`&&(0,h.jsxs)(n,{to:`/?category=${t.associatedCategory}`,className:`text-xs sm:text-sm font-bold hover:text-bbcRed transition-colors flex items-center gap-1 opacity-80 hover:opacity-100 ${a}`,children:[c(`all`,e),` `,(0,h.jsx)(r,{className:`w-4 h-4`})]})]}),s,t.style===`dark`&&(0,h.jsx)(`div`,{className:`absolute -right-20 -bottom-20 w-64 h-64 bg-white/5 rounded-full blur-3xl pointer-events-none`})]})};return(0,h.jsx)(h.Fragment,{children:(()=>{if(g)return(0,h.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 lg:gap-8 mb-6 sm:mb-8 animate-pulse`,children:[(0,h.jsxs)(`div`,{className:`col-span-1 md:col-span-2 lg:col-span-2`,children:[(0,h.jsx)(`div`,{className:`bg-muted-bg w-full aspect-video mb-4 sm:mb-5 rounded-xl`}),(0,h.jsx)(`div`,{className:`bg-muted-bg w-3/4 h-8 mb-3 rounded`}),(0,h.jsx)(`div`,{className:`bg-muted-bg w-full h-4 mb-2 rounded`}),(0,h.jsx)(`div`,{className:`bg-muted-bg w-2/3 h-4 rounded`})]}),(0,h.jsx)(`div`,{className:`col-span-1 md:col-span-2 lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-8`,children:[1,2,3,4].map(e=>(0,h.jsxs)(`div`,{children:[(0,h.jsx)(`div`,{className:`bg-muted-bg w-full aspect-video mb-3 rounded-lg`}),(0,h.jsx)(`div`,{className:`bg-muted-bg w-full h-5 rounded`})]},e))})]});if(!a||!a.sections||a.sections.length===0)return(0,h.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-32 text-center animate-fade-in`,children:[(0,h.jsx)(`div`,{className:`bg-muted-bg p-6 rounded-full mb-4`,children:(0,h.jsx)(d,{className:`w-12 h-12 text-muted-text`})}),(0,h.jsx)(`h3`,{className:`text-2xl font-bold mb-2 text-card-text`,children:c(`no_news_in_this_category`,e)})]});let n=a.sections;if(t===`saved`){let t=(a.sections?.flatMap(e=>e.articles)||[]).filter(e=>v.includes(e.id));if(t.length===0)return(0,h.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-32 text-center animate-fade-in`,children:[(0,h.jsx)(`div`,{className:`bg-muted-bg p-6 rounded-full mb-4`,children:(0,h.jsx)(i,{className:`w-12 h-12 text-muted-text`})}),(0,h.jsx)(`h3`,{className:`text-2xl font-bold mb-2 text-card-text`,children:c(`no_saved_articles`,e)}),(0,h.jsx)(`p`,{className:`text-muted-text`,children:c(`bookmark_your_favorites`,e)})]});n=[{id:`saved`,title:c(`saved`,e),type:`grid`,highlightColor:`var(--color-bbcRed)`,associatedCategory:null,style:null,articles:t}]}if(t===`home`||t===null){let e=a?.sections?.find(e=>e.id===`hero-stories`);if(e){let t=e.articles[0],n=e.articles.slice(1,6),r=new Set([t?.id,...n.map(e=>e.id)].filter(Boolean)),i=(a?.sections?.flatMap(e=>e.articles)||[]).filter(e=>!r.has(e.id));return(0,h.jsxs)(h.Fragment,{children:[S({...e,type:`hero-grid`,articles:e.articles}),i.length>0&&(0,h.jsx)(`section`,{className:`animate-fade-in-up relative z-10 mb-12`,children:(0,h.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6`,children:i.map(e=>(0,h.jsx)(f,{article:e,type:`grid`,onBookmarkToggle:b,isBookmarked:v.includes(e.id)},e.id))})})]})}}return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(`section`,{className:`animate-fade-in-up relative z-10 mb-12`,children:(0,h.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6`,children:n.flatMap(e=>e.articles).map(e=>(0,h.jsx)(f,{article:e,type:`grid`,onBookmarkToggle:b,isBookmarked:v.includes(e.id)},e.id))})})})})()})};export{g as t};