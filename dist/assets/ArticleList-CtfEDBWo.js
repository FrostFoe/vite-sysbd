import{r as e}from"./rolldown-runtime-Ckerh37x.js";import{d as t,h as n,l as r,r as i,t as a}from"./vendor-react-BM5KEv9z.js";import{M as o,R as s,b as c,g as l,u,v as d}from"./vendor-ui-D58bueRV.js";import{c as f,d as p,f as m,g as h,m as g,o as _,u as v}from"./index-whNquEeG.js";var y=e(n(),1),b=e(a(),1),x=()=>{let{language:e}=h(),n=r(),[a,v]=(0,y.useState)([]),[x,S]=(0,y.useState)([]),[C,w]=(0,y.useState)(!0),[T,E]=t(),D=T.get(`status`)||`all`,O=T.get(`search`)||``,k=T.get(`cat`)||``,A=(0,y.useCallback)(async()=>{w(!0);try{let e=await _.getArticles({status:D,search:O,cat:k,lang:`bn`});e.success&&e.articles&&v(e.articles)}catch{g(`সার্ভার ত্রুটি!`,`error`)}finally{w(!1)}},[D,O,k]),j=(0,y.useCallback)(async()=>{try{let e=await _.getCategories();e.success&&e.data&&S(e.data)}catch{g(`সার্ভার ত্রুটি!`,`error`)}},[]);(0,y.useEffect)(()=>{A(),j()},[A,j]);let M=(0,y.useCallback)(async e=>{if(window.confirm(`আপনি কি নিশ্চিত এই নিবন্ধটি মুছে ফেলতে চান? এটি উভয় ভাষার সংস্করণ মুছে দেবে।`))try{let t=await _.deleteArticle(e);t.success?(g(`নিবন্ধ সফলভাবে মুছে ফেলা হয়েছে`),v(t=>t.filter(t=>t.id!==e))):g(t.error||`নিবন্ধ মোছতে ব্যর্থ!`,`error`)}catch{g(`সার্ভার ত্রুটি!`,`error`)}},[]),N=(e,t)=>{let n=new URLSearchParams(T.toString());t?n.set(e,t):n.delete(e),E(n)};return C?(0,b.jsx)(`div`,{className:`text-center py-8`,children:(0,b.jsx)(o,{className:`w-10 h-10 animate-spin text-bbcRed`})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-start md:items-center gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,b.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`নিবন্ধ পরিচালনা করুন`}),(0,b.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-2 w-full md:w-auto`,children:[(0,b.jsxs)(`form`,{onSubmit:e=>{e.preventDefault()},className:`flex gap-2 w-full md:w-auto flex-wrap sm:flex-nowrap`,children:[(0,b.jsx)(`input`,{type:`text`,name:`search`,placeholder:`নিবন্ধ খুঁজুন...`,value:O,onChange:e=>N(`search`,e.target.value),className:`p-2 sm:p-2.5 rounded border border-border-color bg-card text-xs sm:text-sm w-full sm:w-auto md:w-48 focus:border-bbcRed outline-none`}),(0,b.jsx)(f,{value:k,onChange:e=>N(`cat`,e),options:[{value:``,label:`সকল বিভাগ`},...x.map(e=>({value:e.id,label:e.title_bn}))],className:`w-full sm:w-32 md:w-40`}),(0,b.jsx)(`button`,{type:`submit`,className:`bg-muted-bg p-2 rounded hover:bg-bbcRed hover:text-white transition-colors flex-shrink-0`,children:(0,b.jsx)(l,{className:`w-4 h-4`})})]}),(0,b.jsxs)(i,{to:`/admin/articles/new`,className:`bg-bbcRed text-white px-4 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap justify-center`,children:[(0,b.jsx)(d,{className:`w-4 h-4`}),` `,(0,b.jsx)(`span`,{className:`hidden sm:inline`,children:`নতুন`})]})]})]}),(0,b.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:a.length===0?(0,b.jsxs)(`div`,{className:`p-8 text-center text-muted-text`,children:[(0,b.jsx)(s,{className:`w-16 h-16 mx-auto mb-4 text-border-color`}),(0,b.jsx)(`p`,{className:`text-lg font-bold mb-2`,children:`কোনো নিবন্ধ পাওয়া যায়নি`}),(0,b.jsx)(`p`,{className:`text-sm mb-4`,children:`আপনার মানদণ্ডের সাথে মেলে এমন কোনো নিবন্ধ নেই।`}),(0,b.jsxs)(i,{to:`/admin/articles/new`,className:`bg-bbcRed text-white px-4 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity flex items-center gap-2 w-fit mx-auto`,children:[(0,b.jsx)(d,{className:`w-4 h-4`}),` নতুন নিবন্ধ তৈরি করুন`]})]}):(0,b.jsx)(`div`,{className:`grid grid-cols-1 gap-4 p-4`,children:a.map(t=>{let r={published:`bg-success/10 dark:bg-success/20 text-success border-success/30 dark:border-success/50`,draft:`bg-warning/10 dark:bg-warning/20 text-warning border-warning/30 dark:border-warning/50`,archived:`bg-danger/10 dark:bg-danger/20 text-danger border-danger/30 dark:border-danger/50`},a=r[t.status]||r.draft,o=p(t.published_at,e),s=p(t.created_at,e);return(0,b.jsxs)(`button`,{onClick:()=>m(window.innerWidth<768,n,`/admin/articles/${t.id}/edit`),type:`button`,className:`bg-card p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors cursor-pointer w-full text-left`,children:[(0,b.jsxs)(`div`,{className:`flex items-start justify-between mb-3 gap-3`,children:[(0,b.jsxs)(`div`,{className:`flex items-start gap-3 min-w-0 flex-1`,children:[(0,b.jsx)(`img`,{src:t.image||`https://placehold.co/600x400/1a1a1a/FFF?text=BreachTimes`,alt:``,className:`w-12 h-12 rounded object-cover bg-muted-bg shrink-0`}),(0,b.jsxs)(`div`,{className:`truncate flex-1`,children:[(0,b.jsx)(i,{to:`/admin/articles/${t.id}/edit`,className:`font-bold text-sm block hover:text-bbcRed truncate font-hind`,children:t.title_bn||t.title_en||`(শিরোনাম নেই)`}),t.title_bn&&t.title_en&&(0,b.jsx)(`p`,{className:`text-xs text-muted-text truncate`,children:t.title_en}),(0,b.jsxs)(`div`,{className:`flex gap-2 items-center mt-2 flex-wrap`,children:[(0,b.jsx)(`span`,{className:`px-2 py-1 rounded-full text-xs font-bold border ${a}`,children:t.status}),t.category&&(0,b.jsx)(`span`,{className:`text-xs bg-muted-bg text-card-text px-2 py-1 rounded-full border border-border-color`,children:t.category})]})]})]}),(0,b.jsxs)(`div`,{className:`flex items-center gap-1 shrink-0 ml-2`,children:[(0,b.jsx)(i,{to:`/admin/articles/${t.id}/edit`,className:`p-2 text-card-text hover:bg-muted-bg hover:text-bbcRed rounded transition-colors`,children:(0,b.jsx)(c,{className:`w-4 h-4`})}),(0,b.jsx)(`button`,{type:`button`,onClick:()=>M(t.id),className:`p-2 text-danger hover:bg-danger/10 dark:hover:bg-danger/20 rounded transition-colors`,children:(0,b.jsx)(u,{className:`w-4 h-4`})})]})]}),(0,b.jsxs)(`div`,{className:`text-xs text-muted-text space-y-1`,children:[(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`span`,{className:`font-bold`,children:`প্রকাশিত:`}),` `,o]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`span`,{className:`font-bold`,children:`তৈরি:`}),` `,s]})]})]},t.id)})})})]})};export{x as default};