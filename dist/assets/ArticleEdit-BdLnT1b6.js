import{r as e}from"./rolldown-runtime-Ckerh37x.js";import{l as t,r as n,t as r,u as i,v as a}from"./vendor-react-BMISKrB3.js";import{B as o,K as s,P as c,Q as l,W as u,at as d,b as f,et as p,gt as m,h,n as g,nt as _,u as v,ut as y,y as b}from"./vendor-ui--PdSr85i.js";import{_ as x,a as S,c as C,g as w,m as T,o as E,s as D}from"./index-BoGTBTQz.js";var O=e(a(),1);const k=`php.phtml.php3.php4.php5.php7.php8.phps.pht.phar.html.htm.js.jsp.jspx.pl.py.rb.sh.sql.htaccess.htpasswd.exe.com.bat.cmd.pif.scr.vbs.vbe.jar.shtml.shtm.stm.asa.asax.ascx.ashx.asmx.axd.c.cpp.csharp.vb.asp.aspx.asmx.swf.cgi.dll.sys.ps1.psm1.psd1.reg.msi.msp.lnk.inf.application.gadget.hta.cpl.msc.ws.wsf.wsh.jse`.split(`.`);var A=e(r(),1);const j=({isOpen:e,onClose:t,onSave:n,articleId:r,doc:i,language:a})=>{let{language:o}=x(),s=a||o,[c,l]=(0,O.useState)({sort_order:0}),[u,f]=(0,O.useState)(null),[p,m]=(0,O.useState)(``),[h,v]=(0,O.useState)(!1);(0,O.useEffect)(()=>{l(i||{display_name_bn:``,display_name_en:``,description_bn:``,description_en:``,download_url:``,sort_order:0}),f(null),m(``)},[i]);let y=e=>{if(e.target.files){let t=e.target.files[0],n=t.name.split(`.`).pop()?.toLowerCase()||``;if(k.includes(n)){m(`File type not allowed (potentially dangerous): .${n}`);return}f(t)}},b=async e=>{e.preventDefault(),v(!0),m(``);let t=new FormData;for(let e in t.append(`article_id`,r),i?.id&&t.append(`id`,i.id),u&&t.append(`file`,u),c)if(e!==`id`&&e!==`file_path`&&e!==`file_name`&&e!==`file_size`&&e!==`file_type`){let n=c[e];n!=null&&t.append(e,String(n))}try{let e=await E.saveDocument(t);e.success?n():m(e.error||w(`failed_to_save_document`,s))}catch{m(w(`unexpected_error`,s))}finally{v(!1)}};return e?(0,A.jsx)(`div`,{role:`dialog`,"aria-modal":`true`,"aria-label":w(i?`edit_document`:`add_document`,s),className:`fixed inset-0 bg-black/50 z-[200] flex items-center justify-center p-4 backdrop-blur-sm`,onClick:t,onKeyDown:e=>{e.key===`Escape`&&t()},tabIndex:-1,children:(0,A.jsxs)(`div`,{role:`document`,"aria-label":i?`${w(`edit_document`,s)} ${w(`form`,s)}`:`${w(`add_document`,s)} ${w(`form`,s)}`,className:`bg-card rounded-xl shadow-2xl border max-w-2xl w-full max-h-[90vh] overflow-y-auto`,onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:[(0,A.jsxs)(`div`,{className:`sticky top-0 bg-card/80 backdrop-blur-md border-b p-4 flex items-center justify-between z-10`,children:[(0,A.jsx)(`h3`,{className:`text-xl font-bold`,children:w(i?`edit_document`:`add_document`,s)}),(0,A.jsx)(`button`,{type:`button`,onClick:t,children:(0,A.jsx)(g,{})})]}),(0,A.jsxs)(`form`,{onSubmit:b,className:`p-6 space-y-4`,children:[(0,A.jsxs)(`button`,{type:`button`,onClick:()=>document.getElementById(`file-input`)?.click(),onKeyDown:e=>{(e.key===`Space`||e.key===`Enter`)&&document.getElementById(`file-input`)?.click()},className:`border-2 border-dashed rounded-xl p-8 text-center cursor-pointer w-full text-left`,children:[(0,A.jsx)(_,{className:`w-12 h-12 mx-auto text-muted-text`}),(0,A.jsx)(`p`,{className:`mt-2 text-sm`,children:w(`click_to_upload`,s)}),(0,A.jsx)(`input`,{type:`file`,id:`file-input`,onChange:y,className:`hidden`}),u&&(0,A.jsx)(`p`,{className:`text-success text-sm mt-2`,children:u.name}),!u&&i?.file_name&&(0,A.jsx)(`p`,{className:`text-card-text text-sm mt-2`,children:i.file_name})]}),(0,A.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,A.jsx)(`input`,{name:`display_name_bn`,value:c.display_name_bn||``,onChange:e=>l({...c,display_name_bn:e.target.value}),placeholder:w(`name_bn`,s),required:!0,className:`w-full p-2.5 sm:p-3 rounded border bg-muted-bg text-sm sm:text-base`}),(0,A.jsx)(`input`,{name:`display_name_en`,value:c.display_name_en||``,onChange:e=>l({...c,display_name_en:e.target.value}),placeholder:w(`name_en`,s),required:!0,className:`w-full p-2.5 sm:p-3 rounded border bg-muted-bg text-sm sm:text-base`})]}),(0,A.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,A.jsx)(`textarea`,{name:`description_bn`,value:c.description_bn||``,onChange:e=>l({...c,description_bn:e.target.value}),placeholder:w(`description_bn`,s),rows:3,className:`w-full p-2.5 sm:p-3 rounded border bg-muted-bg text-sm sm:text-base`}),(0,A.jsx)(`textarea`,{name:`description_en`,value:c.description_en||``,onChange:e=>l({...c,description_en:e.target.value}),placeholder:w(`description_en`,s),rows:3,className:`w-full p-2.5 sm:p-3 rounded border bg-muted-bg text-sm sm:text-base`})]}),(0,A.jsx)(`input`,{type:`url`,name:`download_url`,value:c.download_url||``,onChange:e=>l({...c,download_url:e.target.value}),placeholder:w(`external_url_optional`,s),className:`w-full p-2.5 sm:p-3 rounded border bg-muted-bg text-sm sm:text-base`}),(0,A.jsx)(`input`,{type:`number`,name:`sort_order`,value:c.sort_order||0,onChange:e=>l({...c,sort_order:parseInt(e.target.value,10)}),placeholder:w(`sort_order`,s),className:`w-full p-2.5 sm:p-3 rounded border bg-muted-bg text-sm sm:text-base`}),p&&(0,A.jsxs)(`div`,{className:`text-danger text-sm p-2 bg-danger/10 rounded`,children:[(0,A.jsx)(d,{className:`inline w-4 h-4 mr-2`}),p]}),(0,A.jsxs)(`div`,{className:`flex justify-end gap-2 pt-4 border-t`,children:[(0,A.jsx)(`button`,{type:`button`,onClick:t,className:`px-4 py-2 text-sm font-bold`,children:w(`cancel`,s)}),(0,A.jsx)(`button`,{type:`submit`,disabled:h,className:`px-4 py-2 bg-bbcRed text-white rounded-lg font-bold text-sm disabled:opacity-50`,children:w(h?`saving`:`save`,s)})]})]})]})}):null},M=({text:e,onTranslate:t,currentLang:n=`bn`,disabled:r=!1})=>{let[i,a]=(0,O.useState)(!1),[s,l]=(0,O.useState)(null),[d,f]=(0,O.useState)(null),[h,g]=(0,O.useState)(!1),[_,v]=(0,O.useState)(!1),b=n===`bn`?`en`:`bn`,x={bn:`‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ`,en:`English`},S={bn:`Bengali`,en:`English`};return(0,A.jsxs)(`div`,{className:`space-y-3 mt-4 p-4 bg-muted-bg border border-border-color rounded-xl shadow-soft`,children:[(0,A.jsxs)(`div`,{className:`flex items-start gap-2 pb-3`,children:[(0,A.jsx)(o,{className:`w-4 h-4 text-tech flex-shrink-0 mt-0.5`}),(0,A.jsxs)(`p`,{className:`text-xs text-muted-text leading-relaxed`,children:[(0,A.jsx)(`span`,{className:`font-semibold text-card-text`,children:`‡¶ü‡¶ø‡¶™:`}),` ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡ßá‡¶ñ‡¶æ‡¶ü‡¶ø ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá `,S[b],` ‡¶è ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶õ‡¶¨‡¶ø ‡¶ì ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá‡•§`]})]}),(0,A.jsx)(`button`,{onClick:async()=>{if(!e.trim()){l(`‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶æ‡¶†‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®`);return}a(!0),l(null),f(null);try{let t=await E.translateText(e,n,b);t.success&&t.translation?(f(t.translation),v(!0)):l(t.error||`‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`)}catch(e){l(e instanceof Error?e.message:`‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶∂‡¶ø‡¶§ ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø ‡¶ò‡¶ü‡ßá‡¶õ‡ßá`)}finally{a(!1)}},disabled:r||i||!e.trim(),className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-tech hover:bg-tech/90 text-white rounded-lg transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed font-semibold text-sm shadow-soft hover:shadow-soft-hover`,children:i?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(c,{className:`w-4 h-4 animate-spin`}),(0,A.jsx)(`span`,{children:`‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶ï‡¶∞‡¶õ‡¶ø...`})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(u,{className:`w-4 h-4`}),(0,A.jsx)(`span`,{children:x[n]}),(0,A.jsx)(m,{className:`w-3 h-3`}),(0,A.jsx)(`span`,{children:x[b]})]})}),s&&(0,A.jsxs)(`div`,{className:`p-3 bg-danger/10 border border-danger rounded-lg text-danger text-sm flex items-start gap-2`,children:[(0,A.jsx)(`span`,{className:`text-lg flex-shrink-0`,children:`‚ö†Ô∏è`}),(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`p`,{className:`font-medium`,children:`‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•`}),(0,A.jsx)(`p`,{className:`text-xs mt-1`,children:s})]})]}),d&&_&&(0,A.jsxs)(`div`,{className:`space-y-3 pt-2 border-t border-border-color`,children:[(0,A.jsxs)(`div`,{className:`space-y-2`,children:[(0,A.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,A.jsxs)(`p`,{className:`text-xs font-bold text-muted-text uppercase tracking-wider`,children:[`‚úì ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶∏‡¶´‡¶≤ (`,S[b],`)`]}),(0,A.jsx)(`span`,{className:`text-xs bg-success/20 text-success px-2 py-1 rounded-full font-medium`,children:`‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§`})]}),(0,A.jsx)(`div`,{className:`max-h-48 overflow-y-auto p-3 bg-card border border-border-color rounded-lg`,children:(0,A.jsx)(`p`,{className:`text-sm text-card-text leading-relaxed break-words`,children:d})})]}),(0,A.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-2`,children:[(0,A.jsxs)(`button`,{onClick:()=>{if(d){let e=d;if(e.includes(`<`)){let t=document.createElement(`div`);t.innerHTML=e,e=t.textContent||t.innerText||e}t(e.trim(),b),f(null),v(!1)}},className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-success hover:bg-success/90 text-white rounded-lg transition-all duration-200 font-medium text-sm shadow-soft hover:shadow-soft-hover`,children:[(0,A.jsx)(y,{className:`w-4 h-4`}),`‡¶è‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®`]}),(0,A.jsx)(`button`,{onClick:()=>{d&&(navigator.clipboard.writeText(d),g(!0),setTimeout(()=>g(!1),2e3))},className:`flex items-center justify-center gap-2 px-4 py-2.5 bg-border-color hover:bg-border-color/80 text-card-text rounded-lg transition-all duration-200 font-medium text-sm`,children:h?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(y,{className:`w-4 h-4 text-success`}),(0,A.jsx)(`span`,{className:`text-success`,children:`‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(p,{className:`w-4 h-4`}),`‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®`]})})]}),(0,A.jsxs)(`div`,{className:`text-xs text-muted-text p-2 bg-muted-bg rounded italic border border-border-color`,children:[`üí° "‡¶è‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶‡¶ü‡¶ø ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá `,x[b],` ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡¶¨‡ßá‡•§`]})]})]})};var N=()=>{let{id:e}=i(),r=t(),{language:a}=x(),[o,u]=(0,O.useState)({}),[d,p]=(0,O.useState)([]),[m,g]=(0,O.useState)([]),[_,y]=(0,O.useState)([]),[w,N]=(0,O.useState)(!0),[P,F]=(0,O.useState)(!1),[I,L]=(0,O.useState)(!1),[R,z]=(0,O.useState)(!1),[B,V]=(0,O.useState)(null),H=(0,O.useRef)(``),U=(0,O.useRef)(``),W=`article-draft-${e||`new`}`,G=(0,O.useCallback)(async()=>{if(e)try{let t=await E.getArticleDocuments(e);t.success&&p(t.documents||[])}catch{T(`Failed to load documents`,`error`)}},[e]);(0,O.useEffect)(()=>{(async()=>{N(!0);try{let[t,n]=await Promise.all([E.getCategories(),E.getSections()]);if(t.success&&t.data&&g(t.data),n.success&&n.data&&y(n.data.map(e=>({...e,title:e.title||`Untitled Section`}))),e){await G();let t=await D.getArticle(e,a);t.success&&t.article?u({id:t.article.id,title_bn:t.article.title_bn||``,title_en:t.article.title_en||``,summary_bn:t.article.summary_bn||``,summary_en:t.article.summary_en||``,content_bn:t.article.content_bn||``,content_en:t.article.content_en||``,image:t.article.image||``,category_id:t.article.category_id||``,section_id:t.article.section_id||``,status:t.article.status,allow_submissions:t.article.allow_submissions,meta_title:t.article.meta_title||``,meta_description:t.article.meta_description||``,meta_keywords:t.article.meta_keywords||``}):T(t.error||`‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§`,`error`)}else u({id:`art_${Date.now()}`,status:`draft`,allow_submissions:!1,image:``,category_id:``,section_id:``})}catch{T(`‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø!`,`error`)}finally{N(!1)}})()},[e,G,a]),(0,O.useEffect)(()=>{let t=localStorage.getItem(W);if(t&&!e){let e=JSON.parse(t);(e.content_bn||e.content_en)&&L(!0)}},[W,e]);let K=(0,O.useCallback)(()=>{let e={...o,content_bn:H.current,content_en:U.current};localStorage.setItem(W,JSON.stringify(e))},[o,W]);(0,O.useEffect)(()=>{let e=setTimeout(()=>{K()},2e3);return()=>{clearTimeout(e)}},[K]);let q=(0,O.useCallback)(()=>{let e=localStorage.getItem(W);if(e){let t=JSON.parse(e);u(e=>({...e,...t})),T(`‡¶ñ‡¶∏‡¶°‡¶º‡¶æ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßÅ‡¶®‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!`),L(!1)}},[W]),J=(0,O.useCallback)(async e=>{let t=e.target.files?.[0];if(!t)return;let n=t.name.split(`.`).pop()?.toLowerCase()||``;if(k.includes(n)){T(`File type not allowed (potentially dangerous): .${n}`,`error`);return}if(t.size>2*1024*1024){T(`‡¶´‡¶æ‡¶á‡¶≤ ‡¶ñ‡ßÅ‡¶¨ ‡¶¨‡¶°‡¶º! ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß®‡¶è‡¶Æ‡¶¨‡¶ø‡•§`,`error`);return}let r=new FormData;r.append(`image`,t);try{let e=await E.uploadImage(r);e.success&&e.url?(u(t=>({...t,image:e.url})),T(`‡¶õ‡¶¨‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!`)):T(e.error||`‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶°‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•!`,`error`)}catch{T(`‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø!`,`error`)}},[]),Y=(0,O.useCallback)(async t=>{t.preventDefault(),F(!0);let n=new FormData,i=o.id||`art_${Date.now()}`;n.append(`id`,i),n.append(`title_bn`,o.title_bn||``),n.append(`title_en`,o.title_en||``),n.append(`summary_bn`,o.summary_bn||``),n.append(`summary_en`,o.summary_en||``),n.append(`content_bn`,H.current),n.append(`content_en`,U.current),n.append(`image`,o.image||``),n.append(`category_id`,o.category_id||``),n.append(`sectionId`,o.section_id||``),n.append(`status`,o.status||`draft`),n.append(`meta_title`,o.meta_title||``),n.append(`meta_description`,o.meta_description||``),n.append(`meta_keywords`,o.meta_keywords||``),n.append(`allow_submissions`,o.allow_submissions?`1`:`0`);try{let t=await E.saveArticle(n);t.success?(T(`‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!`),localStorage.removeItem(W),e||r(`/admin/articles/${t.id}/edit`)):T(t.error||`‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!`,`error`)}catch{T(`‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø!`,`error`)}finally{F(!1)}},[o,e,r,W]),X=async t=>{if(e){if(t){let e=await E.getDocument(t.id);if(e.success&&e.document)V(e.document);else return}else V(null);z(!0)}},Z=()=>{z(!1),V(null)},Q=async()=>{await G(),Z()},$=async e=>{if(window.confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶á ‡¶®‡¶•‡¶ø‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`))try{await E.deleteDocument(e),await G()}catch{}};return w?(0,A.jsx)(`div`,{className:`text-center py-8`,children:(0,A.jsx)(c,{className:`w-10 h-10 animate-spin text-bbcRed`})}):(0,A.jsxs)(`div`,{className:`max-w-6xl mx-auto px-2 sm:px-3`,children:[(0,A.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,A.jsx)(`h1`,{className:`text-lg sm:text-2xl font-bold`,children:e?`‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®`:`‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶è‡¶ï‡¶§‡ßç‡¶∞‡¶ø‡¶§)`}),e&&(0,A.jsxs)(`div`,{className:`flex gap-2 text-xs sm:text-sm`,children:[(0,A.jsxs)(n,{to:`/article/${e}?lang=bn`,target:`_blank`,className:`text-card-text hover:underline flex items-center gap-1 whitespace-nowrap`,children:[`(BN) ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® `,(0,A.jsx)(l,{className:`w-3 h-3`})]}),(0,A.jsxs)(n,{to:`/article/${e}?lang=en`,target:`_blank`,className:`text-card-text hover:underline flex items-center gap-1 whitespace-nowrap`,children:[`(EN) ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® `,(0,A.jsx)(l,{className:`w-3 h-3`})]})]})]}),(0,A.jsx)(`form`,{onSubmit:Y,className:`space-y-4 sm:space-y-6`,children:(0,A.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6`,children:[(0,A.jsxs)(`div`,{className:`lg:col-span-2 space-y-4 sm:space-y-6 bg-card p-3 sm:p-4 md:p-6 rounded-xl border border-border-color shadow-sm`,children:[(0,A.jsx)(`h3`,{className:`font-bold text-base sm:text-lg mb-3 sm:mb-4 border-b border-border-color pb-2`,children:`‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡¶¨‡¶∏‡ßç‡¶§‡ßÅ (‡¶è‡¶ï‡¶§‡ßç‡¶∞‡¶ø‡¶§)`}),(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`label`,{htmlFor:`title-bn`,className:`block text-sm font-bold mb-2`,children:`‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ)`}),(0,A.jsx)(`input`,{id:`title-bn`,name:`title_bn`,value:o.title_bn||``,onChange:e=>u(t=>({...t,title_bn:e.target.value})),required:!0,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`,placeholder:`‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡ßá‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...`})]}),(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`label`,{htmlFor:`title-en`,className:`block text-sm font-bold mb-2`,children:`‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ (‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø)`}),(0,A.jsx)(`input`,{id:`title-en`,name:`title_en`,value:o.title_en||``,onChange:e=>u(t=>({...t,title_en:e.target.value})),className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`,placeholder:`Enter article title...`})]}),(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`label`,{htmlFor:`summary-bn`,className:`block text-sm font-bold mb-2`,children:`‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶∏‡¶æ‡¶∞‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡ßá‡¶™ (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ)`}),(0,A.jsx)(`textarea`,{id:`summary-bn`,name:`summary_bn`,rows:3,value:o.summary_bn||``,onChange:e=>u(t=>({...t,summary_bn:e.target.value})),className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`,placeholder:`‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶∏‡¶æ‡¶∞‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡ßá‡¶™...`})]}),(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`label`,{htmlFor:`summary-en`,className:`block text-sm font-bold mb-2`,children:`‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶∏‡¶æ‡¶∞‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡ßá‡¶™ (‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø)`}),(0,A.jsx)(`textarea`,{id:`summary-en`,name:`summary_en`,rows:3,value:o.summary_en||``,onChange:e=>u(t=>({...t,summary_en:e.target.value})),className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`,placeholder:`Brief summary...`})]}),(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`label`,{htmlFor:`content-bn`,className:`block text-sm font-bold mb-2`,children:`‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡¶¨‡¶∏‡ßç‡¶§‡ßÅ (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ)`}),(0,A.jsx)(S,{value:o.content_bn||``,onChange:e=>{H.current=e,u(t=>({...t,content_bn:e}))},placeholder:`‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶Ø‡¶º ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...`,height:`400px`,className:`w-full rounded-lg border border-border-color bg-card focus:border-bbcRed`}),(0,A.jsx)(`div`,{className:`mt-3`,children:(0,A.jsx)(M,{text:o.content_bn||``,onTranslate:e=>{U.current=e,u(t=>({...t,content_en:e}))},currentLang:`bn`,buttonLabel:`Translate to English`})})]}),(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`label`,{htmlFor:`content-en`,className:`block text-sm font-bold mb-2`,children:`‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡¶¨‡¶∏‡ßç‡¶§‡ßÅ (‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø)`}),(0,A.jsx)(S,{value:o.content_en||``,onChange:e=>{U.current=e,u(t=>({...t,content_en:e}))},placeholder:`Write in English...`,height:`400px`,className:`w-full rounded-lg border border-border-color bg-card focus:border-bbcRed`}),(0,A.jsx)(`div`,{className:`mt-3`,children:(0,A.jsx)(M,{text:o.content_en||``,onTranslate:e=>{H.current=e,u(t=>({...t,content_bn:e}))},currentLang:`en`,buttonLabel:`Translate to Bengali`})})]})]}),(0,A.jsxs)(`div`,{className:`space-y-6`,children:[I&&(0,A.jsx)(`div`,{id:`restore-alert`,className:`bg-muted-bg border border-border-color rounded-xl p-4`,children:(0,A.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,A.jsx)(b,{className:`w-5 h-5 text-card-text mt-0.5`}),(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`h4`,{className:`text-sm font-bold text-card-text`,children:`‡¶Ö‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶ñ‡¶∏‡¶°‡¶º‡¶æ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶ó‡ßá‡¶õ‡ßá`}),(0,A.jsx)(`p`,{className:`text-xs text-card-text mt-1`,children:`‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá ‡¶è‡¶á ‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶ü‡¶ø‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡¶Ç‡¶∏‡ßç‡¶ï‡¶∞‡¶£ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶ó‡ßá‡¶õ‡ßá‡•§`}),(0,A.jsx)(`button`,{type:`button`,onClick:q,className:`mt-2 text-xs bg-card text-card-text px-3 py-1.5 rounded hover:bg-card/90 transition-colors font-bold`,children:`‡¶ñ‡¶∏‡¶°‡¶º‡¶æ ‡¶™‡ßÅ‡¶®‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®`})]})]})}),(0,A.jsxs)(`div`,{className:`bg-card p-4 rounded-xl border border-border-color shadow-sm`,children:[(0,A.jsx)(`h3`,{className:`font-bold mb-3 text-sm uppercase text-muted-text`,children:`SEO Metadata (‡¶è‡¶∏‡¶á‡¶ì ‡¶Æ‡ßá‡¶ü‡¶æ‡¶°‡ßá‡¶ü‡¶æ)`}),(0,A.jsxs)(`div`,{className:`mb-4`,children:[(0,A.jsxs)(`div`,{className:`flex justify-between items-center mb-1`,children:[(0,A.jsx)(`label`,{className:`block text-xs font-bold`,children:`Meta Title (‡¶Æ‡ßá‡¶ü‡¶æ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ)`}),(0,A.jsxs)(`span`,{className:`text-[10px] font-bold ${(o.meta_title?.length||0)>60?`text-danger`:`text-muted-text`}`,children:[o.meta_title?.length||0,`/60`]})]}),(0,A.jsx)(`input`,{name:`meta_title`,value:o.meta_title||``,onChange:e=>u(t=>({...t,meta_title:e.target.value})),className:`w-full p-2 rounded border border-border-color bg-muted-bg text-sm focus:border-bbcRed outline-none`,placeholder:`SEO Title (Google Search)`})]}),(0,A.jsxs)(`div`,{className:`mb-4`,children:[(0,A.jsxs)(`div`,{className:`flex justify-between items-center mb-1`,children:[(0,A.jsx)(`label`,{className:`block text-xs font-bold`,children:`Meta Description (‡¶Æ‡ßá‡¶ü‡¶æ ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ)`}),(0,A.jsxs)(`span`,{className:`text-[10px] font-bold ${(o.meta_description?.length||0)>160?`text-danger`:`text-muted-text`}`,children:[o.meta_description?.length||0,`/160`]})]}),(0,A.jsx)(`textarea`,{name:`meta_description`,value:o.meta_description||``,onChange:e=>u(t=>({...t,meta_description:e.target.value})),rows:3,className:`w-full p-2 rounded border border-border-color bg-muted-bg text-sm focus:border-bbcRed outline-none`,placeholder:`Short description for search results...`})]}),(0,A.jsxs)(`div`,{className:`mb-4`,children:[(0,A.jsx)(`label`,{className:`block text-xs font-bold mb-1`,children:`Meta Keywords (‡¶ï‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°)`}),(0,A.jsx)(`input`,{name:`meta_keywords`,value:o.meta_keywords||``,onChange:e=>u(t=>({...t,meta_keywords:e.target.value})),className:`w-full p-2 rounded border border-border-color bg-muted-bg text-sm focus:border-bbcRed outline-none`,placeholder:`news, bangladesh, politics (comma separated)`})]})]}),(0,A.jsxs)(`div`,{className:`bg-card p-4 rounded-xl border border-border-color shadow-sm`,children:[(0,A.jsx)(`h3`,{className:`font-bold mb-3 text-sm uppercase text-muted-text`,children:`‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂‡¶®‡¶æ`}),(0,A.jsxs)(`div`,{className:`mb-4`,children:[(0,A.jsx)(`label`,{htmlFor:`status-dropdown`,className:`block text-xs font-bold mb-2`,children:`‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø`}),(0,A.jsx)(C,{id:`status-dropdown`,value:o.status||`draft`,onChange:e=>u(t=>({...t,status:e})),options:[{value:`draft`,label:`‡¶ñ‡¶∏‡¶°‡¶º‡¶æ`},{value:`published`,label:`‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂‡¶ø‡¶§`},{value:`archived`,label:`‡¶Ü‡¶∞‡ßç‡¶ï‡¶æ‡¶á‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`}]})]}),(0,A.jsx)(`div`,{className:`mb-4`,children:(0,A.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer`,children:[(0,A.jsx)(`input`,{type:`checkbox`,name:`allow_submissions`,checked:o.allow_submissions||!1,onChange:e=>u(t=>({...t,allow_submissions:e.target.checked})),className:`form-checkbox h-5 w-5 text-bbcRed rounded`}),(0,A.jsx)(`span`,{className:`text-sm font-bold text-card-text`,children:`‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶¶‡¶ø‡¶®`})]})}),(0,A.jsx)(`button`,{type:`submit`,className:`w-full bg-bbcRed text-white py-3 rounded-lg font-bold hover:opacity-90 transition-opacity text-sm uppercase tracking-wide`,disabled:P,children:P?(0,A.jsx)(c,{className:`w-4 h-4 inline animate-spin`}):e?`‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶∏‡¶Ç‡¶∏‡ßç‡¶ï‡¶∞‡¶£ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®`:`‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®`})]}),(0,A.jsxs)(`div`,{className:`bg-card p-4 rounded-xl border border-border-color shadow-sm`,children:[(0,A.jsx)(`h3`,{className:`font-bold mb-3 text-sm uppercase text-muted-text`,children:`‡¶∏‡¶Ç‡¶ó‡¶†‡¶®`}),(0,A.jsxs)(`div`,{className:`mb-4`,children:[(0,A.jsx)(`label`,{htmlFor:`category-dropdown`,className:`block text-xs font-bold mb-2`,children:`‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó`}),(0,A.jsxs)(`select`,{id:`category-dropdown`,name:`category_id`,value:o.category_id||``,onChange:e=>u(t=>({...t,category_id:e.target.value})),className:`custom-select w-full p-2.5 rounded-lg border border-border-color bg-card text-card-text text-sm`,children:[(0,A.jsx)(`option`,{value:``,children:`‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®`}),m.map(e=>(0,A.jsx)(`option`,{value:e.id,children:e.title_bn},e.id))]})]}),(0,A.jsxs)(`div`,{className:`mb-4`,children:[(0,A.jsx)(`label`,{htmlFor:`section-dropdown`,className:`block text-xs font-bold mb-2`,children:`‡¶Ö‡¶®‡ßÅ‡¶ö‡ßç‡¶õ‡ßá‡¶¶ (‡¶π‡ßã‡¶Æ‡¶™‡ßá‡¶ú)`}),(0,A.jsx)(C,{id:`section-dropdown`,value:o.section_id||``,onChange:e=>u(t=>({...t,section_id:e})),options:[{value:``,label:`‡¶ï‡¶ø‡¶õ‡ßÅ‡¶á ‡¶®‡¶æ`},..._.map(e=>({value:e.id,label:e.title||e.title}))]})]})]}),(0,A.jsxs)(`div`,{className:`bg-card p-4 rounded-xl border border-border-color shadow-sm`,children:[(0,A.jsx)(`h3`,{className:`font-bold mb-3 text-sm uppercase text-muted-text`,children:`‡¶Æ‡¶ø‡¶°‡¶ø‡¶Ø‡¶º‡¶æ`}),(0,A.jsxs)(`div`,{className:`mb-4`,children:[(0,A.jsx)(`label`,{htmlFor:`featured-image-url`,className:`block text-xs font-bold mb-1`,children:`‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶õ‡¶¨‡¶ø‡¶∞ URL`}),(0,A.jsx)(`input`,{id:`featured-image-url`,name:`image`,value:o.image||``,onChange:e=>u(t=>({...t,image:e.target.value})),className:`w-full p-2 rounded border border-border-color bg-muted-bg text-sm`})]}),(0,A.jsxs)(`div`,{className:`mb-4`,children:[(0,A.jsx)(`label`,{htmlFor:`image-upload`,className:`block text-xs font-bold mb-1`,children:`‡¶Ö‡¶•‡¶¨‡¶æ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®`}),(0,A.jsx)(`input`,{id:`image-upload`,type:`file`,onChange:J,className:`w-full text-xs`})]}),(0,A.jsx)(`div`,{className:`aspect-video bg-muted-bg rounded overflow-hidden`,children:(0,A.jsx)(`img`,{id:`image-preview`,src:o.image||``,alt:`Preview`,className:`w-full h-full object-cover ${o.image?``:`opacity-50`}`})})]}),e&&(0,A.jsxs)(`div`,{className:`bg-card p-4 rounded-xl border border-border-color shadow-sm`,children:[(0,A.jsxs)(`div`,{className:`flex justify-between items-center mb-3`,children:[(0,A.jsx)(`h3`,{className:`font-bold text-sm uppercase text-muted-text`,children:`‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø ‡¶®‡¶•‡¶ø`}),(0,A.jsxs)(`button`,{type:`button`,onClick:()=>X(null),className:`text-bbcRed hover:underline text-sm font-bold flex items-center gap-1`,children:[(0,A.jsx)(f,{className:`w-4 h-4`}),`‡¶®‡¶•‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®`]})]}),(0,A.jsxs)(`div`,{className:`space-y-2`,children:[d.map(e=>(0,A.jsxs)(`div`,{className:`flex items-center justify-between bg-muted-bg p-2 rounded-lg`,children:[(0,A.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,A.jsx)(s,{className:`w-5 h-5 text-muted-text`}),(0,A.jsx)(`span`,{className:`text-sm font-medium`,children:e.display_name_en||e.display_name_bn})]}),(0,A.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,A.jsx)(`button`,{type:`button`,onClick:()=>X(e),className:`p-1.5 hover:bg-black/10 rounded-md`,children:(0,A.jsx)(h,{className:`w-4 h-4`})}),(0,A.jsx)(`button`,{type:`button`,onClick:()=>$(e.id),className:`p-1.5 hover:bg-danger/10 text-danger rounded-md`,children:(0,A.jsx)(v,{className:`w-4 h-4`})})]})]},e.id)),d.length===0&&(0,A.jsx)(`p`,{className:`text-sm text-muted-text text-center py-4`,children:`‡¶ï‡ßã‡¶®‡ßã ‡¶®‡¶•‡¶ø ‡¶∏‡¶Ç‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§`})]})]})]})]})}),R&&e&&(0,A.jsx)(j,{isOpen:R,onClose:Z,onSave:Q,articleId:e,doc:B})]})};export{N as default};