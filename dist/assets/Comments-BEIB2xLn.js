import{r as e}from"./rolldown-runtime-Ckerh37x.js";import{lt as t}from"./vendor-CzlevQ0X.js";import{l as n,r,t as i}from"./vendor-react-4tdSsti4.js";import{E as a,U as o,u as s}from"./vendor-ui-eoplT0e_.js";import{_ as c,d as l,f as u,g as d,h as f,i as p,n as m,o as h,p as g,r as _,v}from"./index-BNVTuXc1.js";var y=e(t(),1);const b=(e,t={})=>{let{onSuccess:n,onError:r,autoFetch:i=!0,showErrorToast:a=!0,showSuccessToast:o=!1,successMessage:s}=t,{language:l}=v(),{success:u,error:d}=m(),[f,p]=(0,y.useState)(null),[h,g]=(0,y.useState)(!0),[_,b]=(0,y.useState)(null),x=(0,y.useCallback)(async()=>{g(!0),b(null);try{let t=await e();if(t.success)p(t),n?.(t),o&&s&&u(s);else{let e=t.error||c(`something_went_wrong`,l);b(e),r?.(e),a&&d(e)}}catch{let e=c(`server_error`,l);b(e),r?.(e),a&&d(e)}finally{g(!1)}},[e,l,n,r,a,o,s,u,d]);return(0,y.useEffect)(()=>{i&&x()},[i,x]),{data:f,isLoading:h,error:_,refetch:x}};var x=e(i(),1),S=()=>{let e=n(),{data:t,isLoading:i,refetch:c}=b((0,y.useCallback)(()=>h.getAllComments(),[]),{showErrorToast:!0}),m=t?.comments||[],v=(0,y.useCallback)(async e=>{if(window.confirm(`এই মন্তব্য মুছে ফেলতে চান?`))try{let t=await h.deleteComment(e);t.success?(d(`মন্তব্য মুছে ফেলা হয়েছে!`),c()):d(t.error||`মন্তব্য মোছতে ব্যর্থ!`,`error`)}catch{d(`সার্ভার ত্রুটি!`,`error`)}},[c]);return(0,x.jsx)(p,{isLoading:i,children:(0,x.jsxs)(`div`,{className:`space-y-4 sm:space-y-6`,children:[(0,x.jsx)(`div`,{className:`flex justify-between items-center mb-4 sm:mb-6`,children:(0,x.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`পর্যবেক্ষণ`})}),(0,x.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:(0,x.jsx)(_,{isEmpty:m.length===0,title:`No Comments Found`,description:`There are currently no comments to moderate.`,icon:(0,x.jsx)(a,{className:`w-16 h-16 mx-auto`}),children:(0,x.jsx)(`div`,{className:`grid grid-cols-1 gap-3 sm:gap-4 p-3 sm:p-4`,children:m.map(t=>(0,x.jsxs)(`button`,{onClick:()=>g(window.innerWidth<768,e,`/admin/comments/${t.id}`),type:`button`,className:`bg-card p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors cursor-pointer w-full text-left`,children:[(0,x.jsxs)(`div`,{className:`flex items-start justify-between mb-3`,children:[(0,x.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0`,children:[(0,x.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-gradient-to-br from-bbcRed to-orange-600 flex items-center justify-center text-white text-sm font-bold`,children:t.user_name.charAt(0).toUpperCase()}),(0,x.jsxs)(`div`,{className:`truncate`,children:[(0,x.jsx)(`div`,{className:`font-bold text-sm truncate`,children:l(t.user_name)}),(0,x.jsx)(`div`,{className:`text-xs text-muted-text truncate`,children:l(t.title_bn)||`অজানা নিবন্ধ`})]})]}),(0,x.jsxs)(`div`,{className:`flex items-center gap-1 shrink-0 ml-2`,children:[(0,x.jsx)(`div`,{className:`text-xs text-muted-text hidden sm:block whitespace-nowrap`,children:u(t.created_at,`bn`)}),(0,x.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,x.jsx)(r,{to:`/article/${t.article_id}`,target:`_blank`,title:`View Article`,className:`text-muted-text hover:text-bbcRed hover:bg-bbcRed/10 p-2 rounded transition-colors`,children:(0,x.jsx)(o,{className:`w-4 h-4`})}),(0,x.jsx)(`button`,{type:`button`,onClick:()=>v(t.id),className:`text-danger hover:text-danger/80 hover:bg-danger/10 dark:hover:bg-danger/20 p-2 rounded transition-colors`,title:`Delete`,children:(0,x.jsx)(s,{className:`w-4 h-4`})})]})]})]}),(0,x.jsx)(`div`,{className:`text-sm text-card-text max-h-16 overflow-hidden prose prose-sm dark:prose-invert`,children:(()=>{let e=f(t.text),n=document.createElement(`div`);n.innerHTML=e;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,y.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))})()}),(0,x.jsx)(`div`,{className:`text-xs text-muted-text mt-2 sm:hidden`,children:u(t.created_at,`bn`)})]},t.id))})})})]})})};export{S as default};