import{r as e}from"./rolldown-runtime-Ckerh37x.js";import{B as t,C as n,E as r,F as i,N as a,T as o,U as s,V as c,W as l,_ as u,a as d,b as f,c as p,d as m,f as h,g,k as _,l as v,m as y,o as b,s as x,x as S,y as C,z as w}from"./component-Layout-TPrHIES6.js";import{a as T,d as E,i as D,n as O,r as k,u as A}from"./component-common-Brp59LFJ.js";import{i as j,n as M,r as N,t as P}from"./component-admin-C1EmCHSN.js";var F=a(`arrow-left`,[[`path`,{d:`m12 19-7-7 7-7`,key:`1l729n`}],[`path`,{d:`M19 12H5`,key:`x3x0zl`}]]),I=a(`external-link`,[[`path`,{d:`M15 3h6v6`,key:`1q9fwt`}],[`path`,{d:`M10 14 21 3`,key:`gplh6r`}],[`path`,{d:`M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6`,key:`a6xqqp`}]]),L=a(`inbox`,[[`polyline`,{points:`22 12 16 12 14 15 10 15 8 12 2 12`,key:`o97t9d`}],[`path`,{d:`M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z`,key:`oot6mr`}]]),R=a(`pen`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}]]),z=a(`save`,[[`path`,{d:`M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z`,key:`1c8476`}],[`path`,{d:`M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7`,key:`1ydtos`}],[`path`,{d:`M7 3v4a1 1 0 0 0 1 1h7`,key:`t51u73`}]]),B=a(`sparkles`,[[`path`,{d:`M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z`,key:`1s2grr`}],[`path`,{d:`M20 2v4`,key:`1rf3ol`}],[`path`,{d:`M22 4h-4`,key:`gwowj6`}],[`circle`,{cx:`4`,cy:`20`,r:`2`,key:`6kqj1y`}]]),V=a(`square-pen`,[[`path`,{d:`M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`,key:`1m0v6g`}],[`path`,{d:`M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z`,key:`ohrbg2`}]]),H=a(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),U=e(l(),1),W=e(u(),1),G=()=>{let{id:e}=t(),n=w(),{language:a}=g(),[o,s]=(0,U.useState)({}),[c,l]=(0,U.useState)([]),[u,p]=(0,U.useState)([]),[h,_]=(0,U.useState)([]),[v,y]=(0,U.useState)(!0),[x,S]=(0,U.useState)(!1),[C,T]=(0,U.useState)(!1),[D,O]=(0,U.useState)(!1),[P,F]=(0,U.useState)(!1),[L,R]=(0,U.useState)(null),G=(0,U.useRef)(``),K=(0,U.useRef)(``),q=`article-draft-${e||`new`}`,J=(0,U.useCallback)(async()=>{if(e)try{let t=await d.getArticleDocuments(e);t.success&&l(t.documents||[])}catch{m(`Failed to load documents`,`error`)}},[e]);(0,U.useEffect)(()=>{(async()=>{y(!0);try{let[t,n]=await Promise.all([d.getCategories(),d.getSections()]);if(t.success&&t.data&&p(t.data),n.success&&n.data&&_(n.data.map(e=>({...e,title:e.title||`Untitled Section`}))),e){await J();let t=await b.getArticle(e,a);t.success&&t.article?s({id:t.article.id,title_bn:t.article.title_bn||``,title_en:t.article.title_en||``,summary_bn:t.article.summary_bn||``,summary_en:t.article.summary_en||``,content_bn:t.article.content_bn||``,content_en:t.article.content_en||``,image:t.article.image||``,image_bn:t.article.image_bn||t.article.image||``,image_en:t.article.image_en||``,use_separate_images:t.article.use_separate_images||!1,category_id:t.article.category_id||``,section_id:t.article.section_id||``,status:t.article.status,allow_submissions:t.article.allow_submissions,meta_title:t.article.meta_title||``,meta_description:t.article.meta_description||``,meta_keywords:t.article.meta_keywords||``}):m(t.error||`নিবন্ধ লোড করতে ব্যর্থ হয়েছে।`,`error`)}else s({id:`art_${Date.now()}`,status:`draft`,allow_submissions:!1,image:``,category_id:``,section_id:``})}catch{m(`সার্ভার ত্রুটি!`,`error`)}finally{y(!1)}})()},[e,J,a]),(0,U.useEffect)(()=>{let t=localStorage.getItem(q);if(t&&!e){let e=JSON.parse(t);(e.content_bn||e.content_en)&&O(!0)}},[q,e]);let Y=(0,U.useCallback)(()=>{let e={...o,content_bn:G.current,content_en:K.current};localStorage.setItem(q,JSON.stringify(e))},[o,q]);(0,U.useEffect)(()=>{let e=setTimeout(()=>{Y()},2e3);return()=>{clearTimeout(e)}},[Y]);let X=(0,U.useCallback)(()=>{let e=localStorage.getItem(q);if(e){let t=JSON.parse(e);s(e=>({...e,...t})),m(`খসড়া সফলভাবে পুনরুদ্ধার করা হয়েছে!`),O(!1)}},[q]),Z=(0,U.useCallback)(async(e,t=`image`)=>{let n=e.target.files?.[0];if(!n)return;let r=n.name.split(`.`).pop()?.toLowerCase()||``;if(N.includes(r)){m(`File type not allowed (potentially dangerous): .${r}`,`error`);return}if(n.size>2*1024*1024){m(`ফাইল খুব বড়! সর্বোচ্চ ২এমবি।`,`error`);return}let i=new FormData;i.append(`image`,n);try{let e=await d.uploadImage(i);e.success&&e.url?(t===`image`?s(t=>({...t,image:e.url,image_bn:e.url})):t===`image_bn`?s(t=>({...t,image_bn:e.url,image:e.url})):t===`image_en`&&s(t=>({...t,image_en:e.url})),m(`ছবি সফলভাবে আপলোড করা হয়েছে!`)):m(e.error||`ছবি আপলোডে ব্যর্থ!`,`error`)}catch{m(`সার্ভার ত্রুটি!`,`error`)}},[]),ee=(0,U.useCallback)(async t=>{t.preventDefault(),S(!0);let r=new FormData,i=o.id||`art_${Date.now()}`;r.append(`id`,i),r.append(`title_bn`,o.title_bn||``),r.append(`title_en`,o.title_en||``),r.append(`summary_bn`,o.summary_bn||``),r.append(`summary_en`,o.summary_en||``),r.append(`content_bn`,G.current),r.append(`content_en`,K.current),r.append(`image`,o.image||``),r.append(`image_bn`,o.image_bn||o.image||``),r.append(`image_en`,o.image_en||``),r.append(`use_separate_images`,o.use_separate_images?`true`:`false`),r.append(`category_id`,o.category_id||``),r.append(`sectionId`,o.section_id||``),r.append(`status`,o.status||`draft`),r.append(`meta_title`,o.meta_title||``),r.append(`meta_description`,o.meta_description||``),r.append(`meta_keywords`,o.meta_keywords||``),r.append(`allow_submissions`,o.allow_submissions?`1`:`0`);try{let t=await d.saveArticle(r);t.success?(m(`নিবন্ধ সফলভাবে সংরক্ষিত হয়েছে!`),localStorage.removeItem(q),e||n(`/admin/articles/${t.id}/edit`)):m(t.error||`নিবন্ধ সংরক্ষণ করতে ব্যর্থ হয়েছে!`,`error`)}catch{m(`সার্ভার ত্রুটি!`,`error`)}finally{S(!1)}},[o,e,n,q]),Q=async t=>{if(e){if(t){let e=await d.getDocument(t.id);if(e.success&&e.document)R(e.document);else return}else R(null);F(!0)}},$=()=>{F(!1),R(null)},te=async()=>{await J(),$()},ne=async()=>{if(!o.title_bn&&!o.title_en&&!o.content_bn&&!o.content_en){m(`Please add some content or title first.`,`error`);return}T(!0);try{let e=await d.generateMetadata({title_bn:o.title_bn,title_en:o.title_en,content_bn:o.content_bn,content_en:o.content_en});e.success&&e.metadata?(s(t=>({...t,meta_title:e.metadata?.meta_title,meta_description:e.metadata?.meta_description,meta_keywords:e.metadata?.meta_keywords})),m(`Metadata generated successfully!`)):m(e.error||`Failed to generate metadata`,`error`)}catch{m(`Server error while generating metadata`,`error`)}finally{T(!1)}},re=async e=>{if(window.confirm(`আপনি কি নিশ্চিত যে আপনি এই নথিটি মুছে ফেলতে চান?`))try{await d.deleteDocument(e),await J()}catch{}};return v?(0,W.jsx)(`div`,{className:`text-center py-8`,children:(0,W.jsx)(j,{className:`w-10 h-10 animate-spin text-bbcRed`})}):(0,W.jsxs)(`div`,{className:`max-w-6xl mx-auto px-2 sm:px-3`,children:[(0,W.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,W.jsx)(`h1`,{className:`text-lg sm:text-2xl font-bold`,children:e?`নিবন্ধ সম্পাদনা করুন`:`নতুন নিবন্ধ তৈরি করুন (একত্রিত)`}),e&&(0,W.jsxs)(`div`,{className:`flex gap-2 text-xs sm:text-sm`,children:[(0,W.jsxs)(i,{to:`/article/${e}?lang=bn`,target:`_blank`,className:`text-card-text hover:underline flex items-center gap-1 whitespace-nowrap`,children:[`(BN) দেখুন `,(0,W.jsx)(I,{className:`w-3 h-3`})]}),(0,W.jsxs)(i,{to:`/article/${e}?lang=en`,target:`_blank`,className:`text-card-text hover:underline flex items-center gap-1 whitespace-nowrap`,children:[`(EN) দেখুন `,(0,W.jsx)(I,{className:`w-3 h-3`})]})]})]}),(0,W.jsx)(`form`,{onSubmit:ee,className:`space-y-4 sm:space-y-6`,children:(0,W.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6`,children:[(0,W.jsxs)(`div`,{className:`lg:col-span-2 space-y-4 sm:space-y-6 bg-card p-3 sm:p-4 md:p-6 rounded-xl border border-border-color shadow-sm`,children:[(0,W.jsx)(`h3`,{className:`font-bold text-base sm:text-lg mb-3 sm:mb-4 border-b border-border-color pb-2`,children:`বিষয়বস্তু (একত্রিত)`}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`label`,{htmlFor:`title-bn`,className:`block text-sm font-bold mb-2`,children:`শিরোনাম (বাংলা)`}),(0,W.jsx)(`input`,{id:`title-bn`,name:`title_bn`,value:o.title_bn||``,onChange:e=>s(t=>({...t,title_bn:e.target.value})),required:!0,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`,placeholder:`নিবন্ধের শিরোনাম লিখুন...`})]}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`label`,{htmlFor:`title-en`,className:`block text-sm font-bold mb-2`,children:`শিরোনাম (ইংরেজি)`}),(0,W.jsx)(`input`,{id:`title-en`,name:`title_en`,value:o.title_en||``,onChange:e=>s(t=>({...t,title_en:e.target.value})),className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`,placeholder:`Enter article title...`})]}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`label`,{htmlFor:`summary-bn`,className:`block text-sm font-bold mb-2`,children:`সংক্ষিপ্ত সারসংক্ষেপ (বাংলা)`}),(0,W.jsx)(`textarea`,{id:`summary-bn`,name:`summary_bn`,rows:3,value:o.summary_bn||``,onChange:e=>s(t=>({...t,summary_bn:e.target.value})),className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`,placeholder:`সংক্ষিপ্ত সারসংক্ষেপ...`})]}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`label`,{htmlFor:`summary-en`,className:`block text-sm font-bold mb-2`,children:`সংক্ষিপ্ত সারসংক্ষেপ (ইংরেজি)`}),(0,W.jsx)(`textarea`,{id:`summary-en`,name:`summary_en`,rows:3,value:o.summary_en||``,onChange:e=>s(t=>({...t,summary_en:e.target.value})),className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`,placeholder:`Brief summary...`})]}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`label`,{htmlFor:`content-bn`,className:`block text-sm font-bold mb-2`,children:`বিষয়বস্তু (বাংলা)`}),(0,W.jsx)(A,{value:o.content_bn||``,onChange:e=>{G.current=e,s(t=>({...t,content_bn:e}))},placeholder:`বাংলায় লিখুন...`,height:`400px`,className:`w-full rounded-lg border border-border-color bg-card focus:border-bbcRed`}),(0,W.jsx)(`div`,{className:`mt-3`,children:(0,W.jsx)(k,{text:o.content_bn||``,onTranslate:e=>{s(t=>({...t,content_en:e})),K.current=e},currentLang:`bn`,buttonLabel:`Translate to English`})})]}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`label`,{htmlFor:`content-en`,className:`block text-sm font-bold mb-2`,children:`বিষয়বস্তু (ইংরেজি)`}),(0,W.jsx)(A,{value:o.content_en||``,onChange:e=>{K.current=e,s(t=>({...t,content_en:e}))},placeholder:`Write in English...`,height:`400px`,className:`w-full rounded-lg border border-border-color bg-card focus:border-bbcRed`}),(0,W.jsx)(`div`,{className:`mt-3`,children:(0,W.jsx)(k,{text:o.content_en||``,onTranslate:e=>{s(t=>({...t,content_bn:e})),G.current=e},currentLang:`en`,buttonLabel:`Translate to Bengali`})})]})]}),(0,W.jsxs)(`div`,{className:`space-y-6`,children:[D&&(0,W.jsx)(`div`,{id:`restore-alert`,className:`bg-muted-bg border border-border-color rounded-xl p-4`,children:(0,W.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,W.jsx)(z,{className:`w-5 h-5 text-card-text mt-0.5`}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`h4`,{className:`text-sm font-bold text-card-text`,children:`অসংরক্ষিত খসড়া পাওয়া গেছে`}),(0,W.jsx)(`p`,{className:`text-xs text-card-text mt-1`,children:`আপনার ব্রাউজারে এই নিবন্ধটির একটি নতুন সংস্করণ পাওয়া গেছে।`}),(0,W.jsx)(`button`,{type:`button`,onClick:X,className:`mt-2 text-xs bg-card text-card-text px-3 py-1.5 rounded hover:bg-card/90 transition-colors font-bold`,children:`খসড়া পুনরুদ্ধার করুন`})]})]})}),(0,W.jsxs)(`div`,{className:`bg-card p-4 rounded-xl border border-border-color shadow-sm`,children:[(0,W.jsxs)(`div`,{className:`flex justify-between items-center mb-3`,children:[(0,W.jsx)(`h3`,{className:`font-bold text-sm uppercase text-muted-text`,children:`SEO Metadata (এসইও মেটাডেটা)`}),(0,W.jsxs)(`button`,{type:`button`,onClick:ne,disabled:C,className:`text-xs bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1.5 rounded-full font-bold flex items-center gap-1.5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:[C?(0,W.jsx)(j,{className:`w-3 h-3 animate-spin`}):(0,W.jsx)(B,{className:`w-3 h-3`}),C?`Generating...`:`AI`]})]}),(0,W.jsxs)(`div`,{className:`mb-4`,children:[(0,W.jsxs)(`div`,{className:`flex justify-between items-center mb-1`,children:[(0,W.jsx)(`label`,{htmlFor:`meta-title`,className:`block text-xs font-bold`,children:`Meta Title (মেটা শিরোনাম)`}),(0,W.jsxs)(`span`,{className:`text-[10px] font-bold ${(o.meta_title?.length||0)>60?`text-danger`:`text-muted-text`}`,children:[o.meta_title?.length||0,`/60`]})]}),(0,W.jsx)(`input`,{id:`meta-title`,name:`meta_title`,value:o.meta_title||``,onChange:e=>s(t=>({...t,meta_title:e.target.value})),className:`w-full p-2 rounded border border-border-color bg-muted-bg text-sm focus:border-bbcRed outline-none`,placeholder:`SEO Title (Google Search)`})]}),(0,W.jsxs)(`div`,{className:`mb-4`,children:[(0,W.jsxs)(`div`,{className:`flex justify-between items-center mb-1`,children:[(0,W.jsx)(`label`,{htmlFor:`meta-description`,className:`block text-xs font-bold`,children:`Meta Description (মেটা বর্ণনা)`}),(0,W.jsxs)(`span`,{className:`text-[10px] font-bold ${(o.meta_description?.length||0)>160?`text-danger`:`text-muted-text`}`,children:[o.meta_description?.length||0,`/160`]})]}),(0,W.jsx)(`textarea`,{id:`meta-description`,name:`meta_description`,value:o.meta_description||``,onChange:e=>s(t=>({...t,meta_description:e.target.value})),rows:3,className:`w-full p-2 rounded border border-border-color bg-muted-bg text-sm focus:border-bbcRed outline-none`,placeholder:`Short description for search results...`})]}),(0,W.jsxs)(`div`,{className:`mb-4`,children:[(0,W.jsx)(`label`,{htmlFor:`meta-keywords`,className:`block text-xs font-bold mb-1`,children:`Meta Keywords (কিওয়ার্ড)`}),(0,W.jsx)(`input`,{id:`meta-keywords`,name:`meta_keywords`,value:o.meta_keywords||``,onChange:e=>s(t=>({...t,meta_keywords:e.target.value})),className:`w-full p-2 rounded border border-border-color bg-muted-bg text-sm focus:border-bbcRed outline-none`,placeholder:`news, bangladesh, politics (comma separated)`})]})]}),(0,W.jsxs)(`div`,{className:`bg-card p-4 rounded-xl border border-border-color shadow-sm`,children:[(0,W.jsx)(`h3`,{className:`font-bold mb-3 text-sm uppercase text-muted-text`,children:`প্রকাশনা`}),(0,W.jsxs)(`div`,{className:`mb-4`,children:[(0,W.jsx)(`label`,{htmlFor:`status-dropdown`,className:`block text-xs font-bold mb-2`,children:`স্থিতি`}),(0,W.jsx)(E,{id:`status-dropdown`,value:o.status||`draft`,onChange:e=>s(t=>({...t,status:e})),options:[{value:`draft`,label:`খসড়া`},{value:`published`,label:`প্রকাশিত`},{value:`archived`,label:`আর্কাইভ করা হয়েছে`}]})]}),(0,W.jsx)(`div`,{className:`mb-4`,children:(0,W.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer`,children:[(0,W.jsx)(`input`,{type:`checkbox`,name:`allow_submissions`,checked:o.allow_submissions||!1,onChange:e=>s(t=>({...t,allow_submissions:e.target.checked})),className:`form-checkbox h-5 w-5 text-bbcRed rounded`}),(0,W.jsx)(`span`,{className:`text-sm font-bold text-card-text`,children:`ব্যবহারকারী জমা দেওয়ার অনুমতি দিন`})]})}),(0,W.jsx)(`button`,{type:`submit`,className:`w-full bg-bbcRed text-white py-3 rounded-lg font-bold hover:opacity-90 transition-opacity text-sm uppercase tracking-wide`,disabled:x,children:x?(0,W.jsx)(j,{className:`w-4 h-4 inline animate-spin`}):e?`সমস্ত সংস্করণ আপডেট করুন`:`নিবন্ধ প্রকাশ করুন`})]}),(0,W.jsxs)(`div`,{className:`bg-card p-4 rounded-xl border border-border-color shadow-sm`,children:[(0,W.jsx)(`h3`,{className:`font-bold mb-3 text-sm uppercase text-muted-text`,children:`সংগঠন`}),(0,W.jsxs)(`div`,{className:`mb-4`,children:[(0,W.jsx)(`label`,{htmlFor:`category-dropdown`,className:`block text-xs font-bold mb-2`,children:`বিভাগ`}),(0,W.jsxs)(`select`,{id:`category-dropdown`,name:`category_id`,value:o.category_id||``,onChange:e=>s(t=>({...t,category_id:e.target.value})),className:`custom-select w-full p-2.5 rounded-lg border border-border-color bg-card text-card-text text-sm`,children:[(0,W.jsx)(`option`,{value:``,children:`বিভাগ নির্বাচন করুন`}),u.map(e=>(0,W.jsx)(`option`,{value:e.id,children:e.title_bn},e.id))]})]}),(0,W.jsxs)(`div`,{className:`mb-4`,children:[(0,W.jsx)(`label`,{htmlFor:`section-dropdown`,className:`block text-xs font-bold mb-2`,children:`অনুচ্ছেদ (হোমপেজ)`}),(0,W.jsx)(E,{id:`section-dropdown`,value:o.section_id||``,onChange:e=>s(t=>({...t,section_id:e})),options:[{value:``,label:`কিছুই না`},...h.map(e=>({value:e.id,label:e.title||e.title}))]})]})]}),(0,W.jsxs)(`div`,{className:`bg-card p-4 rounded-xl border border-border-color shadow-sm`,children:[(0,W.jsx)(`h3`,{className:`font-bold mb-3 text-sm uppercase text-muted-text`,children:`মিডিয়া`}),(0,W.jsxs)(`div`,{className:`mb-4`,children:[(0,W.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer mb-2`,children:[(0,W.jsx)(`input`,{type:`checkbox`,checked:o.use_separate_images||!1,onChange:e=>s(t=>({...t,use_separate_images:e.target.checked})),className:`form-checkbox h-4 w-4 text-bbcRed rounded`}),(0,W.jsx)(`span`,{className:`text-xs font-bold`,children:`Use separate image for English version`})]}),o.use_separate_images?(0,W.jsxs)(`div`,{className:`space-y-4`,children:[(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`label`,{htmlFor:`image-bn-url`,className:`block text-xs font-bold mb-1`,children:`Bengali Image URL`}),(0,W.jsx)(`input`,{id:`image-bn-url`,value:o.image_bn||o.image||``,onChange:e=>s(t=>({...t,image_bn:e.target.value,image:e.target.value})),className:`w-full p-2 rounded border border-border-color bg-muted-bg text-sm`}),(0,W.jsxs)(`div`,{className:`mt-2`,children:[(0,W.jsx)(`label`,{htmlFor:`image-upload-bn-sep`,className:`block text-xs font-bold mb-1`,children:`Or Upload (Bengali)`}),(0,W.jsx)(`input`,{id:`image-upload-bn-sep`,type:`file`,onChange:e=>Z(e,`image_bn`),className:`w-full text-xs`})]})]}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`label`,{htmlFor:`image-en-url`,className:`block text-xs font-bold mb-1`,children:`English Image URL`}),(0,W.jsx)(`input`,{id:`image-en-url`,value:o.image_en||``,onChange:e=>s(t=>({...t,image_en:e.target.value})),className:`w-full p-2 rounded border border-border-color bg-muted-bg text-sm`}),(0,W.jsxs)(`div`,{className:`mt-2`,children:[(0,W.jsx)(`label`,{htmlFor:`image-upload-en-sep`,className:`block text-xs font-bold mb-1`,children:`Or Upload (English)`}),(0,W.jsx)(`input`,{id:`image-upload-en-sep`,type:`file`,onChange:e=>Z(e,`image_en`),className:`w-full text-xs`})]})]})]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(`label`,{htmlFor:`featured-image-url`,className:`block text-xs font-bold mb-1`,children:`Featured Image URL (Global / Bengali)`}),(0,W.jsx)(`input`,{id:`featured-image-url`,name:`image`,value:o.image||``,onChange:e=>s(t=>({...t,image:e.target.value,image_bn:e.target.value})),className:`w-full p-2 rounded border border-border-color bg-muted-bg text-sm`}),(0,W.jsxs)(`div`,{className:`mt-2`,children:[(0,W.jsx)(`label`,{htmlFor:`image-upload-bn`,className:`block text-xs font-bold mb-1`,children:`Or Upload`}),(0,W.jsx)(`input`,{id:`image-upload-bn`,type:`file`,onChange:e=>Z(e),className:`w-full text-xs`})]})]})]}),(0,W.jsx)(`div`,{className:`aspect-video bg-muted-bg rounded overflow-hidden`,children:(0,W.jsx)(`img`,{id:`image-preview`,src:o.use_separate_images?o.image_en||o.image_bn:o.image||``,alt:`Preview`,className:`w-full h-full object-cover ${(o.use_separate_images?o.image_en||o.image_bn:o.image)?``:`opacity-50`}`})})]}),e&&(0,W.jsxs)(`div`,{className:`bg-card p-4 rounded-xl border border-border-color shadow-sm`,children:[(0,W.jsxs)(`div`,{className:`flex justify-between items-center mb-3`,children:[(0,W.jsx)(`h3`,{className:`font-bold text-sm uppercase text-muted-text`,children:`ডাউনলোডযোগ্য নথি`}),(0,W.jsxs)(`button`,{type:`button`,onClick:()=>Q(null),className:`text-bbcRed hover:underline text-sm font-bold flex items-center gap-1`,children:[(0,W.jsx)(f,{className:`w-4 h-4`}),`নথি যোগ করুন`]})]}),(0,W.jsxs)(`div`,{className:`space-y-2`,children:[c.map(e=>(0,W.jsxs)(`div`,{className:`flex items-center justify-between bg-muted-bg p-2 rounded-lg`,children:[(0,W.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,W.jsx)(r,{className:`w-5 h-5 text-muted-text`}),(0,W.jsx)(`span`,{className:`text-sm font-medium`,children:e.display_name_en||e.display_name_bn})]}),(0,W.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,W.jsx)(`button`,{type:`button`,onClick:()=>Q(e),className:`p-1.5 hover:bg-black/10 rounded-md`,children:(0,W.jsx)(V,{className:`w-4 h-4`})}),(0,W.jsx)(`button`,{type:`button`,onClick:()=>re(e.id),className:`p-1.5 hover:bg-danger/10 text-danger rounded-md`,children:(0,W.jsx)(H,{className:`w-4 h-4`})})]})]},e.id)),c.length===0&&(0,W.jsx)(`p`,{className:`text-sm text-muted-text text-center py-4`,children:`কোনো নথি সংযুক্ত করা হয়নি।`})]})]})]})]})}),P&&e&&(0,W.jsx)(M,{isOpen:P,onClose:$,onSave:te,articleId:e,doc:L})]})},K=()=>{let{language:e}=g(),t=w(),[n,a]=(0,U.useState)([]),[o,s]=(0,U.useState)([]),[l,u]=(0,U.useState)(!0),[h,_]=c(),y=h.get(`status`)||`all`,b=h.get(`search`)||``,x=h.get(`cat`)||``,S=(0,U.useCallback)(async()=>{u(!0);try{let e=await d.getArticles({status:y,search:b,cat:x,lang:`bn`});e.success&&e.articles&&a(e.articles)}catch{m(`সার্ভার ত্রুটি!`,`error`)}finally{u(!1)}},[y,b,x]),T=(0,U.useCallback)(async()=>{try{let e=await d.getCategories();e.success&&e.data&&s(e.data)}catch{m(`সার্ভার ত্রুটি!`,`error`)}},[]);(0,U.useEffect)(()=>{S(),T()},[S,T]);let D=(0,U.useCallback)(async e=>{if(window.confirm(`আপনি কি নিশ্চিত এই নিবন্ধটি মুছে ফেলতে চান? এটি উভয় ভাষার সংস্করণ মুছে দেবে।`))try{let t=await d.deleteArticle(e);t.success?(m(`নিবন্ধ সফলভাবে মুছে ফেলা হয়েছে`),a(t=>t.filter(t=>t.id!==e))):m(t.error||`নিবন্ধ মোছতে ব্যর্থ!`,`error`)}catch{m(`সার্ভার ত্রুটি!`,`error`)}},[]),O=(e,t)=>{let n=new URLSearchParams(h.toString());t?n.set(e,t):n.delete(e),_(n)};return l?(0,W.jsx)(`div`,{className:`text-center py-8`,children:(0,W.jsx)(j,{className:`w-10 h-10 animate-spin text-bbcRed`})}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-start md:items-center gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,W.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`নিবন্ধ পরিচালনা করুন`}),(0,W.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-2 w-full md:w-auto`,children:[(0,W.jsxs)(`form`,{onSubmit:e=>{e.preventDefault()},className:`flex gap-2 w-full md:w-auto flex-wrap sm:flex-nowrap`,children:[(0,W.jsx)(`input`,{type:`text`,name:`search`,placeholder:`নিবন্ধ খুঁজুন...`,value:b,onChange:e=>O(`search`,e.target.value),className:`p-2 sm:p-2.5 rounded border border-border-color bg-card text-xs sm:text-sm w-full sm:w-auto md:w-48 focus:border-bbcRed outline-none`}),(0,W.jsx)(E,{value:x,onChange:e=>O(`cat`,e),options:[{value:``,label:`সকল বিভাগ`},...o.map(e=>({value:e.id,label:e.title_bn}))],className:`w-full sm:w-32 md:w-40`}),(0,W.jsx)(`button`,{type:`submit`,className:`bg-muted-bg p-2 rounded hover:bg-bbcRed hover:text-white transition-colors flex-shrink-0`,children:(0,W.jsx)(C,{className:`w-4 h-4`})})]}),(0,W.jsxs)(i,{to:`/admin/articles/new`,className:`bg-bbcRed text-white px-4 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap justify-center`,children:[(0,W.jsx)(f,{className:`w-4 h-4`}),` `,(0,W.jsx)(`span`,{className:`hidden sm:inline`,children:`নতুন`})]})]})]}),(0,W.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:n.length===0?(0,W.jsxs)(`div`,{className:`p-8 text-center text-muted-text`,children:[(0,W.jsx)(r,{className:`w-16 h-16 mx-auto mb-4 text-border-color`}),(0,W.jsx)(`p`,{className:`text-lg font-bold mb-2`,children:`কোনো নিবন্ধ পাওয়া যায়নি`}),(0,W.jsx)(`p`,{className:`text-sm mb-4`,children:`আপনার মানদণ্ডের সাথে মেলে এমন কোনো নিবন্ধ নেই।`}),(0,W.jsxs)(i,{to:`/admin/articles/new`,className:`bg-bbcRed text-white px-4 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity flex items-center gap-2 w-fit mx-auto`,children:[(0,W.jsx)(f,{className:`w-4 h-4`}),` নতুন নিবন্ধ তৈরি করুন`]})]}):(0,W.jsx)(`div`,{className:`grid grid-cols-1 gap-4 p-4`,children:n.map(n=>{let r={published:`bg-success/10 dark:bg-success/20 text-success border-success/30 dark:border-success/50`,draft:`bg-warning/10 dark:bg-warning/20 text-warning border-warning/30 dark:border-warning/50`,archived:`bg-danger/10 dark:bg-danger/20 text-danger border-danger/30 dark:border-danger/50`},a=r[n.status]||r.draft,o=p(n.published_at,e),s=p(n.created_at,e);return(0,W.jsxs)(`button`,{onClick:()=>v(window.innerWidth<768,t,`/admin/articles/${n.id}/edit`),type:`button`,className:`bg-card p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors cursor-pointer w-full text-left`,children:[(0,W.jsxs)(`div`,{className:`flex items-start justify-between mb-3 gap-3`,children:[(0,W.jsxs)(`div`,{className:`flex items-start gap-3 min-w-0 flex-1`,children:[(0,W.jsx)(`img`,{src:n.image||`https://placehold.co/600x400/1a1a1a/FFF?text=BreachTimes`,alt:``,className:`w-12 h-12 rounded object-cover bg-muted-bg shrink-0`}),(0,W.jsxs)(`div`,{className:`truncate flex-1`,children:[(0,W.jsx)(i,{to:`/admin/articles/${n.id}/edit`,className:`font-bold text-sm block hover:text-bbcRed truncate font-hind`,children:n.title_bn||n.title_en||`(শিরোনাম নেই)`}),n.title_bn&&n.title_en&&(0,W.jsx)(`p`,{className:`text-xs text-muted-text truncate`,children:n.title_en}),(0,W.jsxs)(`div`,{className:`flex gap-2 items-center mt-2 flex-wrap`,children:[(0,W.jsx)(`span`,{className:`px-2 py-1 rounded-full text-xs font-bold border ${a}`,children:n.status}),n.category&&(0,W.jsx)(`span`,{className:`text-xs bg-muted-bg text-card-text px-2 py-1 rounded-full border border-border-color`,children:n.category})]})]})]}),(0,W.jsxs)(`div`,{className:`flex items-center gap-1 shrink-0 ml-2`,children:[(0,W.jsx)(i,{to:`/admin/articles/${n.id}/edit`,className:`p-2 text-card-text hover:bg-muted-bg hover:text-bbcRed rounded transition-colors`,children:(0,W.jsx)(R,{className:`w-4 h-4`})}),(0,W.jsx)(`button`,{type:`button`,onClick:()=>D(n.id),className:`p-2 text-danger hover:bg-danger/10 dark:hover:bg-danger/20 rounded transition-colors`,children:(0,W.jsx)(H,{className:`w-4 h-4`})})]})]}),(0,W.jsxs)(`div`,{className:`text-xs text-muted-text space-y-1`,children:[(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`span`,{className:`font-bold`,children:`প্রকাশিত:`}),` `,o]}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`span`,{className:`font-bold`,children:`তৈরি:`}),` `,s]})]})]},n.id)})})})]})},q=s(),J=e=>{let t=(0,q.c)(56),{isOpen:n,onClose:r,onSave:i,category:a}=e,o;t[0]===a?o=t[1]:(o=()=>a?{...a}:{id:``,title_bn:``,title_en:``,color:`var(--color-bbcRed)`},t[0]=a,t[1]=o);let[s,c]=(0,U.useState)(o),l;if(a){let e;t[2]===a?e=t[3]:(e={...a},t[2]=a,t[3]=e),l=e}else{let e;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(e={id:``,title_bn:``,title_en:``,color:`var(--color-bbcRed)`},t[4]=e):e=t[4],l=e}let u=l,d,f;t[5]===u?(d=t[6],f=t[7]):(d=()=>{c(u)},f=[u],t[5]=u,t[6]=d,t[7]=f),(0,U.useEffect)(d,f);let p;t[8]!==s||t[9]!==i?(p=e=>{e.preventDefault(),i(s)},t[8]=s,t[9]=i,t[10]=p):p=t[10];let m=p;if(!n)return null;let h=a?.id?`বিভাগ সম্পাদনা করুন`:`নতুন বিভাগ`,g;t[11]===h?g=t[12]:(g=(0,W.jsx)(`h2`,{className:`text-xl font-bold mb-4`,children:h}),t[11]=h,t[12]=g);let _;t[13]===Symbol.for(`react.memo_cache_sentinel`)?(_=(0,W.jsx)(`label`,{htmlFor:`category-id`,className:`block text-sm font-bold mb-1`,children:`আইডি (স্লাগ)`}),t[13]=_):_=t[13];let v=s.id||``,y;t[14]===s?y=t[15]:(y=e=>c({...s,id:e.target.value}),t[14]=s,t[15]=y);let b=!!a?.id,x;t[16]!==y||t[17]!==b||t[18]!==v?(x=(0,W.jsxs)(`div`,{children:[_,(0,W.jsx)(`input`,{id:`category-id`,name:`id`,value:v,onChange:y,required:!0,readOnly:b,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none text-sm sm:text-base`})]}),t[16]=y,t[17]=b,t[18]=v,t[19]=x):x=t[19];let S;t[20]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,W.jsx)(`label`,{htmlFor:`category-title-bn`,className:`block text-sm font-bold mb-1`,children:`শিরোনাম (বাংলা)`}),t[20]=S):S=t[20];let C=s.title_bn||``,w;t[21]===s?w=t[22]:(w=e=>c({...s,title_bn:e.target.value}),t[21]=s,t[22]=w);let T;t[23]!==C||t[24]!==w?(T=(0,W.jsxs)(`div`,{children:[S,(0,W.jsx)(`input`,{id:`category-title-bn`,name:`title_bn`,value:C,onChange:w,required:!0,className:`w-full p-2.5 sm:p-3 text-sm sm:text-base rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind`})]}),t[23]=C,t[24]=w,t[25]=T):T=t[25];let E;t[26]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,W.jsx)(`label`,{htmlFor:`category-title-en`,className:`block text-xs sm:text-sm font-bold mb-1`,children:`শিরোনাম (ইংরেজি)`}),t[26]=E):E=t[26];let D=s.title_en||``,O;t[27]===s?O=t[28]:(O=e=>c({...s,title_en:e.target.value}),t[27]=s,t[28]=O);let k;t[29]!==D||t[30]!==O?(k=(0,W.jsxs)(`div`,{children:[E,(0,W.jsx)(`input`,{id:`category-title-en`,name:`title_en`,value:D,onChange:O,required:!0,className:`w-full p-2.5 sm:p-3 text-sm sm:text-base rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind`})]}),t[29]=D,t[30]=O,t[31]=k):k=t[31];let A;t[32]===Symbol.for(`react.memo_cache_sentinel`)?(A=(0,W.jsx)(`label`,{htmlFor:`category-color`,className:`block text-sm font-bold mb-1`,children:`রং`}),t[32]=A):A=t[32];let j=s.color||`var(--color-bbcRed)`,M;t[33]===s?M=t[34]:(M=e=>c({...s,color:e.target.value}),t[33]=s,t[34]=M);let N=s.color||`var(--color-bbcRed)`,P;t[35]===N?P=t[36]:(P={color:N},t[35]=N,t[36]=P);let F;t[37]!==j||t[38]!==M||t[39]!==P?(F=(0,W.jsxs)(`div`,{children:[A,(0,W.jsx)(`input`,{type:`color`,id:`category-color`,name:`color`,value:j,onChange:M,className:`w-full h-10 rounded cursor-pointer`,style:P})]}),t[37]=j,t[38]=M,t[39]=P,t[40]=F):F=t[40];let I;t[41]===r?I=t[42]:(I=(0,W.jsx)(`button`,{type:`button`,onClick:r,className:`px-4 py-2 text-sm font-bold text-muted-text hover:text-card-text hover:bg-muted-bg rounded-lg`,children:`বাতিল`}),t[41]=r,t[42]=I);let L;t[43]===Symbol.for(`react.memo_cache_sentinel`)?(L=(0,W.jsx)(`button`,{type:`submit`,className:`px-4 py-2 bg-bbcRed text-white rounded-lg font-bold text-sm hover:opacity-90 transition-opacity`,children:`সংরক্ষণ`}),t[43]=L):L=t[43];let R;t[44]===I?R=t[45]:(R=(0,W.jsxs)(`div`,{className:`flex justify-end gap-2 mt-6`,children:[I,L]}),t[44]=I,t[45]=R);let z;t[46]!==m||t[47]!==x||t[48]!==T||t[49]!==k||t[50]!==F||t[51]!==R?(z=(0,W.jsxs)(`form`,{onSubmit:m,className:`space-y-4`,children:[x,T,k,F,R]}),t[46]=m,t[47]=x,t[48]=T,t[49]=k,t[50]=F,t[51]=R,t[52]=z):z=t[52];let B;return t[53]!==z||t[54]!==g?(B=(0,W.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[100]`,children:(0,W.jsxs)(`div`,{className:`bg-card w-full max-w-md p-6 rounded-xl shadow-2xl`,children:[g,z]})}),t[53]=z,t[54]=g,t[55]=B):B=t[55],B},Y=()=>{let[e,t]=(0,U.useState)([]),[n,r]=(0,U.useState)(!0),[i,a]=(0,U.useState)(null),[s,c]=(0,U.useState)(!1),[l,u]=(0,U.useState)(null),p=(0,U.useCallback)(async()=>{r(!0);try{let e=await d.getCategories();if(e.success)t(e.data||[]);else throw Error(e.message||`Failed to fetch categories`)}catch{a(`বিভাগগুলি আনতে ব্যর্থ হয়েছে`)}finally{r(!1)}},[]);(0,U.useEffect)(()=>{p()},[p]);let m=(e=null)=>{u(e),c(!0)},h=()=>{c(!1),u(null)},g=async e=>{try{await d.saveCategory(e),h(),p()}catch{}},_=async e=>{if(window.confirm(`আপনি কি নিশ্চিত যে আপনি এই বিভাগটি মুছে ফেলতে চান?`))try{await d.deleteCategory(e),p()}catch{}};return(0,W.jsxs)(`div`,{children:[(0,W.jsx)(J,{isOpen:s,onClose:h,onSave:g,category:l}),(0,W.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,W.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`বিভাগ পরিচালনা করুন`}),(0,W.jsxs)(`button`,{type:`button`,onClick:()=>m(),className:`bg-bbcRed text-white px-3 sm:px-4 py-2 rounded-lg font-bold text-sm sm:text-base flex items-center gap-2 whitespace-nowrap`,children:[(0,W.jsx)(f,{className:`w-4 h-4`}),` নতুন বিভাগ`]})]}),(0,W.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:n?(0,W.jsx)(`div`,{className:`p-8 text-center text-muted-text`,children:`লোড হচ্ছে...`}):i?(0,W.jsx)(`div`,{className:`p-8 text-center text-danger`,children:i}):e.length===0?(0,W.jsxs)(`div`,{className:`p-8 text-center text-muted-text`,children:[(0,W.jsx)(o,{className:`w-16 h-16 mx-auto mb-4 text-border-color`}),(0,W.jsx)(`p`,{className:`text-lg font-bold mb-2`,children:`কোনো বিভাগ পাওয়া যায়নি`})]}):(0,W.jsx)(`div`,{className:`grid grid-cols-1 gap-4 p-4`,children:e.map(e=>(0,W.jsx)(`div`,{className:`bg-card p-3 sm:p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors`,children:(0,W.jsxs)(`div`,{className:`flex items-start justify-between gap-2`,children:[(0,W.jsxs)(`div`,{className:`flex items-center gap-2 sm:gap-3 min-w-0`,children:[(0,W.jsx)(`div`,{className:`font-mono text-xs sm:text-sm font-bold text-card-text flex-shrink-0`,children:e.id}),(0,W.jsxs)(`div`,{className:`truncate`,children:[(0,W.jsx)(`div`,{className:`font-bold text-xs sm:text-sm truncate`,children:e.title_bn}),(0,W.jsx)(`div`,{className:`text-xs truncate`,children:e.title_en})]})]}),(0,W.jsxs)(`div`,{className:`flex items-center gap-2 flex-shrink-0`,children:[(0,W.jsx)(`div`,{className:`w-6 sm:w-8 h-6 sm:h-8 rounded-lg border border-border-color`,style:{backgroundColor:e.color}}),(0,W.jsx)(`div`,{className:`text-xs text-muted-text hidden md:block`,children:e.color})]}),(0,W.jsxs)(`div`,{className:`flex items-center gap-1 flex-shrink-0`,children:[(0,W.jsx)(`button`,{type:`button`,onClick:()=>m(e),className:`p-2 text-card-text hover:bg-muted-bg rounded`,children:(0,W.jsx)(V,{className:`w-4 h-4`})}),(0,W.jsx)(`button`,{type:`button`,onClick:()=>_(e.id),className:`p-2 text-danger hover:bg-danger/10 rounded`,children:(0,W.jsx)(H,{className:`w-4 h-4`})})]})]})},e.id))})})]})},X=()=>{let{commentId:e}=t(),n=e?parseInt(e,10):null,{language:r}=g(),[a,o]=(0,U.useState)(null),[s,c]=(0,U.useState)(!0);return(0,U.useEffect)(()=>{(async()=>{if(!n){c(!1);return}c(!0);try{let e=await d.getAllComments();if(e.success&&e.comments){let t=e.comments.find(e=>e.id===n);t?o(t):m(`Comment not found`,`error`)}}catch{m(y(`server_error`,r),`error`)}finally{c(!1)}})()},[n,r]),s?(0,W.jsx)(`div`,{className:`flex items-center justify-center h-screen`,children:(0,W.jsx)(j,{className:`w-8 h-8 animate-spin text-bbcRed`})}):a?(0,W.jsxs)(`div`,{className:`max-w-2xl mx-auto p-3 sm:p-4 md:p-6`,children:[(0,W.jsxs)(i,{to:`/admin/comments`,className:`flex items-center gap-2 text-bbcRed hover:opacity-80 mb-4 sm:mb-6 text-sm`,children:[(0,W.jsx)(F,{className:`w-4 sm:w-5 h-4 sm:h-5`}),y(`back`,r)]}),(0,W.jsxs)(`div`,{className:`bg-card rounded-xl border border-border-color p-4 sm:p-6 shadow-sm`,children:[(0,W.jsxs)(`div`,{className:`flex items-start gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,W.jsx)(`div`,{className:`w-10 sm:w-12 h-10 sm:h-12 rounded-full bg-gradient-to-br from-bbcRed to-orange-600 flex items-center justify-center text-white text-sm sm:text-lg font-bold flex-shrink-0`,children:a.user_name.charAt(0).toUpperCase()}),(0,W.jsxs)(`div`,{className:`min-w-0`,children:[(0,W.jsx)(`h1`,{className:`text-base sm:text-xl font-bold truncate`,children:a.user_name}),(0,W.jsx)(`p`,{className:`text-muted-text text-xs sm:text-sm`,children:p(a.created_at,r)})]})]}),(0,W.jsxs)(`div`,{className:`space-y-3 sm:space-y-4`,children:[(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`div`,{className:`text-[10px] sm:text-xs font-bold text-muted-text uppercase`,children:y(`article`,r)}),(0,W.jsx)(i,{to:`/admin/articles/${a.article_id}/edit`,className:`text-bbcRed hover:opacity-80 text-xs sm:text-sm mt-1 block truncate`,children:r===`bn`?a.title_bn:a.title_en||`Unknown Article`})]}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`div`,{className:`text-[10px] sm:text-xs font-bold text-muted-text uppercase`,children:y(`comment_text`,r)}),(0,W.jsx)(`div`,{className:`prose prose-sm dark:prose-invert mt-2 text-card-text`,children:(()=>{let e=O.sanitize(a.text),t=document.createElement(`div`);t.innerHTML=e;let n=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,r={};for(let e=0;e<t.attributes.length;e++){let n=t.attributes[e],i=n.name===`class`?`className`:n.name;r[i]=n.value}let i=Array.from(t.childNodes).map(n);return(0,U.createElement)(t.tagName.toLowerCase(),r,...i)}return null};return Array.from(t.childNodes).map((e,t)=>n(e))})()})]}),(0,W.jsxs)(`div`,{className:`text-xs text-muted-text pt-4 border-t border-border-color`,children:[y(`id`,r),`: `,a.id]})]})]})]}):(0,W.jsx)(`div`,{className:`flex items-center justify-center h-screen`,children:(0,W.jsx)(`p`,{className:`text-muted-text`,children:y(`invalid_comment`,r)})})},Z=()=>{let e=w(),{data:t,isLoading:n,refetch:r}=h((0,U.useCallback)(()=>d.getAllComments(),[]),{showErrorToast:!0}),a=t?.comments||[],o=(0,U.useCallback)(async e=>{if(window.confirm(`এই মন্তব্য মুছে ফেলতে চান?`))try{let t=await d.deleteComment(e);t.success?(m(`মন্তব্য মুছে ফেলা হয়েছে!`),r()):m(t.error||`মন্তব্য মোছতে ব্যর্থ!`,`error`)}catch{m(`সার্ভার ত্রুটি!`,`error`)}},[r]);return(0,W.jsx)(T,{isLoading:n,children:(0,W.jsxs)(`div`,{className:`space-y-4 sm:space-y-6`,children:[(0,W.jsx)(`div`,{className:`flex justify-between items-center mb-4 sm:mb-6`,children:(0,W.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`পর্যবেক্ষণ`})}),(0,W.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:(0,W.jsx)(D,{isEmpty:a.length===0,title:`No Comments Found`,description:`There are currently no comments to moderate.`,icon:(0,W.jsx)(S,{className:`w-16 h-16 mx-auto`}),children:(0,W.jsx)(`div`,{className:`grid grid-cols-1 gap-3 sm:gap-4 p-3 sm:p-4`,children:a.map(t=>(0,W.jsxs)(`button`,{onClick:()=>v(window.innerWidth<768,e,`/admin/comments/${t.id}`),type:`button`,className:`bg-card p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors cursor-pointer w-full text-left`,children:[(0,W.jsxs)(`div`,{className:`flex items-start justify-between mb-3`,children:[(0,W.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0`,children:[(0,W.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-gradient-to-br from-bbcRed to-orange-600 flex items-center justify-center text-white text-sm font-bold`,children:t.user_name.charAt(0).toUpperCase()}),(0,W.jsxs)(`div`,{className:`truncate`,children:[(0,W.jsx)(`div`,{className:`font-bold text-sm truncate`,children:t.user_name}),(0,W.jsx)(`div`,{className:`text-xs text-muted-text truncate`,children:t.title_bn||`অজানা নিবন্ধ`})]})]}),(0,W.jsxs)(`div`,{className:`flex items-center gap-1 shrink-0 ml-2`,children:[(0,W.jsx)(`div`,{className:`text-xs text-muted-text hidden sm:block whitespace-nowrap`,children:p(t.created_at,`bn`)}),(0,W.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,W.jsx)(i,{to:`/article/${t.article_id}`,target:`_blank`,title:`View Article`,className:`text-muted-text hover:text-bbcRed hover:bg-bbcRed/10 p-2 rounded transition-colors`,children:(0,W.jsx)(I,{className:`w-4 h-4`})}),(0,W.jsx)(`button`,{type:`button`,onClick:()=>o(t.id),className:`text-danger hover:text-danger/80 hover:bg-danger/10 dark:hover:bg-danger/20 p-2 rounded transition-colors`,title:`Delete`,children:(0,W.jsx)(H,{className:`w-4 h-4`})})]})]})]}),(0,W.jsx)(`div`,{className:`text-sm text-card-text max-h-16 overflow-hidden prose prose-sm dark:prose-invert`,children:(()=>{let e=O.sanitize(t.text),n=document.createElement(`div`);n.innerHTML=e;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,U.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))})()}),(0,W.jsx)(`div`,{className:`text-xs text-muted-text mt-2 sm:hidden`,children:p(t.created_at,`bn`)})]},t.id))})})})]})})},ee=s(),Q=e=>{let t=(0,ee.c)(61),{isOpen:n,onClose:r,onSave:i,section:a}=e,o;t[0]===a?o=t[1]:(o=()=>a?{...a}:{id:``,title_bn:``,title_en:``,type:`grid`,sort_order:0},t[0]=a,t[1]=o);let[s,c]=(0,U.useState)(o),l;if(a){let e;t[2]===a?e=t[3]:(e={...a},t[2]=a,t[3]=e),l=e}else{let e;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(e={id:``,title_bn:``,title_en:``,type:`grid`,sort_order:0},t[4]=e):e=t[4],l=e}let u=l,d,f;t[5]===u?(d=t[6],f=t[7]):(d=()=>{c(u)},f=[u],t[5]=u,t[6]=d,t[7]=f),(0,U.useEffect)(d,f);let p;t[8]!==s||t[9]!==i?(p=e=>{e.preventDefault(),i(s)},t[8]=s,t[9]=i,t[10]=p):p=t[10];let m=p;if(!n)return null;let h=a?.id?`বিভাগ সম্পাদনা করুন`:`নতুন বিভাগ`,g;t[11]===h?g=t[12]:(g=(0,W.jsx)(`h2`,{className:`text-xl font-bold mb-4`,children:h}),t[11]=h,t[12]=g);let _;t[13]===Symbol.for(`react.memo_cache_sentinel`)?(_=(0,W.jsx)(`label`,{htmlFor:`section-id`,className:`block text-sm font-bold mb-1`,children:`আইডি (স্লাগ)`}),t[13]=_):_=t[13];let v=s.id||``,y;t[14]===s?y=t[15]:(y=e=>c({...s,id:e.target.value}),t[14]=s,t[15]=y);let b=!!a?.id,x;t[16]!==y||t[17]!==b||t[18]!==v?(x=(0,W.jsxs)(`div`,{children:[_,(0,W.jsx)(`input`,{id:`section-id`,name:`id`,value:v,onChange:y,required:!0,readOnly:b,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none text-sm sm:text-base`})]}),t[16]=y,t[17]=b,t[18]=v,t[19]=x):x=t[19];let S;t[20]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,W.jsx)(`label`,{htmlFor:`section-title-bn`,className:`block text-sm font-bold mb-1`,children:`শিরোনাম (বাংলা)`}),t[20]=S):S=t[20];let C=s.title_bn||``,w;t[21]===s?w=t[22]:(w=e=>c({...s,title_bn:e.target.value}),t[21]=s,t[22]=w);let T;t[23]!==C||t[24]!==w?(T=(0,W.jsxs)(`div`,{children:[S,(0,W.jsx)(`input`,{id:`section-title-bn`,name:`title_bn`,value:C,onChange:w,required:!0,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`})]}),t[23]=C,t[24]=w,t[25]=T):T=t[25];let D;t[26]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,W.jsx)(`label`,{htmlFor:`section-title-en`,className:`block text-sm font-bold mb-1`,children:`শিরোনাম (ইংরেজি)`}),t[26]=D):D=t[26];let O=s.title_en||``,k;t[27]===s?k=t[28]:(k=e=>c({...s,title_en:e.target.value}),t[27]=s,t[28]=k);let A;t[29]!==O||t[30]!==k?(A=(0,W.jsxs)(`div`,{children:[D,(0,W.jsx)(`input`,{id:`section-title-en`,name:`title_en`,value:O,onChange:k,required:!0,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`})]}),t[29]=O,t[30]=k,t[31]=A):A=t[31];let j;t[32]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,W.jsx)(`label`,{htmlFor:`section-type`,className:`block text-sm font-bold mb-1`,children:`ধরন`}),t[32]=j):j=t[32];let M=s.type||`grid`,N;t[33]===s?N=t[34]:(N=e=>c({...s,type:e}),t[33]=s,t[34]=N);let P;t[35]===Symbol.for(`react.memo_cache_sentinel`)?(P=[{value:`hero`,label:`হিরো`},{value:`grid`,label:`গ্রিড`},{value:`list`,label:`তালিকা`},{value:`carousel`,label:`ক্যারোজেল`},{value:`highlight`,label:`হাইলাইট`}],t[35]=P):P=t[35];let F;t[36]!==M||t[37]!==N?(F=(0,W.jsxs)(`div`,{children:[j,(0,W.jsx)(E,{id:`section-type`,value:M,onChange:N,options:P})]}),t[36]=M,t[37]=N,t[38]=F):F=t[38];let I;t[39]===Symbol.for(`react.memo_cache_sentinel`)?(I=(0,W.jsx)(`label`,{htmlFor:`section-sort-order`,className:`block text-sm font-bold mb-1`,children:`সাজানোর ক্রম`}),t[39]=I):I=t[39];let L=s.sort_order||0,R;t[40]===s?R=t[41]:(R=e=>c({...s,sort_order:parseInt(e.target.value,10)}),t[40]=s,t[41]=R);let z;t[42]!==L||t[43]!==R?(z=(0,W.jsxs)(`div`,{children:[I,(0,W.jsx)(`input`,{id:`section-sort-order`,type:`number`,name:`sort_order`,value:L,onChange:R,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none text-sm sm:text-base`})]}),t[42]=L,t[43]=R,t[44]=z):z=t[44];let B;t[45]===r?B=t[46]:(B=(0,W.jsx)(`button`,{type:`button`,onClick:r,className:`px-4 py-2 text-sm font-bold text-muted-text hover:text-card-text hover:bg-muted-bg rounded-lg`,children:`বাতিল`}),t[45]=r,t[46]=B);let V;t[47]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,W.jsx)(`button`,{type:`submit`,className:`px-4 py-2 bg-bbcRed text-white rounded-lg font-bold text-sm hover:opacity-90 transition-opacity`,children:`সংরক্ষণ`}),t[47]=V):V=t[47];let H;t[48]===B?H=t[49]:(H=(0,W.jsxs)(`div`,{className:`flex justify-end gap-2 mt-6`,children:[B,V]}),t[48]=B,t[49]=H);let G;t[50]!==m||t[51]!==x||t[52]!==T||t[53]!==A||t[54]!==F||t[55]!==z||t[56]!==H?(G=(0,W.jsxs)(`form`,{onSubmit:m,className:`space-y-4`,children:[x,T,A,F,z,H]}),t[50]=m,t[51]=x,t[52]=T,t[53]=A,t[54]=F,t[55]=z,t[56]=H,t[57]=G):G=t[57];let K;return t[58]!==G||t[59]!==g?(K=(0,W.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[100]`,children:(0,W.jsxs)(`div`,{className:`bg-card w-full max-w-md p-6 rounded-xl shadow-2xl`,children:[g,G]})}),t[58]=G,t[59]=g,t[60]=K):K=t[60],K},$=()=>{let[e,t]=(0,U.useState)([]),[r,i]=(0,U.useState)(!0),[a,o]=(0,U.useState)(null),[s,c]=(0,U.useState)(!1),[l,u]=(0,U.useState)(null),p=(0,U.useCallback)(async()=>{i(!0);try{let e=await d.getSections();if(e.success&&e.data){let n=e.data;t(n.sort((e,t)=>(e.sort_order||0)-(t.sort_order||0)))}else throw Error(e.message||`Failed to fetch sections`)}catch{o(`বিভাগগুলি আনতে ব্যর্থ হয়েছে`)}finally{i(!1)}},[]);(0,U.useEffect)(()=>{p()},[p]);let m=(e=null)=>{u(e),c(!0)},h=()=>{c(!1),u(null)},g=async e=>{try{await d.saveSection(e),h(),p()}catch{}},_=async e=>{if(window.confirm(`আপনি কি নিশ্চিত যে আপনি এই বিভাগটি মুছে ফেলতে চান?`))try{await d.deleteSection(e),p()}catch{}};return(0,W.jsxs)(`div`,{children:[(0,W.jsx)(Q,{isOpen:s,onClose:h,onSave:g,section:l}),(0,W.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,W.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`বিভাগ পরিচালনা করুন`}),(0,W.jsxs)(`button`,{type:`button`,onClick:()=>m(),className:`bg-bbcRed text-white px-3 sm:px-4 py-2 rounded-lg font-bold text-sm sm:text-base flex items-center gap-2 whitespace-nowrap`,children:[(0,W.jsx)(f,{className:`w-4 h-4`}),` নতুন বিভাগ`]})]}),(0,W.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:r?(0,W.jsx)(`div`,{className:`p-8 text-center text-muted-text`,children:`লোড হচ্ছে...`}):a?(0,W.jsx)(`div`,{className:`p-8 text-center text-danger`,children:a}):e.length===0?(0,W.jsxs)(`div`,{className:`p-8 text-center text-muted-text`,children:[(0,W.jsx)(n,{className:`w-16 h-16 mx-auto mb-4 text-border-color`}),(0,W.jsx)(`p`,{className:`text-lg font-bold mb-2`,children:`কোনো বিভাগ পাওয়া যায়নি`})]}):(0,W.jsx)(`div`,{className:`grid grid-cols-1 gap-4 p-4`,children:e.map(e=>(0,W.jsx)(`div`,{className:`bg-card p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors`,children:(0,W.jsxs)(`div`,{className:`flex items-start justify-between`,children:[(0,W.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0`,children:[(0,W.jsx)(`div`,{className:`w-10 h-10 rounded-lg bg-muted-bg flex items-center justify-center text-card-text text-sm font-bold border border-border-color`,children:e.sort_order}),(0,W.jsxs)(`div`,{className:`truncate`,children:[(0,W.jsx)(`div`,{className:`font-bold text-sm truncate`,children:e.title_bn}),(0,W.jsx)(`div`,{className:`text-xs text-muted-text truncate`,children:e.title_en}),(0,W.jsx)(`div`,{className:`mt-1`,children:(0,W.jsx)(`span`,{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full bg-muted-bg text-card-text text-xs font-bold`,children:e.type})})]})]}),(0,W.jsx)(`div`,{className:`text-xs font-mono text-muted-text`,children:e.id}),(0,W.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,W.jsx)(`button`,{type:`button`,onClick:()=>m(e),className:`p-2 text-card-text hover:bg-muted-bg rounded`,children:(0,W.jsx)(V,{className:`w-4 h-4`})}),(0,W.jsx)(`button`,{type:`button`,onClick:()=>_(e.id),className:`p-2 text-danger hover:bg-danger/10 rounded`,children:(0,W.jsx)(H,{className:`w-4 h-4`})})]})]})},e.id))})})]})},te=()=>{let{submissionId:e}=t(),n=e?parseInt(e,10):null,{language:r}=g(),[a,o]=(0,U.useState)(null),[s,c]=(0,U.useState)(!0);return(0,U.useEffect)(()=>{(async()=>{if(!n){c(!1);return}c(!0);try{let e=await d.getSubmissions();if(e.success&&e.submissions){let t=e.submissions.find(e=>e.id===n);t?o(t):m(`Submission not found`,`error`)}}catch{m(y(`server_error`,r),`error`)}finally{c(!1)}})()},[n,r]),s?(0,W.jsx)(`div`,{className:`flex items-center justify-center h-screen`,children:(0,W.jsx)(j,{className:`w-8 h-8 animate-spin text-bbcRed`})}):a?(0,W.jsxs)(`div`,{className:`max-w-2xl mx-auto p-3 sm:p-4 md:p-6`,children:[(0,W.jsxs)(i,{to:`/admin/submissions`,className:`flex items-center gap-2 text-bbcRed hover:opacity-80 mb-4 sm:mb-6 text-sm`,children:[(0,W.jsx)(F,{className:`w-4 sm:w-5 h-4 sm:h-5`}),y(`back`,r)]}),(0,W.jsxs)(`div`,{className:`bg-card rounded-xl border border-border-color p-4 sm:p-6 shadow-sm space-y-3 sm:space-y-4`,children:[(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`div`,{className:`text-[10px] sm:text-xs font-bold text-muted-text uppercase`,children:y(`article`,r)}),(0,W.jsx)(i,{to:`/admin/articles/${a.article_id}/edit`,className:`text-bbcRed hover:opacity-80 text-xs sm:text-sm mt-1 block font-bold truncate`,children:a.title_en||a.title_bn||`Unknown Article`})]}),a.message&&(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`div`,{className:`text-xs font-bold text-muted-text uppercase`,children:y(`message`,r)}),(0,W.jsx)(`p`,{className:`text-sm text-card-text mt-1`,children:a.message})]}),a.file_path&&(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`div`,{className:`text-xs font-bold text-muted-text uppercase`,children:y(`file`,r)}),(0,W.jsx)(`a`,{href:a.file_path,target:`_blank`,rel:`noopener noreferrer`,className:`text-bbcRed hover:opacity-80 text-sm mt-1 block break-all`,children:a.file_path})]}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`div`,{className:`text-xs font-bold text-muted-text uppercase`,children:y(`submitted`,r)}),(0,W.jsx)(`p`,{className:`text-sm text-card-text mt-1`,children:p(a.created_at,r)})]}),(0,W.jsxs)(`div`,{className:`text-xs text-muted-text pt-4 border-t border-border-color`,children:[y(`id`,r),`: `,a.id]})]})]}):(0,W.jsx)(`div`,{className:`flex items-center justify-center h-screen`,children:(0,W.jsx)(`p`,{className:`text-muted-text`,children:y(`invalid_submission`,r)})})},ne=()=>{let e=w(),[t,n]=(0,U.useState)([]),[a,o]=(0,U.useState)(!0),s=(0,U.useCallback)(async()=>{o(!0);try{let e=await d.getSubmissions();e.success&&e.submissions?n(e.submissions):m(e.error||`Failed to fetch submissions`,`error`)}catch{m(`সার্ভার ত্রুটি!`,`error`)}finally{o(!1)}},[]);(0,U.useEffect)(()=>{s()},[s]);let c=async e=>{try{m(`জমা মুছে ফেলার বৈশিষ্ট্য এখনও বাস্তবায়িত হয়নি`,`error`)}catch{m(`জমা মুছে ফেলতে ব্যর্থ হয়েছে`,`error`)}};return a?(0,W.jsx)(`div`,{className:`text-center py-8`,children:(0,W.jsx)(j,{className:`w-10 h-10 animate-spin text-bbcRed`})}):(0,W.jsxs)(`div`,{className:`space-y-4 sm:space-y-6`,children:[(0,W.jsx)(`div`,{className:`mb-4 sm:mb-6`,children:(0,W.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`ব্যবহারকারী জমা দেওয়া তথ্য`})}),(0,W.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:t.length===0?(0,W.jsxs)(`div`,{className:`p-6 sm:p-8 text-center text-muted-text`,children:[(0,W.jsx)(L,{className:`w-16 h-16 mx-auto mb-4 text-border-color`}),(0,W.jsx)(`p`,{className:`text-base sm:text-lg font-bold mb-2`,children:`কোনো জমা পাওয়া যায়নি`})]}):(0,W.jsx)(`div`,{className:`grid grid-cols-1 gap-3 sm:gap-4 p-3 sm:p-4`,children:t.map(t=>(0,W.jsxs)(`button`,{onClick:()=>v(window.innerWidth<768,e,`/admin/submissions/${t.id}`),type:`button`,className:`bg-card p-3 sm:p-4 rounded-lg border border-border-color group cursor-pointer hover:bg-muted-bg transition-colors w-full text-left`,children:[(0,W.jsxs)(`div`,{className:`flex items-start justify-between mb-3`,children:[(0,W.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0`,children:[(0,W.jsx)(`div`,{className:`w-10 h-10 rounded-lg bg-muted-bg flex items-center justify-center shrink-0 border border-border-color font-bold text-card-text text-xs`,children:t.file_path?`SUB`:`MSG`}),(0,W.jsxs)(`div`,{className:`truncate`,children:[(0,W.jsx)(i,{to:`/admin/articles/${t.article_id}/edit`,className:`font-bold text-sm truncate block hover:text-bbcRed`,children:t.title_en||t.title_bn||`Unknown Article`}),(0,W.jsx)(`p`,{className:`text-xs text-muted-text truncate`,children:t.article_id})]})]}),(0,W.jsxs)(`div`,{className:`flex items-center gap-1 shrink-0 ml-2`,children:[t.file_path&&(0,W.jsx)(`a`,{href:t.file_path,target:`_blank`,rel:`noopener noreferrer`,className:`p-2 hover:bg-muted-bg rounded-lg`,children:(0,W.jsx)(r,{className:`w-4 h-4`})}),(0,W.jsx)(`button`,{type:`button`,onClick:()=>{window.confirm(`আপনি কি নিশ্চিত যে আপনি এই জমা মুছে ফেলতে চান?`)&&c(t.id)},className:`p-2 hover:bg-danger/10 text-danger rounded-lg`,children:(0,W.jsx)(H,{className:`w-4 h-4`})})]})]}),(0,W.jsx)(`div`,{className:`text-sm text-card-text max-h-12 overflow-hidden`,children:t.message||`-`}),(0,W.jsx)(`div`,{className:`text-xs text-muted-text mt-2`,children:p(t.created_at,`bn`)})]},t.id))})})]})},re=()=>{let{userId:e}=t(),n=e?parseInt(e,10):null,{language:r}=g(),[a,o]=(0,U.useState)(null),[s,c]=(0,U.useState)(!0);if((0,U.useEffect)(()=>{(async()=>{if(!n){c(!1);return}c(!0);try{let e=await d.getUsers();if(e.success&&e.users){let t=e.users.find(e=>e.id===n);t?o(t):m(y(`user_not_found`,r),`error`)}}catch{m(y(`server_error`,r),`error`)}finally{c(!1)}})()},[n,r]),s)return(0,W.jsx)(`div`,{className:`flex items-center justify-center h-screen`,children:(0,W.jsx)(j,{className:`w-8 h-8 animate-spin text-bbcRed`})});if(!a)return(0,W.jsx)(`div`,{className:`flex items-center justify-center h-screen`,children:(0,W.jsx)(`p`,{className:`text-muted-text`,children:y(`invalid_user`,r)})});let l=!!a.is_muted;return(0,W.jsxs)(`div`,{className:`max-w-2xl mx-auto p-3 sm:p-4 md:p-6`,children:[(0,W.jsxs)(i,{to:`/admin/users`,className:`flex items-center gap-2 text-bbcRed hover:opacity-80 mb-4 sm:mb-6 text-sm`,children:[(0,W.jsx)(F,{className:`w-4 sm:w-5 h-4 sm:h-5`}),y(`back`,r)]}),(0,W.jsxs)(`div`,{className:`bg-card rounded-xl border border-border-color p-4 sm:p-6 shadow-sm`,children:[(0,W.jsxs)(`div`,{className:`flex items-start gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,W.jsx)(`div`,{className:`w-12 sm:w-16 h-12 sm:h-16 rounded-full bg-gradient-to-br from-bbcRed to-orange-600 flex items-center justify-center text-white text-base sm:text-2xl font-bold flex-shrink-0`,children:a.email.charAt(0).toUpperCase()}),(0,W.jsxs)(`div`,{className:`min-w-0`,children:[(0,W.jsx)(`h1`,{className:`text-lg sm:text-2xl font-bold truncate`,children:a.email}),(0,W.jsxs)(`p`,{className:`text-muted-text text-xs sm:text-sm`,children:[`ID: `,a.id]})]})]}),(0,W.jsxs)(`div`,{className:`space-y-3 sm:space-y-4`,children:[(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`div`,{className:`text-[10px] sm:text-xs font-bold text-muted-text uppercase`,children:y(`role`,r)}),(0,W.jsx)(`div`,{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-bold mt-1 ${a.role===`admin`?`bg-danger/10 dark:bg-danger/20 text-danger`:`bg-muted-bg text-card-text`}`,children:a.role})]}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`div`,{className:`text-xs font-bold text-muted-text uppercase`,children:y(`status`,r)}),(0,W.jsx)(`div`,{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-bold mt-1 ${l?`bg-danger/10 dark:bg-danger/20 text-danger`:`bg-success/10 dark:bg-success/20 text-success`}`,children:y(l?`muted`:`active`,r)})]}),l&&a.reason&&(0,W.jsxs)(`div`,{className:`bg-danger/5 dark:bg-danger/10 p-3 rounded-lg`,children:[(0,W.jsx)(`div`,{className:`text-xs font-bold text-danger block mb-1`,children:y(`mute_reason`,r)}),(0,W.jsx)(`p`,{className:`text-sm text-card-text`,children:a.reason})]}),(0,W.jsxs)(`div`,{children:[(0,W.jsx)(`div`,{className:`text-xs font-bold text-muted-text uppercase`,children:y(`created`,r)}),(0,W.jsx)(`p`,{className:`text-sm text-card-text mt-1`,children:new Date(a.created_at).toLocaleString()})]})]})]})]})},ie=()=>{let e=w(),[t,n]=(0,U.useState)([]),[r,i]=(0,U.useState)(!0),[a,o]=(0,U.useState)(!1),[s,c]=(0,U.useState)(null),l=(0,U.useCallback)(async()=>{i(!0);try{let e=await d.getUsers();e.success&&e.users?n(e.users):m(e.error||`Failed to fetch users`,`error`)}catch{m(`সার্ভার ত্রুটি!`,`error`)}finally{i(!1)}},[]);(0,U.useEffect)(()=>{l()},[l]);let u=e=>{c(e||null),o(!0)},p=()=>{o(!1),c(null)},h=async(e,t)=>{if(window.confirm(`আপনি কি নিশ্চিত যে আপনি ${t} ব্যবহারকারীকে ডিলিট করতে চান?`))try{let t=await d.deleteUser(e);t.success?(m(`ব্যবহারকারী সফলভাবে ডিলিট হয়েছে`),l()):m(t.error||`ব্যবহারকারী ডিলিট করতে ব্যর্থ`,`error`)}catch{m(`সার্ভার ত্রুটি!`,`error`)}};return r?(0,W.jsx)(`div`,{className:`text-center py-8`,children:(0,W.jsx)(j,{className:`w-10 h-10 animate-spin text-bbcRed`})}):(0,W.jsxs)(`div`,{className:`space-y-4 sm:space-y-6`,children:[(0,W.jsxs)(`div`,{className:`flex items-center justify-between gap-3`,children:[(0,W.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`ব্যবহারকারী`}),(0,W.jsxs)(`button`,{type:`button`,onClick:()=>u(),className:`flex items-center gap-2 px-4 py-2 bg-bbcRed text-white rounded-lg font-bold hover:bg-bbcRed/90 transition-colors`,children:[(0,W.jsx)(f,{className:`w-4 h-4`}),` নতুন ব্যবহারকারী`]})]}),(0,W.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:t.length===0?(0,W.jsx)(`div`,{className:`p-6 sm:p-8 text-center text-muted-text text-sm`,children:`কোনো ব্যবহারকারী পাওয়া যায়নি।`}):(0,W.jsx)(`div`,{className:`grid grid-cols-1 gap-3 sm:gap-4 p-3 sm:p-4`,children:t.map(t=>(0,W.jsx)(`button`,{onClick:()=>v(window.innerWidth<768,e,`/admin/users/${t.id}`),type:`button`,className:`bg-card p-3 sm:p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors cursor-pointer w-full text-left`,children:(0,W.jsxs)(`div`,{className:`flex items-start justify-between gap-2`,children:[(0,W.jsxs)(`div`,{className:`flex items-center gap-2 sm:gap-3 min-w-0`,children:[(0,W.jsx)(`div`,{className:`w-10 sm:w-12 h-10 sm:h-12 rounded-full bg-gradient-to-br from-bbcRed to-orange-600 flex items-center justify-center text-white text-xs sm:text-sm font-bold flex-shrink-0`,children:t.email.charAt(0).toUpperCase()}),(0,W.jsxs)(`div`,{className:`truncate`,children:[(0,W.jsx)(`div`,{className:`font-bold text-xs sm:text-sm truncate`,children:t.email}),(0,W.jsxs)(`div`,{className:`text-[10px] sm:text-xs text-muted-text truncate`,children:[`ID: `,t.id]}),(0,W.jsx)(`div`,{className:`mt-1 text-[10px] sm:text-xs font-bold`,children:(0,W.jsxs)(`span`,{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-success/10 dark:bg-success/20 text-success whitespace-nowrap`,children:[(0,W.jsx)(_,{className:`w-3 h-3`}),` সক্রিয়`]})})]})]}),(0,W.jsxs)(`div`,{className:`flex items-center gap-1 flex-shrink-0`,children:[(0,W.jsx)(`div`,{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${t.role===`admin`?`bg-danger/10 dark:bg-danger/20 text-danger`:`bg-muted-bg text-card-text`}`,children:t.role}),(0,W.jsx)(`div`,{className:`text-xs text-muted-text hidden sm:block`,children:new Date(t.created_at).toLocaleDateString()}),(0,W.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,W.jsx)(`button`,{type:`button`,onClick:e=>{e.stopPropagation(),u(t)},className:`text-muted-text hover:text-card-text hover:bg-muted-bg p-2 rounded transition-colors`,title:`সম্পাদনা`,children:(0,W.jsx)(V,{className:`w-4 h-4`})}),(0,W.jsx)(`button`,{type:`button`,onClick:e=>{e.stopPropagation(),h(t.id,t.email)},className:`text-danger hover:text-danger/80 hover:bg-danger/10 dark:hover:bg-danger/20 p-2 rounded transition-colors`,title:`ডিলিট`,children:(0,W.jsx)(H,{className:`w-4 h-4`})})]})]})]})},t.id))})}),(0,W.jsx)(P,{isOpen:a,user:s,onClose:p,onSuccess:l})]})};export{$ as a,Y as c,H as d,te as i,K as l,re as n,Z as o,ne as r,X as s,ie as t,G as u};