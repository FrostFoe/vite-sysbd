import{a as e,r as t,v as n}from"./vendor-react-DDJd_2jx.js";import{C as r,J as i,Q as a,et as o}from"./vendor-ui-dKvDeG77.js";import"./vendor-utils-DddD4xHt.js";import{_ as s,f as c,g as l,l as u,r as d,u as f}from"./index-Dl8FHqTb.js";var p=n(),m=t(),h=()=>{let{language:t,currentCategory:n}=s(),[f,h]=(0,p.useState)(null),[g,_]=(0,p.useState)(!0),[v,y]=(0,p.useState)([]);(0,p.useEffect)(()=>{try{let e=localStorage.getItem(`breachtimes-bookmarks`);e&&y(JSON.parse(e))}catch{}},[]);let b=(0,p.useCallback)(e=>{y(t=>{let n=t.indexOf(e),r;return r=n>-1?t.filter(t=>t!==e):[...t,e],localStorage.setItem(`breachtimes-bookmarks`,JSON.stringify(r)),r})},[]);(0,p.useEffect)(()=>{(async()=>{_(!0);try{h(await d.getHomeData(t,n===`saved`?void 0:n))}catch{}finally{_(!1)}})()},[t,n]);let x=(n,r)=>{let a=r?`text-white`:`text-card-text`,o=r?`text-white/60`:`text-muted-text`,s=c(n.published_at,t);return(0,m.jsxs)(e,{to:`/article/${n.id}`,onClick:()=>window.scrollTo({top:0,behavior:`smooth`}),className:`group flex gap-4 p-4 rounded-xl hover:bg-muted-bg transition-colors duration-200 border border-transparent hover:border-border-color`,children:[(0,m.jsx)(`div`,{className:`flex-shrink-0 w-12 h-12 rounded-lg overflow-hidden`,children:(0,m.jsx)(`img`,{src:n.image||`https://placehold.co/600x400/1a1a1a/FFF?text=BreachTimes`,alt:n.title,className:`w-full h-full object-cover group-hover:scale-105 transition-transform duration-300`})}),(0,m.jsxs)(`div`,{className:`flex-1 flex flex-col justify-between min-w-0`,children:[(0,m.jsxs)(`div`,{children:[(0,m.jsx)(`h3`,{className:`font-semibold text-sm leading-tight group-hover:text-bbcRed transition-colors line-clamp-2 ${a}`,children:n.title}),(0,m.jsx)(`p`,{className:`text-xs mt-1 line-clamp-2 ${o}`,children:n.summary})]}),(0,m.jsxs)(`div`,{className:`flex items-center gap-2 text-xs ${o}`,children:[(0,m.jsx)(i,{className:`w-3 h-3`}),(0,m.jsx)(`span`,{children:s})]})]})]},n.id)},S=n=>{let r=n.style===`dark`,i=r?`text-white`:`text-card-text`,o=r?`white`:n.highlightColor||`var(--text-page)`,s=null;if(n.type===`hero-grid`){let e=n.articles[0],t=n.articles.slice(1);s=(0,m.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8`,children:[e&&(0,m.jsx)(`div`,{className:`lg:col-span-2`,children:(0,m.jsx)(u,{article:e,type:`hero-grid`,isSectionDark:r,onBookmarkToggle:b,isBookmarked:v.includes(e.id)})}),t.length>0&&(0,m.jsx)(`div`,{className:`lg:col-span-1`,children:(0,m.jsxs)(`div`,{className:`${r?`bg-card-elevated`:`bg-card`} p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color h-full`,children:[(0,m.jsxs)(`h3`,{className:`font-bold text-base sm:text-lg mb-3 sm:mb-4 flex items-center gap-2 ${i}`,children:[(0,m.jsx)(`span`,{className:`w-1 h-6 rounded-full`,style:{backgroundColor:o}}),`আরও খবর`]}),(0,m.jsx)(`div`,{className:`space-y-2`,children:t.slice(0,5).map(e=>x(e,r))})]})})]})}else s=n.type===`list`?(0,m.jsx)(`div`,{className:`space-y-2`,children:n.articles.map(e=>x(e,r))}):(0,m.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6`,children:n.articles.map(e=>(0,m.jsx)(u,{article:e,type:`grid`,isSectionDark:r,onBookmarkToggle:b,isBookmarked:v.includes(e.id)},e.id))});return(0,m.jsxs)(`section`,{className:`animate-fade-in-up relative z-10 ${n.style===`dark`?`bg-card-elevated text-white p-4 sm:p-6 md:p-8 lg:p-10 rounded-3xl mb-8 sm:mb-10 lg:mb-12 shadow-2xl relative overflow-hidden`:`mb-8 sm:mb-10 lg:mb-12`}`,children:[(0,m.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 sm:mb-8 gap-2`,children:[(0,m.jsxs)(`h2`,{className:`text-xl sm:text-2xl font-bold flex items-center gap-3 ${i}`,children:[(0,m.jsx)(`span`,{className:`w-2 h-8 rounded-full`,style:{backgroundColor:o}}),n.title]}),n.type!==`hero-grid`&&(0,m.jsxs)(e,{to:`/?category=${n.associatedCategory}`,className:`text-xs sm:text-sm font-bold hover:text-bbcRed transition-colors flex items-center gap-1 opacity-80 hover:opacity-100 ${i}`,children:[l(`all`,t),` `,(0,m.jsx)(a,{className:`w-4 h-4`})]})]}),s,n.style===`dark`&&(0,m.jsx)(`div`,{className:`absolute -right-20 -bottom-20 w-64 h-64 bg-white/5 rounded-full blur-3xl pointer-events-none`})]})};return(0,m.jsx)(m.Fragment,{children:(()=>{if(g)return(0,m.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 lg:gap-8 mb-6 sm:mb-8 animate-pulse`,children:[(0,m.jsxs)(`div`,{className:`col-span-1 md:col-span-2 lg:col-span-2`,children:[(0,m.jsx)(`div`,{className:`bg-muted-bg w-full aspect-video mb-4 sm:mb-5 rounded-xl`}),(0,m.jsx)(`div`,{className:`bg-muted-bg w-3/4 h-8 mb-3 rounded`}),(0,m.jsx)(`div`,{className:`bg-muted-bg w-full h-4 mb-2 rounded`}),(0,m.jsx)(`div`,{className:`bg-muted-bg w-2/3 h-4 rounded`})]}),(0,m.jsx)(`div`,{className:`col-span-1 md:col-span-2 lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-8`,children:[1,2,3,4].map(e=>(0,m.jsxs)(`div`,{children:[(0,m.jsx)(`div`,{className:`bg-muted-bg w-full aspect-video mb-3 rounded-lg`}),(0,m.jsx)(`div`,{className:`bg-muted-bg w-full h-5 rounded`})]},e))})]});if(!f||!f.sections||f.sections.length===0)return(0,m.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-32 text-center animate-fade-in`,children:[(0,m.jsx)(`div`,{className:`bg-muted-bg p-6 rounded-full mb-4`,children:(0,m.jsx)(r,{className:`w-12 h-12 text-muted-text`})}),(0,m.jsx)(`h3`,{className:`text-2xl font-bold mb-2 text-card-text`,children:l(`no_news_in_this_category`,t)})]});let e=f.sections;if(n===`saved`){let n=(f.sections?.flatMap(e=>e.articles)||[]).filter(e=>v.includes(e.id));if(n.length===0)return(0,m.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-32 text-center animate-fade-in`,children:[(0,m.jsx)(`div`,{className:`bg-muted-bg p-6 rounded-full mb-4`,children:(0,m.jsx)(o,{className:`w-12 h-12 text-muted-text`})}),(0,m.jsx)(`h3`,{className:`text-2xl font-bold mb-2 text-card-text`,children:l(`no_saved_articles`,t)}),(0,m.jsx)(`p`,{className:`text-muted-text`,children:l(`bookmark_your_favorites`,t)})]});e=[{id:`saved`,title:l(`saved`,t),type:`grid`,highlightColor:`var(--color-bbcRed)`,associatedCategory:null,style:null,articles:n}]}if(n===`home`||n===null){let e=f?.sections?.find(e=>e.id===`hero-stories`);if(e){let t=e.articles[0],n=e.articles.slice(1,6),r=new Set([t?.id,...n.map(e=>e.id)].filter(Boolean)),i=(f?.sections?.flatMap(e=>e.articles)||[]).filter(e=>!r.has(e.id));return(0,m.jsxs)(m.Fragment,{children:[S({...e,type:`hero-grid`,articles:e.articles}),i.length>0&&(0,m.jsx)(`section`,{className:`animate-fade-in-up relative z-10 mb-12`,children:(0,m.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6`,children:i.map(e=>(0,m.jsx)(u,{article:e,type:`grid`,onBookmarkToggle:b,isBookmarked:v.includes(e.id)},e.id))})})]})}}return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(`section`,{className:`animate-fade-in-up relative z-10 mb-12`,children:(0,m.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6`,children:e.flatMap(e=>e.articles).map(e=>(0,m.jsx)(u,{article:e,type:`grid`,onBookmarkToggle:b,isBookmarked:v.includes(e.id)},e.id))})})})})()})};export{h as default};