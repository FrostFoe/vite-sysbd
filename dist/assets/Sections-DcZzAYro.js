import{r as e}from"./rolldown-runtime-Ckerh37x.js";import{h as t,p as n,t as r}from"./vendor-react-BM5KEv9z.js";import{F as i,m as a,u as o,y as s}from"./vendor-ui-C5Vdypzg.js";import{c,o as l}from"./index-C946C_fX.js";var u=n(),d=e(t(),1),f=e(r(),1),p=e=>{let t=(0,u.c)(61),{isOpen:n,onClose:r,onSave:i,section:a}=e,o;t[0]===a?o=t[1]:(o=()=>a?{...a}:{id:``,title_bn:``,title_en:``,type:`grid`,sort_order:0},t[0]=a,t[1]=o);let[s,l]=(0,d.useState)(o),p;if(a){let e;t[2]===a?e=t[3]:(e={...a},t[2]=a,t[3]=e),p=e}else{let e;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(e={id:``,title_bn:``,title_en:``,type:`grid`,sort_order:0},t[4]=e):e=t[4],p=e}let m=p,h,g;t[5]===m?(h=t[6],g=t[7]):(h=()=>{l(m)},g=[m],t[5]=m,t[6]=h,t[7]=g),(0,d.useEffect)(h,g);let _;t[8]!==s||t[9]!==i?(_=e=>{e.preventDefault(),i(s)},t[8]=s,t[9]=i,t[10]=_):_=t[10];let v=_;if(!n)return null;let y=a?.id?`বিভাগ সম্পাদনা করুন`:`নতুন বিভাগ`,b;t[11]===y?b=t[12]:(b=(0,f.jsx)(`h2`,{className:`text-xl font-bold mb-4`,children:y}),t[11]=y,t[12]=b);let x;t[13]===Symbol.for(`react.memo_cache_sentinel`)?(x=(0,f.jsx)(`label`,{htmlFor:`section-id`,className:`block text-sm font-bold mb-1`,children:`আইডি (স্লাগ)`}),t[13]=x):x=t[13];let S=s.id||``,C;t[14]===s?C=t[15]:(C=e=>l({...s,id:e.target.value}),t[14]=s,t[15]=C);let w=!!a?.id,T;t[16]!==C||t[17]!==w||t[18]!==S?(T=(0,f.jsxs)(`div`,{children:[x,(0,f.jsx)(`input`,{id:`section-id`,name:`id`,value:S,onChange:C,required:!0,readOnly:w,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none text-sm sm:text-base`})]}),t[16]=C,t[17]=w,t[18]=S,t[19]=T):T=t[19];let E;t[20]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,f.jsx)(`label`,{htmlFor:`section-title-bn`,className:`block text-sm font-bold mb-1`,children:`শিরোনাম (বাংলা)`}),t[20]=E):E=t[20];let D=s.title_bn||``,O;t[21]===s?O=t[22]:(O=e=>l({...s,title_bn:e.target.value}),t[21]=s,t[22]=O);let k;t[23]!==D||t[24]!==O?(k=(0,f.jsxs)(`div`,{children:[E,(0,f.jsx)(`input`,{id:`section-title-bn`,name:`title_bn`,value:D,onChange:O,required:!0,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`})]}),t[23]=D,t[24]=O,t[25]=k):k=t[25];let A;t[26]===Symbol.for(`react.memo_cache_sentinel`)?(A=(0,f.jsx)(`label`,{htmlFor:`section-title-en`,className:`block text-sm font-bold mb-1`,children:`শিরোনাম (ইংরেজি)`}),t[26]=A):A=t[26];let j=s.title_en||``,M;t[27]===s?M=t[28]:(M=e=>l({...s,title_en:e.target.value}),t[27]=s,t[28]=M);let N;t[29]!==j||t[30]!==M?(N=(0,f.jsxs)(`div`,{children:[A,(0,f.jsx)(`input`,{id:`section-title-en`,name:`title_en`,value:j,onChange:M,required:!0,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind text-sm sm:text-base`})]}),t[29]=j,t[30]=M,t[31]=N):N=t[31];let P;t[32]===Symbol.for(`react.memo_cache_sentinel`)?(P=(0,f.jsx)(`label`,{htmlFor:`section-type`,className:`block text-sm font-bold mb-1`,children:`ধরন`}),t[32]=P):P=t[32];let F=s.type||`grid`,I;t[33]===s?I=t[34]:(I=e=>l({...s,type:e}),t[33]=s,t[34]=I);let L;t[35]===Symbol.for(`react.memo_cache_sentinel`)?(L=[{value:`hero`,label:`হিরো`},{value:`grid`,label:`গ্রিড`},{value:`list`,label:`তালিকা`},{value:`carousel`,label:`ক্যারোজেল`},{value:`highlight`,label:`হাইলাইট`}],t[35]=L):L=t[35];let R;t[36]!==F||t[37]!==I?(R=(0,f.jsxs)(`div`,{children:[P,(0,f.jsx)(c,{id:`section-type`,value:F,onChange:I,options:L})]}),t[36]=F,t[37]=I,t[38]=R):R=t[38];let z;t[39]===Symbol.for(`react.memo_cache_sentinel`)?(z=(0,f.jsx)(`label`,{htmlFor:`section-sort-order`,className:`block text-sm font-bold mb-1`,children:`সাজানোর ক্রম`}),t[39]=z):z=t[39];let B=s.sort_order||0,V;t[40]===s?V=t[41]:(V=e=>l({...s,sort_order:parseInt(e.target.value,10)}),t[40]=s,t[41]=V);let H;t[42]!==B||t[43]!==V?(H=(0,f.jsxs)(`div`,{children:[z,(0,f.jsx)(`input`,{id:`section-sort-order`,type:`number`,name:`sort_order`,value:B,onChange:V,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none text-sm sm:text-base`})]}),t[42]=B,t[43]=V,t[44]=H):H=t[44];let U;t[45]===r?U=t[46]:(U=(0,f.jsx)(`button`,{type:`button`,onClick:r,className:`px-4 py-2 text-sm font-bold text-muted-text hover:text-card-text hover:bg-muted-bg rounded-lg`,children:`বাতিল`}),t[45]=r,t[46]=U);let W;t[47]===Symbol.for(`react.memo_cache_sentinel`)?(W=(0,f.jsx)(`button`,{type:`submit`,className:`px-4 py-2 bg-bbcRed text-white rounded-lg font-bold text-sm hover:opacity-90 transition-opacity`,children:`সংরক্ষণ`}),t[47]=W):W=t[47];let G;t[48]===U?G=t[49]:(G=(0,f.jsxs)(`div`,{className:`flex justify-end gap-2 mt-6`,children:[U,W]}),t[48]=U,t[49]=G);let K;t[50]!==v||t[51]!==T||t[52]!==k||t[53]!==N||t[54]!==R||t[55]!==H||t[56]!==G?(K=(0,f.jsxs)(`form`,{onSubmit:v,className:`space-y-4`,children:[T,k,N,R,H,G]}),t[50]=v,t[51]=T,t[52]=k,t[53]=N,t[54]=R,t[55]=H,t[56]=G,t[57]=K):K=t[57];let q;return t[58]!==K||t[59]!==b?(q=(0,f.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[100]`,children:(0,f.jsxs)(`div`,{className:`bg-card w-full max-w-md p-6 rounded-xl shadow-2xl`,children:[b,K]})}),t[58]=K,t[59]=b,t[60]=q):q=t[60],q},m=()=>{let[e,t]=(0,d.useState)([]),[n,r]=(0,d.useState)(!0),[c,u]=(0,d.useState)(null),[m,h]=(0,d.useState)(!1),[g,_]=(0,d.useState)(null),v=(0,d.useCallback)(async()=>{r(!0);try{let e=await l.getSections();if(e.success&&e.data){let n=e.data;t(n.sort((e,t)=>(e.sort_order||0)-(t.sort_order||0)))}else throw Error(e.message||`Failed to fetch sections`)}catch{u(`বিভাগগুলি আনতে ব্যর্থ হয়েছে`)}finally{r(!1)}},[]);(0,d.useEffect)(()=>{v()},[v]);let y=(e=null)=>{_(e),h(!0)},b=()=>{h(!1),_(null)},x=async e=>{try{await l.saveSection(e),b(),v()}catch{}},S=async e=>{if(window.confirm(`আপনি কি নিশ্চিত যে আপনি এই বিভাগটি মুছে ফেলতে চান?`))try{await l.deleteSection(e),v()}catch{}};return(0,f.jsxs)(`div`,{children:[(0,f.jsx)(p,{isOpen:m,onClose:b,onSave:x,section:g}),(0,f.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,f.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`বিভাগ পরিচালনা করুন`}),(0,f.jsxs)(`button`,{type:`button`,onClick:()=>y(),className:`bg-bbcRed text-white px-3 sm:px-4 py-2 rounded-lg font-bold text-sm sm:text-base flex items-center gap-2 whitespace-nowrap`,children:[(0,f.jsx)(s,{className:`w-4 h-4`}),` নতুন বিভাগ`]})]}),(0,f.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:n?(0,f.jsx)(`div`,{className:`p-8 text-center text-muted-text`,children:`লোড হচ্ছে...`}):c?(0,f.jsx)(`div`,{className:`p-8 text-center text-danger`,children:c}):e.length===0?(0,f.jsxs)(`div`,{className:`p-8 text-center text-muted-text`,children:[(0,f.jsx)(i,{className:`w-16 h-16 mx-auto mb-4 text-border-color`}),(0,f.jsx)(`p`,{className:`text-lg font-bold mb-2`,children:`কোনো বিভাগ পাওয়া যায়নি`})]}):(0,f.jsx)(`div`,{className:`grid grid-cols-1 gap-4 p-4`,children:e.map(e=>(0,f.jsx)(`div`,{className:`bg-card p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors`,children:(0,f.jsxs)(`div`,{className:`flex items-start justify-between`,children:[(0,f.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0`,children:[(0,f.jsx)(`div`,{className:`w-10 h-10 rounded-lg bg-muted-bg flex items-center justify-center text-card-text text-sm font-bold border border-border-color`,children:e.sort_order}),(0,f.jsxs)(`div`,{className:`truncate`,children:[(0,f.jsx)(`div`,{className:`font-bold text-sm truncate`,children:e.title_bn}),(0,f.jsx)(`div`,{className:`text-xs text-muted-text truncate`,children:e.title_en}),(0,f.jsx)(`div`,{className:`mt-1`,children:(0,f.jsx)(`span`,{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full bg-muted-bg text-card-text text-xs font-bold`,children:e.type})})]})]}),(0,f.jsx)(`div`,{className:`text-xs font-mono text-muted-text`,children:e.id}),(0,f.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,f.jsx)(`button`,{type:`button`,onClick:()=>y(e),className:`p-2 text-card-text hover:bg-muted-bg rounded`,children:(0,f.jsx)(a,{className:`w-4 h-4`})}),(0,f.jsx)(`button`,{type:`button`,onClick:()=>S(e.id),className:`p-2 text-danger hover:bg-danger/10 rounded`,children:(0,f.jsx)(o,{className:`w-4 h-4`})})]})]})},e.id))})})]})};export{m as default};