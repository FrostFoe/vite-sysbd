import{r as e}from"./rolldown-runtime-Ckerh37x.js";import{h as t,p as n,r,t as i,u as a}from"./vendor-react-BM5KEv9z.js";import{t as o}from"./vendor-BcXgp--U.js";import{$ as s,A as c,N as l,O as u,P as d,Q as f,S as p,T as m,X as h,Y as g,c as _,d as v,f as y,h as b,i as x,lt as S,n as C,nt as w,p as T,q as E,r as D,s as O,ut as k,v as A,w as j}from"./vendor-ui-BPT_KSDl.js";import{_ as M,c as N,d as P,g as F,i as I,m as L,o as R,p as ee,s as z,t as te,u as ne}from"./index-CrzU7P6t.js";var B=n(),V=e(t(),1),H=e(i(),1),U=e=>{let t=(0,B.c)(45),{src:n,alt:r,title:i,className:a,width:o,height:s,caption:c,showCaption:l}=e,u=r===void 0?``:r,d=a===void 0?``:a,f=l===void 0?!0:l,[p,m]=(0,V.useState)(!0),[_,v]=(0,V.useState)(!1),[y,b]=(0,V.useState)(!0),x;t[0]===n?x=t[1]:(x=ee(n),t[0]=n,t[1]=x);let S=x,C;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(C=()=>{m(!1)},t[2]=C):C=t[2];let w=C,T;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(T=()=>{m(!1),v(!0)},t[3]=T):T=t[3];let E=T,D;t[4]===y?D=t[5]:(D=()=>{b(!y)},t[4]=y,t[5]=D);let O=D;if(!y){let e=`relative w-full bg-muted-bg border border-border-color rounded-lg flex items-center justify-center cursor-pointer ${d}`,n;t[6]===O?n=t[7]:(n=e=>{(e.key===`Enter`||e.key===` `)&&O()},t[6]=O,t[7]=n);let r=y?`Hide image`:`Show image`,i;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,H.jsxs)(`div`,{className:`text-center p-4`,children:[(0,H.jsx)(h,{className:`w-8 h-8 mx-auto text-muted-text`}),(0,H.jsx)(`p`,{className:`mt-2 text-sm text-muted-text`,children:`Image hidden`}),(0,H.jsx)(`p`,{className:`text-xs text-muted-text`,children:`Click to show`})]}),t[8]=i):i=t[8];let a;return t[9]!==r||t[10]!==e||t[11]!==n||t[12]!==O?(a=(0,H.jsx)(`button`,{type:`button`,className:e,onClick:O,onKeyDown:n,"aria-label":r,children:i}),t[9]=r,t[10]=e,t[11]=n,t[12]=O,t[13]=a):a=t[13],a}if(_){let e=`relative w-full bg-muted-bg border border-border-color rounded-lg flex items-center justify-center ${d}`,n,r;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,H.jsx)(`div`,{className:`bg-muted-bg border-2 border-dashed border-border-color rounded-xl w-16 h-16 mx-auto`}),n=(0,H.jsx)(`p`,{className:`mt-2 text-sm text-muted-text`,children:`Image failed to load`}),t[14]=n,t[15]=r):(n=t[14],r=t[15]);let i;t[16]===S?i=t[17]:(i=(0,H.jsxs)(`div`,{className:`text-center p-4`,children:[r,n,(0,H.jsx)(`p`,{className:`text-xs text-muted-text`,children:S})]}),t[16]=S,t[17]=i);let a;return t[18]!==i||t[19]!==e?(a=(0,H.jsx)(`div`,{className:e,children:i}),t[18]=i,t[19]=e,t[20]=a):a=t[20],a}let k=`relative ${d}`,A;t[21]===p?A=t[22]:(A=p&&(0,H.jsx)(`div`,{className:`absolute inset-0 bg-muted-bg animate-pulse rounded-lg flex items-center justify-center`,children:(0,H.jsx)(`span`,{className:`text-sm text-muted-text`,children:`Loading...`})}),t[21]=p,t[22]=A);let j=`w-full h-auto rounded-lg ${p?`opacity-0`:`opacity-100`} transition-opacity duration-300`,M;t[23]!==u||t[24]!==s||t[25]!==S||t[26]!==j||t[27]!==i||t[28]!==o?(M=(0,H.jsx)(`img`,{src:S,alt:u,title:i,width:o,height:s,crossOrigin:`anonymous`,onLoad:w,onError:E,className:j}),t[23]=u,t[24]=s,t[25]=S,t[26]=j,t[27]=i,t[28]=o,t[29]=M):M=t[29];let N;t[30]!==c||t[31]!==f?(N=f&&c&&(0,H.jsx)(`figcaption`,{className:`mt-2 text-sm text-center text-muted-text italic`,children:c}),t[30]=c,t[31]=f,t[32]=N):N=t[32];let P=y?`Hide image`:`Show image`,F;t[33]===y?F=t[34]:(F=y?(0,H.jsx)(h,{className:`w-4 h-4`}):(0,H.jsx)(g,{className:`w-4 h-4`}),t[33]=y,t[34]=F);let I;t[35]!==P||t[36]!==F||t[37]!==O?(I=(0,H.jsx)(`button`,{type:`button`,onClick:O,className:`absolute top-2 right-2 p-1.5 bg-black/50 hover:bg-black/70 text-white rounded-full transition-all opacity-0 hover:opacity-100 group-hover:opacity-100`,"aria-label":P,children:F}),t[35]=P,t[36]=F,t[37]=O,t[38]=I):I=t[38];let L;return t[39]!==M||t[40]!==N||t[41]!==I||t[42]!==k||t[43]!==A?(L=(0,H.jsxs)(`figure`,{className:k,children:[A,M,N,I]}),t[39]=M,t[40]=N,t[41]=I,t[42]=k,t[43]=A,t[44]=L):L=t[44],L},re=n(),W=e=>{let t=(0,re.c)(56),{src:n,alt:r,title:i,className:a,width:o,height:s,poster:l,caption:u,showCaption:d,loop:f,muted:m,controls:h}=e,g=r===void 0?``:r,_=a===void 0?``:a,v=o===void 0?`100%`:o,y=s===void 0?`auto`:s,b=d===void 0?!0:d,S=f===void 0?!1:f,C=m===void 0?!1:m,w=h===void 0?!0:h,[T,E]=(0,V.useState)(!1),[O,k]=(0,V.useState)(C),[A,M]=(0,V.useState)(!0),[N,P]=(0,V.useState)(!1),F=(0,V.useRef)(null),I;t[0]===n?I=t[1]:(I=ee(n),t[0]=n,t[1]=I);let L=I,R;t[2]===l?R=t[3]:(R=ee(l),t[2]=l,t[3]=R);let z=R,te;t[4]===T?te=t[5]:(te=()=>{F.current&&(T?(F.current.pause(),E(!1)):(F.current.play(),E(!0)))},t[4]=T,t[5]=te);let ne=te,B;t[6]===O?B=t[7]:(B=()=>{F.current&&(F.current.muted=!O,k(!O))},t[6]=O,t[7]=B);let U=B,W;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(W=()=>{M(!0)},t[8]=W):W=t[8];let G=W,ie;t[9]===Symbol.for(`react.memo_cache_sentinel`)?(ie=()=>{M(!1)},t[9]=ie):ie=t[9];let ae=ie,K;t[10]===Symbol.for(`react.memo_cache_sentinel`)?(K=()=>{M(!1),P(!0)},t[10]=K):K=t[10];let oe=K,se;t[11]===S?se=t[12]:(se=()=>{F.current&&F.current.currentTime>=F.current.duration-.1&&!S&&E(!1)},t[11]=S,t[12]=se);let ce=se,le;t[13]===S?le=t[14]:(le=()=>{S||E(!1)},t[13]=S,t[14]=le);let q=le;if(N){let e=`relative w-full bg-muted-bg border border-border-color rounded-lg flex flex-col items-center justify-center ${_}`,n,r;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,H.jsx)(`div`,{className:`bg-muted-bg border-2 border-dashed border-border-color rounded-xl w-16 h-16 mx-auto flex items-center justify-center`,children:(0,H.jsx)(p,{className:`w-6 h-6 text-muted-text`})}),r=(0,H.jsx)(`p`,{className:`mt-2 text-sm text-muted-text`,children:`Video failed to load`}),t[15]=n,t[16]=r):(n=t[15],r=t[16]);let i;t[17]===L?i=t[18]:(i=(0,H.jsxs)(`div`,{className:`p-4 text-center`,children:[n,r,(0,H.jsx)(`p`,{className:`text-xs text-muted-text`,children:L})]}),t[17]=L,t[18]=i);let a;return t[19]!==e||t[20]!==i?(a=(0,H.jsx)(`div`,{className:e,children:i}),t[19]=e,t[20]=i,t[21]=a):a=t[21],a}let ue=`relative ${_}`,J;t[22]===A?J=t[23]:(J=A&&(0,H.jsx)(`div`,{className:`absolute inset-0 bg-card flex items-center justify-center`,children:(0,H.jsx)(`div`,{className:`animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-white`})}),t[22]=A,t[23]=J);let de=`w-full h-auto ${A?`opacity-0`:`opacity-100`} transition-opacity duration-300`,fe,Y;t[24]===Symbol.for(`react.memo_cache_sentinel`)?(fe=()=>E(!0),Y=()=>E(!1),t[24]=fe,t[25]=Y):(fe=t[24],Y=t[25]);let pe=g||`Video content`,X;t[26]!==w||t[27]!==ce||t[28]!==q||t[29]!==y||t[30]!==O||t[31]!==S||t[32]!==z||t[33]!==L||t[34]!==de||t[35]!==pe||t[36]!==i||t[37]!==v?(X=(0,H.jsx)(`video`,{ref:F,src:L,poster:z,loop:S,muted:O,controls:w,width:v,height:y,title:i,crossOrigin:`anonymous`,className:de,onPlay:fe,onPause:Y,onEnded:q,onTimeUpdate:ce,onLoadStart:G,onCanPlay:ae,onError:oe,"aria-label":pe}),t[26]=w,t[27]=ce,t[28]=q,t[29]=y,t[30]=O,t[31]=S,t[32]=z,t[33]=L,t[34]=de,t[35]=pe,t[36]=i,t[37]=v,t[38]=X):X=t[38];let Z;t[39]!==w||t[40]!==U||t[41]!==ne||t[42]!==O||t[43]!==T?(Z=!w&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity`,children:(0,H.jsx)(`button`,{type:`button`,onClick:ne,className:`bg-black/50 hover:bg-black/70 text-white p-4 rounded-full transition-all`,"aria-label":T?`Pause video`:`Play video`,children:T?(0,H.jsx)(j,{className:`w-8 h-8`}):(0,H.jsx)(p,{className:`w-8 h-8`})})}),(0,H.jsxs)(`div`,{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 opacity-0 hover:opacity-100 transition-opacity flex justify-between items-center`,children:[(0,H.jsx)(`button`,{type:`button`,onClick:U,className:`text-white hover:text-white/80`,"aria-label":O?`Unmute video`:`Mute video`,children:O?(0,H.jsx)(D,{className:`w-5 h-5`}):(0,H.jsx)(x,{className:`w-5 h-5`})}),(0,H.jsx)(`button`,{type:`button`,onClick:()=>{F.current&&F.current.requestFullscreen?.()},className:`text-white hover:text-white/80`,"aria-label":`Enter fullscreen`,children:(0,H.jsx)(c,{className:`w-5 h-5`})})]})]}),t[39]=w,t[40]=U,t[41]=ne,t[42]=O,t[43]=T,t[44]=Z):Z=t[44];let Q;t[45]!==J||t[46]!==X||t[47]!==Z?(Q=(0,H.jsxs)(`div`,{className:`relative bg-black rounded-lg overflow-hidden`,children:[J,X,Z]}),t[45]=J,t[46]=X,t[47]=Z,t[48]=Q):Q=t[48];let $;t[49]!==u||t[50]!==b?($=b&&u&&(0,H.jsx)(`figcaption`,{className:`mt-2 text-sm text-center text-muted-text italic`,children:u}),t[49]=u,t[50]=b,t[51]=$):$=t[51];let me;return t[52]!==ue||t[53]!==Q||t[54]!==$?(me=(0,H.jsxs)(`figure`,{className:ue,children:[Q,$]}),t[52]=ue,t[53]=Q,t[54]=$,t[55]=me):me=t[55],me},G=n(),ie=e=>{let t=(0,G.c)(9),{content:n,className:r,fontSizeClass:i}=e,a=r===void 0?``:r,s=i===void 0?``:i,c;t[0]===n?c=t[1]:(c=o.sanitize(n),t[0]=n,t[1]=c);let l=c,u;if(t[2]!==l){let e=[];l=l.replace(/<img\s+([^>]*?)\s*>/gi,(t,n)=>{let r=n.match(/src\s*=\s*["']([^"']*)["']/i),i=n.match(/alt\s*=\s*["']([^"']*)["']/i),a=n.match(/title\s*=\s*["']([^"']*)["']/i),o=n.match(/width\s*=\s*["']([^"']*)["']/i),s=n.match(/height\s*=\s*["']([^"']*)["']/i),c=e.length;return e.push((0,H.jsx)(U,{src:r?r[1]:``,alt:i?i[1]:``,title:a?a[1]:``,width:o?o[1]:void 0,height:s?s[1]:void 0,className:`my-4`},`img-${c}`)),`__CUSTOM_COMPONENT_PLACEHOLDER_${c}__`}),l=l.replace(/<video\s+([^>]*?)\s*\/?>.*?<\/video>|<video\s+([^>]*?)\s*>/gi,t=>{let n=t.match(/src\s*=\s*["']([^"']*)["']/i),r=t.match(/poster\s*=\s*["']([^"']*)["']/i),i=t.match(/alt\s*=\s*["']([^"']*)["']/i),a=t.match(/title\s*=\s*["']([^"']*)["']/i),o=t.match(/width\s*=\s*["']([^"']*)["']/i),s=t.match(/height\s*=\s*["']([^"']*)["']/i),c=t.includes(`loop`),l=t.includes(`muted`),u=t.includes(`controls`),d=e.length;return e.push((0,H.jsx)(W,{src:n?n[1]:``,poster:r?r[1]:``,alt:i?i[1]:``,title:a?a[1]:``,width:o?o[1]:void 0,height:s?s[1]:void 0,loop:c,muted:l,controls:u,className:`my-4`},`video-${d}`)),`__CUSTOM_COMPONENT_PLACEHOLDER_${d}__`});let n=l.split(/(__CUSTOM_COMPONENT_PLACEHOLDER_\d+__)/),r=(e,t)=>{if(e.nodeType===Node.TEXT_NODE){let t=e.textContent;return t?.trim()?t:null}if(e.nodeType===Node.ELEMENT_NODE){let n=e,i={key:t};for(let e=0;e<n.attributes.length;e++){let t=n.attributes[e],r=t.name===`class`?`className`:t.name;i[r]=t.value}let a=Array.from(n.childNodes).map((e,n)=>r(e,`${t}-child-${n}`)).filter(ae);return(0,V.createElement)(n.tagName.toLowerCase(),i,...a)}return null};u=n.map((t,n)=>{if(t.startsWith(`__CUSTOM_COMPONENT_PLACEHOLDER_`)){let n=t.match(/__CUSTOM_COMPONENT_PLACEHOLDER_(\d+)__/);if(n)return e[parseInt(n[1],10)]}else if(t.trim()){let e=o.sanitize(t),i=document.createElement(`div`);return i.innerHTML=e,Array.from(i.childNodes).map((e,t)=>r(e,`part-${n}-node-${t}`)).filter(K)}return null}).filter(Boolean).flat(),t[2]=l,t[3]=u,t[4]=l}else u=t[3],l=t[4];let d=u,f=`prose max-w-none ${s} ${a} transition-all duration-300 ease-in-out`,p;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(p={fontSize:`inherit`},t[5]=p):p=t[5];let m;return t[6]!==d||t[7]!==f?(m=(0,H.jsx)(`div`,{className:f,style:p,children:d}),t[6]=d,t[7]=f,t[8]=m):m=t[8],m};function ae(e){return e!=null}function K(e){return e!==null}var oe=n(),se=e=>{let t=(0,oe.c)(36),{onHighlight:n,onCopy:r,onSelectAll:i,onClose:a,visible:o,position:c}=e,[l,u]=(0,V.useState)(!1),d=(0,V.useRef)(null),f,p;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(f=()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&u(!1)};return document.addEventListener(`mousedown`,e),()=>{document.removeEventListener(`mousedown`,e)}},p=[],t[0]=f,t[1]=p):(f=t[0],p=t[1]),(0,V.useEffect)(f,p);let h,g;t[2]!==a||t[3]!==o?(h=()=>{let e=()=>{a()};if(o)return document.addEventListener(`click`,e),()=>{document.removeEventListener(`click`,e)}},g=[o,a],t[2]=a,t[3]=o,t[4]=h,t[5]=g):(h=t[4],g=t[5]),(0,V.useEffect)(h,g);let v;t[6]===Symbol.for(`react.memo_cache_sentinel`)?(v=[{name:`Yellow`,value:`bg-yellow-200`,displayColor:`bg-yellow-400`},{name:`Green`,value:`bg-green-200`,displayColor:`bg-green-400`},{name:`Blue`,value:`bg-blue-200`,displayColor:`bg-blue-400`},{name:`Pink`,value:`bg-pink-200`,displayColor:`bg-pink-400`},{name:`Purple`,value:`bg-purple-200`,displayColor:`bg-purple-400`}],t[6]=v):v=t[6];let y=v;if(!o)return null;let x=c.top-50,S=c.left-60,C;t[7]!==x||t[8]!==S?(C={top:x,left:S},t[7]=x,t[8]=S,t[9]=C):C=t[9];let w;t[10]===Symbol.for(`react.memo_cache_sentinel`)?(w=(0,H.jsx)(s,{className:`w-4 h-4`}),t[10]=w):w=t[10];let T;t[11]===r?T=t[12]:(T=(0,H.jsx)(`button`,{type:`button`,onClick:r,className:`p-2 rounded-md hover:bg-muted-bg transition-colors`,title:`Copy text`,children:w}),t[11]=r,t[12]=T);let E;t[13]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,H.jsx)(b,{className:`w-4 h-4`}),t[13]=E):E=t[13];let D;t[14]===i?D=t[15]:(D=(0,H.jsx)(`button`,{type:`button`,onClick:i,className:`p-2 rounded-md hover:bg-muted-bg transition-colors`,title:`Select all`,children:E}),t[14]=i,t[15]=D);let O;t[16]===l?O=t[17]:(O=()=>u(!l),t[16]=l,t[17]=O);let k;t[18]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,H.jsx)(m,{className:`w-4 h-4`}),t[18]=k):k=t[18];let A;t[19]===O?A=t[20]:(A=(0,H.jsx)(`button`,{type:`button`,onClick:O,className:`p-2 rounded-md hover:bg-muted-bg transition-colors flex items-center gap-1`,title:`Highlight text`,children:k}),t[19]=O,t[20]=A);let j;t[21]!==n||t[22]!==l?(j=l&&(0,H.jsx)(`div`,{className:`absolute bottom-full mb-2 left-0 bg-card border border-border-color rounded-lg shadow-soft p-2 flex flex-wrap gap-1 w-24 z-10`,children:y.map(e=>(0,H.jsx)(`button`,{type:`button`,onClick:()=>{n(e.value),u(!1)},className:`w-5 h-5 rounded-full ${e.displayColor} hover:scale-110 transition-transform`,title:`Highlight with ${e.name}`},e.name))}),t[21]=n,t[22]=l,t[23]=j):j=t[23];let M;t[24]!==A||t[25]!==j?(M=(0,H.jsxs)(`div`,{className:`relative`,children:[A,j]}),t[24]=A,t[25]=j,t[26]=M):M=t[26];let N;t[27]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,H.jsx)(_,{className:`w-4 h-4`}),t[27]=N):N=t[27];let P;t[28]===a?P=t[29]:(P=(0,H.jsx)(`button`,{type:`button`,onClick:a,className:`p-1 rounded-md hover:bg-muted-bg transition-colors ml-1`,children:N}),t[28]=a,t[29]=P);let F;return t[30]!==T||t[31]!==D||t[32]!==M||t[33]!==P||t[34]!==C?(F=(0,H.jsxs)(`div`,{ref:d,className:`fixed z-[100] flex items-center gap-1 bg-card text-card-text shadow-soft rounded-lg p-2 border border-border-color`,style:C,children:[T,D,M,P]}),t[30]=T,t[31]=D,t[32]=M,t[33]=P,t[34]=C,t[35]=F):F=t[35],F},ce=n();const le=e=>{let t=(0,ce.c)(24),[n,r]=(0,V.useState)(!1),i;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(i={top:0,left:0},t[0]=i):i=t[0];let[a,o]=(0,V.useState)(i),[s,c]=(0,V.useState)(``),l;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(l={text:``,range:null},t[1]=l):l=t[1];let[u,d]=(0,V.useState)(l),f=(0,V.useRef)(null),p;t[2]===e?p=t[3]:(p=()=>{let t=window.getSelection();if(!t||t.toString().trim()===``){r(!1),c(``),d({text:``,range:null});return}let n=t.toString().trim();if(!n){r(!1);return}let i=t.getRangeAt(0),a=e.current;if(!a||!a.contains(i.commonAncestorContainer)){r(!1);return}let s=i.getBoundingClientRect();o({top:s.top+window.scrollY-60,left:s.left+window.scrollX+s.width/2}),c(n),d({text:n,range:i}),r(!0),f.current=t},t[2]=e,t[3]=p);let m=p,h,g;t[4]===m?(h=t[5],g=t[6]):(h=()=>{let e=()=>{setTimeout(m,0)};return document.addEventListener(`mouseup`,e),()=>{document.removeEventListener(`mouseup`,e)}},g=[m],t[4]=m,t[5]=h,t[6]=g),(0,V.useEffect)(h,g);let _;t[7]===s?_=t[8]:(_=()=>{s&&navigator.clipboard.writeText(s).then(()=>{r(!1)}).catch(()=>{let e=document.createElement(`textarea`);e.value=s,document.body.appendChild(e),e.select(),document.execCommand(`copy`),document.body.removeChild(e),r(!1)})},t[7]=s,t[8]=_);let v=_,y;t[9]===e?y=t[10]:(y=()=>{let t=e.current;if(t){let e=window.getSelection();if(e){let n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}},t[9]=e,t[10]=y);let b=y,x;t[11]===u.range?x=t[12]:(x=e=>{if(!u.range)return;let t=u.range,n=document.createElement(`span`);n.className=`${e} rounded-sm transition-colors duration-200`,t.surroundContents(n),r(!1);let i=window.getSelection();i&&i.removeAllRanges()},t[11]=u.range,t[12]=x);let S=x,C;t[13]===Symbol.for(`react.memo_cache_sentinel`)?(C=()=>{r(!1);let e=window.getSelection();e&&e.removeAllRanges()},t[13]=C):C=t[13];let w=C,T,E;t[14]===e?(T=t[15],E=t[16]):(E=()=>{let t=e.current;if(!t)return;let n=q;return t.addEventListener(`contextmenu`,n),()=>{t.removeEventListener(`contextmenu`,n)}},T=[e],t[14]=e,t[15]=T,t[16]=E),(0,V.useEffect)(E,T);let D;return t[17]!==v||t[18]!==S||t[19]!==b||t[20]!==s||t[21]!==a||t[22]!==n?(D={toolbarVisible:n,toolbarPosition:a,selectedText:s,handleCopy:v,handleSelectAll:b,handleHighlight:S,handleToolbarClose:w},t[17]=v,t[18]=S,t[19]=b,t[20]=s,t[21]=a,t[22]=n,t[23]=D):D=t[23],D};function q(e){let t=window.getSelection();t&&t.toString().trim()!==``&&e.preventDefault()}var ue=()=>{let{id:e}=a(),{language:t}=M(),{user:n,isAuthenticated:i}=te(),[s,c]=(0,V.useState)(null),[p,m]=(0,V.useState)([]),[h,g]=(0,V.useState)(!0),[_,b]=(0,V.useState)([]),[x,D]=(0,V.useState)(`md`),[j,ne]=(0,V.useState)(``),[B,U]=(0,V.useState)(``),[re,W]=(0,V.useState)({}),[G,ae]=(0,V.useState)(`newest`),[K,oe]=(0,V.useState)({}),[ce,q]=(0,V.useState)(null),[ue,J]=(0,V.useState)(!1),[de,fe]=(0,V.useState)(!1),[Y,pe]=(0,V.useState)(null),X=(0,V.useRef)(null),Z=n?.role===`admin`,{toolbarVisible:Q,toolbarPosition:$,handleCopy:me,handleSelectAll:he,handleHighlight:ge,handleToolbarClose:_e}=le(X);(0,V.useEffect)(()=>{try{let t=localStorage.getItem(`breachtimes-bookmarks`);if(t&&b(JSON.parse(t)),e){let t=localStorage.getItem(`votes-${e}`);t&&W(JSON.parse(t));let n=localStorage.getItem(`sort-${e}`);n&&ae(n)}}catch{}},[e]),(0,V.useEffect)(()=>{(async()=>{if(e){g(!0);try{let n=await z.getArticle(e,t);n.success&&n.article?c(n.article):c(null);let r=await R.getArticles({status:`published`,lang:t});r.success&&r.articles&&m(r.articles)}catch{c(null)}finally{g(!1)}}})()},[e,t]);let ve=(0,V.useCallback)(e=>{D(e)},[]),ye=(0,V.useCallback)(()=>{e&&b(n=>{let r=n.indexOf(e),i=r>-1?n.filter(t=>t!==e):[...n,e];return localStorage.setItem(`breachtimes-bookmarks`,JSON.stringify(i)),L(F(r>-1?`removed`:`saved_successfully`,t)),i})},[e,t]),be=(0,V.useCallback)(()=>{navigator.share?navigator.share({title:s?.title||document.title,url:window.location.href}).catch(()=>{}):navigator.clipboard.writeText(window.location.href).then(()=>{L(F(`link_copied`,t))})},[s,t]),xe=(0,V.useCallback)(async()=>{if(!e)return;U(``);let n=j.trim();if(n.length<3){U(F(`comment_too_short`,t));return}if(n.length>5e3){U(F(`comment_too_long`,t));return}try{let r=await z.postComment(e,n,t);if(r.success){ne(``),L(F(`comment_posted`,t));let n=await z.getArticle(e,t);n.success&&n.article&&c(n.article)}else U(r.error||F(`failed_to_post_comment`,t))}catch{U(F(`server_error`,t))}},[e,j,t]),Se=(0,V.useCallback)(async(n,r)=>{try{let i=await z.voteComment(n,r);i.success?(W(t=>{let i={...t};return i[n]===r?delete i[n]:i[n]=r,localStorage.setItem(`votes-${e}`,JSON.stringify(i)),i}),c(e=>{if(!e)return null;let t=e.comments?.map(e=>e.id===n?{...e,upvotes:i.upvotes,downvotes:i.downvotes}:e);return{...e,comments:t}}),L(F(`vote_recorded`,t))):L(i.error||F(`failed_to_vote`,t),`error`)}catch{L(F(`server_error`,t),`error`)}},[e,t]),Ce=(0,V.useCallback)(t=>{ae(t),localStorage.setItem(`sort-${e}`,t)},[e]),we=(0,V.useCallback)(e=>{q(t=>t===e?null:e),oe(t=>({...t,[e]:``}))},[]),Te=(0,V.useCallback)(async n=>{if(!e)return;let r=K[n]?.trim();if(!r||r.length<3){L(F(`reply_too_short`,t),`error`);return}try{let i=await z.postReply(n,r,t);if(i.success){oe(e=>({...e,[n]:``})),q(null),L(F(`reply_posted`,t));let r=await z.getArticle(e,t);r.success&&r.article&&c(r.article)}else L(i.error||F(`failed_to_post_reply`,t),`error`)}catch{L(F(`server_error`,t),`error`)}},[e,K,t]),Ee=(0,V.useCallback)(async n=>{if(!(!Z||!window.confirm(F(`confirm_delete_comment`,t))))try{let r=await R.deleteComment(n);if(r.success){if(L(F(`comment_deleted`,t)),!e)return;let n=await z.getArticle(e,t);n.success&&n.article&&c(n.article)}else L(r.error||F(`failed_to_delete_comment`,t),`error`)}catch{L(F(`server_error`,t),`error`)}},[e,Z,t]),De=(0,V.useCallback)(async e=>{J(!0),fe(!0),pe(null);try{let n=await z.getUserProfile({userName:e});n.success&&n.profile?pe(n.profile):L(n.error||F(`failed_to_fetch_profile`,t),`error`)}catch{L(F(`server_error`,t),`error`)}finally{fe(!1)}},[t]),Oe=(0,V.useCallback)(()=>{J(!1),pe(null)},[]),ke=(0,V.useRef)(null),Ae=(0,V.useCallback)(async n=>{if(n.preventDefault(),!e)return;let r=new FormData(n.currentTarget);try{let e=await z.submitDocument(r);e.success?(L(F(`submission_success`,t)),ke.current?.reset()):L(e.error||F(`submission_failed`,t),`error`)}catch{L(F(`server_error`,t),`error`)}},[e,t]);if(h)return(0,H.jsx)(`div`,{className:`text-center py-8`,children:(0,H.jsx)(d,{className:`w-10 h-10 animate-spin text-bbcRed`})});if(!s)return(0,H.jsx)(`div`,{className:`text-center py-8 text-danger`,children:F(`article_not_found`,t)});let je=_.includes(s.id);return(0,H.jsxs)(`div`,{className:`max-w-[1280px] mx-auto px-2 sm:px-3`,children:[(0,H.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6 lg:gap-12`,children:[(0,H.jsx)(`div`,{className:`lg:col-span-8`,children:(0,H.jsxs)(`article`,{className:`bg-card p-3 sm:p-4 md:p-5 rounded-2xl shadow-soft border border-border-color`,children:[(0,H.jsxs)(`div`,{className:`mb-4 sm:mb-6`,children:[(0,H.jsx)(`span`,{className:`bg-bbcRed text-white text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block`,children:s.category}),(0,H.jsx)(`h1`,{className:`text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold leading-tight mb-3 sm:mb-4 text-card-text`,children:s.title}),(0,H.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-muted-text font-medium`,children:[(0,H.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,H.jsx)(w,{className:`w-4 h-4`}),` `,P(s.published_at,t)]}),s.readTime&&(0,H.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,H.jsx)(k,{className:`w-4 h-4`}),` `,s.readTime]})]})]}),(0,H.jsx)(`div`,{className:`mb-10 relative aspect-video bg-muted-bg rounded-2xl overflow-hidden shadow-lg`,children:(0,H.jsx)(`img`,{src:ee(s.image)||`https://placehold.co/600x400/1a1a1a/FFF?text=BreachTimes`,alt:s.title,crossOrigin:`anonymous`,className:`w-full h-full object-cover`})}),(0,H.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-center justify-between border-y border-border-color py-3 sm:py-4 mb-6 sm:mb-8 gap-3 sm:gap-0`,children:[(0,H.jsxs)(`div`,{className:`flex items-center gap-1 bg-muted-bg rounded-lg p-1`,children:[(0,H.jsx)(`button`,{type:`button`,onClick:()=>ve(`sm`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-xs font-bold text-card-text ${x===`sm`?`bg-card`:``}`,children:`A`}),(0,H.jsx)(`button`,{type:`button`,onClick:()=>ve(`md`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-xs sm:text-sm font-bold text-card-text ${x===`md`?`bg-card`:``}`,children:`A`}),(0,H.jsx)(`button`,{type:`button`,onClick:()=>ve(`lg`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-sm sm:text-base font-bold text-card-text ${x===`lg`?`bg-card`:``}`,children:`A`})]}),(0,H.jsxs)(`div`,{className:`flex gap-2 sm:gap-3 w-full sm:w-auto`,children:[(0,H.jsxs)(`button`,{type:`button`,"aria-label":`Share article`,onClick:be,className:`flex items-center justify-center gap-2 px-3 sm:px-4 py-2 rounded-full bg-muted-bg hover:bg-bbcRed hover:text-white transition-all text-xs sm:text-sm font-bold text-card-text flex-1 sm:flex-none`,children:[(0,H.jsx)(A,{className:`w-4 h-4`}),` `,F(`share`,t)]}),(0,H.jsx)(`button`,{type:`button`,"aria-label":`Toggle bookmark`,onClick:ye,className:`p-2.5 rounded-full bg-muted-bg hover:bg-bbcRed hover:text-white text-card-text transition-all shadow-sm flex items-center justify-center group`,children:(0,H.jsx)(S,{className:`w-5 h-5`,fill:je?`currentColor`:`none`})})]})]}),(0,H.jsxs)(`div`,{ref:X,className:`relative`,children:[(0,H.jsx)(ie,{content:s.content,className:`[&_p]:leading-[1.8] [&_p]:mb-[1em] space-y-6 sm:space-y-8 text-card-text transition-all duration-300`,fontSizeClass:x===`sm`?`[&_*:not(button):not(img):not(video):not(audio)]:text-[0.95rem] [&_p]:leading-[1.6]`:x===`lg`?`[&_*:not(button):not(img):not(video):not(audio)]:text-[1.35rem] [&_p]:leading-loose`:`[&_*:not(button):not(img):not(video):not(audio)]:text-base sm:[&_*:not(button):not(img):not(video):not(audio)]:text-lg [&_p]:leading-[1.8]`}),(0,H.jsx)(se,{visible:Q,position:$,onCopy:me,onSelectAll:he,onHighlight:ge,onClose:_e})]})]})}),(0,H.jsxs)(`div`,{className:`lg:col-span-4 w-full`,children:[(0,H.jsxs)(`div`,{className:`w-full space-y-4 sm:space-y-6 lg:sticky lg:top-28`,children:[s.leaked_documents&&s.leaked_documents.length>0&&(0,H.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,H.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,H.jsx)(E,{className:`w-5 h-5 text-bbcRed`}),F(`leaked_documents`,t)]}),(0,H.jsx)(`ul`,{className:`space-y-3`,children:s.leaked_documents.map(e=>(0,H.jsxs)(`li`,{className:`group flex items-center gap-3 p-2 rounded-lg hover:bg-muted-bg transition-colors cursor-pointer`,children:[(0,H.jsx)(`div`,{className:`w-10 h-10 rounded-lg bg-danger/10 dark:bg-danger/20 flex items-center justify-center flex-shrink-0 text-bbcRed font-bold text-xs border border-bbcRed/20`,children:e.file_type||`DOC`}),(0,H.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,H.jsx)(`p`,{className:`text-sm font-bold text-card-text truncate group-hover:text-bbcRed transition-colors`,children:e.display_name_bn||e.display_name_en}),(0,H.jsx)(`span`,{className:`text-[10px] text-muted-text uppercase tracking-wider`,children:`Download`})]}),(0,H.jsx)(`a`,{href:e.download_url||`/downloads/?file=${e.file_path}`,download:!0,target:`_blank`,rel:`noopener noreferrer`,className:`p-2 rounded-lg bg-bbcRed/10 text-bbcRed group-hover:bg-bbcRed group-hover:text-white transition-all`,children:(0,H.jsx)(f,{className:`w-4 h-4`})})]},e.id||e.display_name_en))})]}),s.documents&&s.documents.length>0&&(0,H.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,H.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,H.jsx)(f,{className:`w-5 h-5 text-bbcRed`}),F(`downloadable_documents`,t)]}),(0,H.jsx)(`ul`,{className:`space-y-3`,children:s.documents.map(e=>(0,H.jsxs)(`li`,{className:`group flex items-center gap-3 p-3 rounded-lg hover:bg-muted-bg transition-colors cursor-pointer border border-transparent hover:border-bbcRed/30`,children:[(0,H.jsx)(`div`,{className:`w-10 h-10 rounded-lg bg-muted-bg dark:bg-muted-bg flex items-center justify-center flex-shrink-0 text-card-text dark:text-card-text font-bold text-xs border border-border-color/50`,children:e.file_type}),(0,H.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,H.jsx)(`p`,{className:`text-sm font-bold text-card-text truncate group-hover:text-bbcRed transition-colors`,title:e.display_name_bn||e.display_name_en,children:t===`bn`?e.display_name_bn||e.display_name_en:e.display_name_en||e.display_name_bn}),e.file_size&&(0,H.jsxs)(`span`,{className:`text-[10px] text-muted-text uppercase tracking-wider`,children:[Math.round(e.file_size/1024),` KB`]})]}),(0,H.jsx)(`a`,{href:e.download_url||`/downloads/?file=${encodeURIComponent(e.file_path)}`,download:!0,target:`_blank`,rel:`noopener noreferrer`,className:`p-2 rounded-lg bg-bbcRed/10 text-bbcRed group-hover:bg-bbcRed group-hover:text-white transition-all`,children:(0,H.jsx)(f,{className:`w-4 h-4`})})]},e.id))})]}),(0,H.jsx)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:i?s.allow_submissions?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,H.jsx)(O,{className:`w-5 h-5 text-bbcRed`}),F(`submit_documents`,t)]}),(0,H.jsxs)(`form`,{ref:ke,onSubmit:Ae,className:`space-y-4`,children:[(0,H.jsx)(`input`,{type:`hidden`,name:`article_id`,value:s.id}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`label`,{htmlFor:`document-input`,className:`block text-xs font-bold mb-2 text-muted-text`,children:F(`your_file`,t)}),(0,H.jsx)(`input`,{id:`document-input`,type:`file`,name:`document`,required:!0,className:`w-full text-xs text-card-text file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-bbcRed/10 file:text-bbcRed hover:file:bg-bbcRed/20`})]}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`label`,{htmlFor:`message-textarea`,className:`block text-xs font-bold mb-2 text-muted-text`,children:F(`message_optional`,t)}),(0,H.jsx)(`textarea`,{id:`message-textarea`,name:`message`,rows:3,className:`w-full p-3 rounded-lg border border-border-color bg-muted-bg text-card-text text-sm focus:border-bbcRed outline-none`,placeholder:F(`write_details`,t)})]}),(0,H.jsx)(`button`,{type:`submit`,className:`w-full bg-bbcRed text-white py-2 rounded-lg font-bold text-sm hover:opacity-90 transition-opacity`,children:F(`submit`,t)})]})]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`h4`,{className:`text-lg font-bold mb-2 text-card-text flex items-center gap-2`,children:[(0,H.jsx)(l,{className:`w-5 h-5 text-muted-text`}),F(`submissions_closed`,t)]}),(0,H.jsx)(`p`,{className:`text-sm text-muted-text font-bold text-danger`,children:F(`submissions_turned_off_by_admin`,t)})]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`h4`,{className:`text-lg font-bold mb-2 text-card-text flex items-center gap-2`,children:[(0,H.jsx)(l,{className:`w-5 h-5 text-muted-text`}),t===`bn`?`à¦«à¦¾à¦‡à¦² à¦œà¦®à¦¾ à¦¦à¦¿à¦¤à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨`:`Sign in to submit`]}),(0,H.jsx)(`p`,{className:`text-sm text-muted-text mb-4`,children:t===`bn`?`à¦¨à¦¥à¦¿ à¦œà¦®à¦¾ à¦¦à¦¿à¦¤à§‡ à¦¦à¦¯à¦¼à¦¾ à¦•à¦°à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨`:`Please sign in to submit documents`}),(0,H.jsx)(r,{to:`/login`,className:`inline-block bg-bbcRed text-white px-6 py-2 rounded-full font-bold hover:bg-opacity-90 transition-all`,children:F(`sign_in`,t)})]})}),(0,H.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,H.jsx)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text`,children:F(`article_info`,t)}),(0,H.jsxs)(`div`,{className:`space-y-2 sm:space-y-3 text-xs sm:text-sm`,children:[(0,H.jsxs)(`div`,{className:`flex justify-between items-center pb-2 sm:pb-3 border-b border-border-color`,children:[(0,H.jsx)(`span`,{className:`text-muted-text`,children:F(`category`,t)}),(0,H.jsx)(`span`,{className:`font-bold text-card-text`,children:s.category})]}),(0,H.jsxs)(`div`,{className:`flex justify-between items-center pb-2 sm:pb-3 border-b border-border-color`,children:[(0,H.jsx)(`span`,{className:`text-muted-text`,children:F(`published`,t)}),(0,H.jsx)(`span`,{className:`font-bold text-card-text`,children:P(s.published_at,t)})]}),s.readTime&&(0,H.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,H.jsx)(`span`,{className:`text-muted-text`,children:F(`read_time`,t)}),(0,H.jsx)(`span`,{className:`font-bold text-card-text`,children:s.readTime})]})]})]})]}),s&&p.length>0&&(0,H.jsx)(I,{currentArticle:s,allArticles:p})]}),(0,H.jsxs)(`div`,{className:`lg:col-span-8 bg-card p-4 sm:p-6 md:p-8 rounded-2xl shadow-soft border border-border-color`,children:[(0,H.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 gap-3`,children:[(0,H.jsxs)(`h3`,{className:`text-xl sm:text-2xl font-bold text-card-text flex items-center gap-2`,children:[(0,H.jsx)(u,{className:`w-5 sm:w-6 h-5 sm:h-6 text-bbcRed`}),` `,F(`comments`,t)]}),(0,H.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,H.jsx)(`label`,{htmlFor:`sort-comments`,className:`text-xs font-bold text-muted-text`,children:F(`sort_by`,t)}),(0,H.jsx)(N,{id:`sort-comments`,value:G,onChange:Ce,options:[{value:`newest`,label:F(`newest`,t)},{value:`oldest`,label:F(`oldest`,t)},{value:`helpful`,label:F(`most_helpful`,t)},{value:`discussed`,label:F(`most_discussed`,t)}],className:`w-32`})]})]}),(0,H.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color overflow-hidden`,children:s.comments&&s.comments.length>0?(0,H.jsx)(`div`,{className:`divide-y divide-border-color`,children:[...s.comments].sort((e,t)=>{if(G===`newest`)return new Date(t.created_at).getTime()-new Date(e.created_at).getTime();if(G===`oldest`)return new Date(e.created_at).getTime()-new Date(t.created_at).getTime();if(G===`helpful`)return t.upvotes-t.downvotes-(e.upvotes-e.downvotes);if(G===`discussed`){let n=e.replies?.length||0;return(t.replies?.length||0)-n}return 0}).map(e=>(0,H.jsxs)(`div`,{className:`p-4`,children:[(0,H.jsxs)(`div`,{className:`flex items-start gap-3 mb-2`,children:[(0,H.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-gradient-to-br from-bbcRed to-orange-500 flex items-center justify-center font-bold text-white text-sm shadow-md flex-shrink-0`,children:e.user[0].toUpperCase()}),(0,H.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,H.jsx)(`button`,{type:`button`,onClick:()=>De(e.user),className:`font-bold text-sm text-card-text block hover:text-bbcRed cursor-pointer transition-colors bg-transparent border-none p-0`,children:e.user}),(0,H.jsx)(`span`,{className:`text-xs text-muted-text`,children:e.time})]})]}),(0,H.jsx)(`p`,{className:`text-sm text-card-text ml-12 leading-relaxed mb-3`,children:(()=>{let t=o.sanitize(e.text),n=document.createElement(`div`);n.innerHTML=t;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,V.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))})()}),(0,H.jsxs)(`div`,{className:`ml-12 flex items-center gap-3 text-xs`,children:[(0,H.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,H.jsx)(`button`,{type:`button`,onClick:()=>Se(e.id,`upvote`),className:`p-1 hover:text-success transition-colors text-muted-text vote-btn-up flex items-center justify-center min-w-[36px] min-h-[36px] ${re[e.id]===`upvote`?`text-success font-bold`:``}`,title:`Upvote`,children:(0,H.jsx)(T,{className:`w-3 h-3`})}),(0,H.jsx)(`span`,{className:`text-xs font-bold text-muted-text min-w-[20px] text-center`,children:e.upvotes-e.downvotes}),(0,H.jsx)(`button`,{type:`button`,onClick:()=>Se(e.id,`downvote`),className:`p-1 hover:text-danger transition-colors text-muted-text vote-btn-down flex items-center justify-center min-w-[36px] min-h-[36px] ${re[e.id]===`downvote`?`text-danger font-bold`:``}`,title:`Downvote`,children:(0,H.jsx)(y,{className:`w-3 h-3`})})]}),(0,H.jsx)(`button`,{type:`button`,onClick:()=>we(e.id),className:`px-3 py-1 hover:bg-bbcRed/10 dark:hover:bg-bbcRed/20 text-bbcRed rounded transition-colors font-bold text-sm`,children:F(`reply`,t)}),Z&&(0,H.jsx)(`button`,{type:`button`,onClick:()=>Ee(e.id),className:`text-danger hover:text-danger/80 p-1 rounded hover:bg-danger/10 dark:hover:bg-danger/20`,children:(0,H.jsx)(v,{className:`w-3 h-3`})})]}),e.replies&&e.replies.length>0&&(0,H.jsx)(`div`,{className:`ml-12 mt-4 space-y-3 border-l-2 border-border-color pl-4`,children:e.replies.map(e=>(0,H.jsxs)(`div`,{children:[(0,H.jsxs)(`div`,{className:`flex items-start gap-2 mb-1`,children:[(0,H.jsx)(`div`,{className:`w-7 h-7 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center font-bold text-white text-xs shadow-md flex-shrink-0`,children:e.user[0].toUpperCase()}),(0,H.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,H.jsx)(`span`,{className:`font-bold text-xs text-card-text block`,children:e.user}),(0,H.jsx)(`span`,{className:`text-xs text-muted-text`,children:e.time})]})]}),(0,H.jsx)(`p`,{className:`text-xs text-card-text ml-9 leading-relaxed`,children:(()=>{let t=o.sanitize(e.text),n=document.createElement(`div`);n.innerHTML=t;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,V.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))})()})]},e.id))}),ce===e.id&&(0,H.jsxs)(`div`,{className:`ml-12 mt-4 p-4 rounded-lg`,children:[(0,H.jsx)(`h4`,{className:`text-xs font-bold text-card-text mb-3`,children:F(`write_your_reply`,t)}),(0,H.jsx)(`textarea`,{value:K[e.id]||``,onChange:t=>oe(n=>({...n,[e.id]:t.target.value})),placeholder:F(`write_your_reply`,t),className:`w-full p-3 rounded-lg bg-card border border-border-color text-card-text focus:ring-2 focus:ring-bbcRed/30 focus:border-bbcRed outline-none transition-all resize-none text-sm mb-3 min-h-[80px]`}),(0,H.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,H.jsx)(`button`,{type:`button`,onClick:()=>we(e.id),className:`px-4 py-2 rounded-lg bg-card border border-border-color hover:bg-border-color transition-colors text-sm font-bold text-card-text`,children:F(`cancel`,t)}),(0,H.jsx)(`button`,{type:`button`,onClick:()=>Te(e.id),className:`px-4 py-2 rounded-lg bg-bbcRed hover:bg-bbcRed-hover text-white transition-colors text-sm font-bold shadow-soft hover:shadow-soft-hover`,children:F(`send_reply`,t)})]})]})]},e.id))}):(0,H.jsx)(`div`,{className:`text-center py-8 text-muted-text`,children:F(`no_comments_yet`,t)})}),(0,H.jsx)(`div`,{className:`border-t border-border-color pt-6`,children:i?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`h4`,{className:`font-bold text-sm text-card-text mb-4`,children:F(`write_your_comment`,t)}),(0,H.jsx)(`textarea`,{id:`comment-input`,className:`w-full p-4 rounded-xl border border-border-color bg-card text-card-text focus:ring-2 focus:ring-bbcRed/20 focus:border-bbcRed outline-none transition-all resize-y text-base min-h-[150px]`,placeholder:F(`write_your_comment`,t),value:j,onChange:e=>ne(e.target.value)}),(0,H.jsxs)(`div`,{className:`flex justify-between items-center mt-3 gap-4`,children:[(0,H.jsxs)(`div`,{className:`text-xs text-muted-text`,children:[j.length,`/5000`]}),B&&(0,H.jsx)(`div`,{className:`text-xs text-danger font-bold`,children:B}),(0,H.jsx)(`button`,{type:`button`,onClick:xe,className:`bg-bbcRed text-white px-6 py-2.5 rounded-full font-bold hover:bg-opacity-90 hover:shadow-lg hover:-translate-y-0.5 transition-all text-sm`,children:F(`post_comment`,t)})]})]}):(0,H.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-8 text-center`,children:[(0,H.jsx)(l,{className:`w-12 h-12 text-muted-text mb-3`}),(0,H.jsx)(`p`,{className:`text-card-text font-bold mb-3`,children:t===`bn`?`à¦®à¦¨à§à¦¤à¦¬à§à¦¯ à¦•à¦°à¦¤à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨`:`Sign in to comment`}),(0,H.jsx)(r,{to:`/login`,className:`bg-bbcRed text-white px-6 py-2 rounded-full font-bold hover:bg-opacity-90 transition-all`,children:F(`sign_in`,t)})]})})]})]}),ue&&(0,H.jsx)(`button`,{type:`button`,onClick:Oe,onKeyDown:e=>{e.key===`Escape`&&Oe()},className:`fixed inset-0 bg-black/50 dark:bg-black/70 z-[200] flex items-center justify-center p-4 border-none`,children:(0,H.jsxs)(`div`,{role:`dialog`,"aria-modal":`true`,"aria-labelledby":`profile-modal-title`,className:`bg-card rounded-2xl shadow-2xl border border-border-color max-w-md w-full max-h-[90vh] overflow-y-auto`,onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`sticky top-0 bg-card border-b border-border-color p-4 flex items-center justify-between`,children:[(0,H.jsxs)(`h3`,{className:`text-xl font-bold text-card-text`,children:[`ðŸ‘¤ `,F(`user_profile`,t)]}),(0,H.jsx)(`button`,{type:`button`,onClick:Oe,className:`p-2 hover:bg-muted-bg rounded-lg transition-colors`,children:(0,H.jsx)(C,{className:`w-5 h-5`})})]}),(0,H.jsx)(`div`,{id:`profile-content`,className:`p-6 space-y-4`,children:de?(0,H.jsx)(`div`,{className:`flex items-center justify-center py-8`,children:(0,H.jsx)(d,{className:`w-6 h-6 animate-spin text-bbcRed`})}):Y?(0,H.jsxs)(`div`,{className:`space-y-4`,children:[(0,H.jsxs)(`div`,{className:`flex items-center gap-4 pb-4 border-b border-border-color`,children:[(0,H.jsx)(`div`,{className:`w-16 h-16 rounded-full bg-gradient-to-br from-bbcRed to-orange-500 flex items-center justify-center font-bold text-white text-2xl shadow-lg`,children:Y.displayName[0].toUpperCase()}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`h4`,{className:`text-lg font-bold text-card-text`,children:Y.displayName}),(0,H.jsx)(`p`,{className:`text-xs text-muted-text`,children:Y.email})]})]}),(0,H.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,H.jsxs)(`div`,{className:`bg-muted-bg p-3 rounded-lg border border-border-color`,children:[(0,H.jsx)(`div`,{className:`text-2xl font-bold text-bbcRed`,children:Y.commentCount}),(0,H.jsx)(`div`,{className:`text-xs text-muted-text`,children:F(`comments_count`,t)})]}),(0,H.jsxs)(`div`,{className:`bg-muted-bg p-3 rounded-lg border border-border-color`,children:[(0,H.jsx)(`div`,{className:`text-2xl font-bold text-success`,children:Y.upvotes}),(0,H.jsx)(`div`,{className:`text-xs text-muted-text`,children:F(`received_likes`,t)})]})]}),Y.recentComments&&Y.recentComments.length>0&&(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`text-sm font-bold text-card-text mb-2`,children:F(`recent_comments`,t)}),(0,H.jsx)(`div`,{className:`space-y-2`,children:Y.recentComments.map(e=>(0,H.jsxs)(`div`,{className:`bg-muted-bg p-2 rounded-lg text-xs text-card-text border border-border-color`,children:[(0,H.jsxs)(`p`,{className:`mb-1`,children:[`"`,e.text,`"`]}),(0,H.jsxs)(`div`,{className:`flex items-center justify-between text-muted-text text-xs`,children:[(0,H.jsx)(`span`,{children:e.time}),(0,H.jsxs)(`span`,{children:[(0,H.jsx)(T,{className:`w-3 h-3 inline-block mr-1`}),` `,e.upvotes]})]})]},`comment-${e.text.substring(0,20)}`))})]})]}):(0,H.jsx)(`div`,{className:`text-center py-8`,children:(0,H.jsx)(`p`,{className:`text-muted-text`,children:F(`user_profile_not_found`,t)})})})]})})]})};export{ue as default};