import{a as e,d as t,p as n,r,v as i}from"./vendor-react-DDJd_2jx.js";import{M as a,R as o,b as s,g as c,u as l,v as u}from"./vendor-ui-CMDLMZmI.js";import"./vendor-utils-DddD4xHt.js";import{_ as d,c as f,d as p,f as m,g as h,h as g,n as _,p as v,u as y}from"./index-CZV8Jvye.js";var b=i(),x=r(),S=()=>{let{language:r}=d(),i=t(),[y,S]=(0,b.useState)([]),[C,w]=(0,b.useState)([]),[T,E]=(0,b.useState)(!0),[D,O]=n(),k=D.get(`status`)||`all`,A=D.get(`search`)||``,j=D.get(`cat`)||``,M=(0,b.useCallback)(async()=>{E(!0);try{let e=await _.getArticles({status:k,search:A,cat:j,lang:r});e.success&&e.articles&&S(e.articles)}catch{g(h(`server_error`,r),`error`)}finally{E(!1)}},[k,A,j,r]),N=(0,b.useCallback)(async()=>{try{let e=await _.getCategories();e.success&&e.data&&w(e.data)}catch{g(h(`server_error`,r),`error`)}},[r]);(0,b.useEffect)(()=>{M(),N()},[M,N]);let P=(0,b.useCallback)(async e=>{if(window.confirm(h(`confirm_delete_article`,r)))try{let t=await _.deleteArticle(e);t.success?(g(h(`article_deleted_successfully`,r)),S(t=>t.filter(t=>t.id!==e))):g(t.error||h(`failed_to_delete_article`,r),`error`)}catch{g(h(`server_error`,r),`error`)}},[r]),F=(e,t)=>{let n=new URLSearchParams(D.toString());t?n.set(e,t):n.delete(e),O(n)};return T?(0,x.jsx)(`div`,{className:`text-center py-8`,children:(0,x.jsx)(a,{className:`w-10 h-10 animate-spin text-bbcRed`})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-start md:items-center gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,x.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:h(`manage_articles`,r)}),(0,x.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-2 w-full md:w-auto`,children:[(0,x.jsxs)(`form`,{onSubmit:e=>{e.preventDefault()},className:`flex gap-2 w-full md:w-auto flex-wrap sm:flex-nowrap`,children:[(0,x.jsx)(`input`,{type:`text`,name:`search`,placeholder:h(`search_articles`,r),value:A,onChange:e=>F(`search`,e.target.value),className:`p-2 sm:p-2.5 rounded border border-border-color bg-card text-xs sm:text-sm w-full sm:w-auto md:w-48 focus:border-bbcRed outline-none`}),(0,x.jsx)(f,{value:j,onChange:e=>F(`cat`,e),options:[{value:``,label:h(`all_categories`,r)},...C.map(e=>({value:e.id,label:r===`bn`?e.title_bn:e.title_en}))],className:`w-full sm:w-32 md:w-40`}),(0,x.jsx)(`button`,{type:`submit`,className:`bg-muted-bg p-2 rounded hover:bg-bbcRed hover:text-white transition-colors flex-shrink-0`,children:(0,x.jsx)(c,{className:`w-4 h-4`})})]}),(0,x.jsxs)(e,{to:`/admin/articles/new`,className:`bg-bbcRed text-white px-4 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap justify-center`,children:[(0,x.jsx)(u,{className:`w-4 h-4`}),` `,(0,x.jsx)(`span`,{className:`hidden sm:inline`,children:h(`new`,r)})]})]})]}),(0,x.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:y.length===0?(0,x.jsxs)(`div`,{className:`p-8 text-center text-muted-text`,children:[(0,x.jsx)(o,{className:`w-16 h-16 mx-auto mb-4 text-border-color`}),(0,x.jsx)(`p`,{className:`text-lg font-bold mb-2`,children:h(`no_articles_found`,r)}),(0,x.jsx)(`p`,{className:`text-sm mb-4`,children:h(`no_articles_matching_criteria`,r)}),(0,x.jsxs)(e,{to:`/admin/articles/new`,className:`bg-bbcRed text-white px-4 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity flex items-center gap-2 w-fit mx-auto`,children:[(0,x.jsx)(u,{className:`w-4 h-4`}),` `,h(`create_new_article`,r)]})]}):(0,x.jsx)(`div`,{className:`grid grid-cols-1 gap-4 p-4`,children:y.map(t=>{let n={published:`bg-success/10 dark:bg-success/20 text-success border-success/30 dark:border-success/50`,draft:`bg-warning/10 dark:bg-warning/20 text-warning border-warning/30 dark:border-warning/50`,archived:`bg-danger/10 dark:bg-danger/20 text-danger border-danger/30 dark:border-danger/50`},a=n[t.status]||n.draft,o=m(t.published_at,r),c=m(t.created_at,r);return(0,x.jsxs)(`button`,{onClick:()=>v(window.innerWidth<768,i,`/admin/articles/${t.id}/edit`),type:`button`,className:`bg-card p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors cursor-pointer w-full text-left`,children:[(0,x.jsxs)(`div`,{className:`flex items-start justify-between mb-3 gap-3`,children:[(0,x.jsxs)(`div`,{className:`flex items-start gap-3 min-w-0 flex-1`,children:[(0,x.jsx)(`img`,{src:t.image||`https://placehold.co/600x400/1a1a1a/FFF?text=BreachTimes`,alt:``,className:`w-12 h-12 rounded object-cover bg-muted-bg shrink-0`}),(0,x.jsxs)(`div`,{className:`truncate flex-1`,children:[(0,x.jsx)(e,{to:`/admin/articles/${t.id}/edit`,className:`font-bold text-sm block hover:text-bbcRed truncate font-hind`,children:p(t.title_bn||t.title_en||h(`no_title`,r))}),t.title_bn&&t.title_en&&(0,x.jsx)(`p`,{className:`text-xs text-muted-text truncate`,children:p(t.title_en)}),(0,x.jsxs)(`div`,{className:`flex gap-2 items-center mt-2 flex-wrap`,children:[(0,x.jsx)(`span`,{className:`px-2 py-1 rounded-full text-xs font-bold border ${a}`,children:p(t.status)}),t.category&&(0,x.jsx)(`span`,{className:`text-xs bg-muted-bg text-card-text px-2 py-1 rounded-full border border-border-color`,children:p(t.category)})]})]})]}),(0,x.jsxs)(`div`,{className:`flex items-center gap-1 shrink-0 ml-2`,children:[(0,x.jsx)(e,{to:`/admin/articles/${t.id}/edit`,className:`p-2 text-card-text hover:bg-muted-bg hover:text-bbcRed rounded transition-colors`,children:(0,x.jsx)(s,{className:`w-4 h-4`})}),(0,x.jsx)(`button`,{type:`button`,onClick:()=>P(t.id),className:`p-2 text-danger hover:bg-danger/10 dark:hover:bg-danger/20 rounded transition-colors`,children:(0,x.jsx)(l,{className:`w-4 h-4`})})]})]}),(0,x.jsxs)(`div`,{className:`text-xs text-muted-text space-y-1`,children:[(0,x.jsxs)(`div`,{children:[(0,x.jsxs)(`span`,{className:`font-bold`,children:[h(`pub`,r),`:`]}),` `,o]}),(0,x.jsxs)(`div`,{children:[(0,x.jsxs)(`span`,{className:`font-bold`,children:[h(`cr`,r),`:`]}),` `,c]})]})]},t.id)})})})]})};export{S as default};