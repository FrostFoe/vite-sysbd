import{h as e,r as t,v as n}from"./vendor-react-DDJd_2jx.js";import{L as r,b as i,u as a,v as o}from"./vendor-ui-dKvDeG77.js";import"./vendor-utils-DddD4xHt.js";import{_ as s,g as c,n as l}from"./index-CYE6t3e8.js";var ee=e(),u=n(),d=t(),f=e=>{let t=(0,ee.c)(90),{isOpen:n,onClose:r,onSave:i,category:a,language:o}=e,s;t[0]===a?s=t[1]:(s=()=>a?{...a}:{id:``,title_bn:``,title_en:``,color:`var(--color-bbcRed)`},t[0]=a,t[1]=s);let[l,f]=(0,u.useState)(s),p;if(a){let e;t[2]===a?e=t[3]:(e={...a},t[2]=a,t[3]=e),p=e}else{let e;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(e={id:``,title_bn:``,title_en:``,color:`var(--color-bbcRed)`},t[4]=e):e=t[4],p=e}let m=p,h,g;t[5]===m?(h=t[6],g=t[7]):(h=()=>{f(m)},g=[m],t[5]=m,t[6]=h,t[7]=g),(0,u.useEffect)(h,g);let _;t[8]!==l||t[9]!==i?(_=e=>{e.preventDefault(),i(l)},t[8]=l,t[9]=i,t[10]=_):_=t[10];let v=_;if(!n)return null;let y;t[11]!==a?.id||t[12]!==o?(y=a?.id?c(`edit_category`,o):c(`new_category`,o),t[11]=a?.id,t[12]=o,t[13]=y):y=t[13];let b;t[14]===y?b=t[15]:(b=(0,d.jsx)(`h2`,{className:`text-xl font-bold mb-4`,children:y}),t[14]=y,t[15]=b);let x;t[16]===o?x=t[17]:(x=c(`id_slug`,o),t[16]=o,t[17]=x);let S;t[18]===x?S=t[19]:(S=(0,d.jsx)(`label`,{htmlFor:`category-id`,className:`block text-sm font-bold mb-1`,children:x}),t[18]=x,t[19]=S);let C=l.id||``,w;t[20]===l?w=t[21]:(w=e=>f({...l,id:e.target.value}),t[20]=l,t[21]=w);let te=!!a?.id,T;t[22]!==C||t[23]!==w||t[24]!==te?(T=(0,d.jsx)(`input`,{id:`category-id`,name:`id`,value:C,onChange:w,required:!0,readOnly:te,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none text-sm sm:text-base`}),t[22]=C,t[23]=w,t[24]=te,t[25]=T):T=t[25];let E;t[26]!==T||t[27]!==S?(E=(0,d.jsxs)(`div`,{children:[S,T]}),t[26]=T,t[27]=S,t[28]=E):E=t[28];let D;t[29]===o?D=t[30]:(D=c(`title_bangla`,o),t[29]=o,t[30]=D);let O;t[31]===D?O=t[32]:(O=(0,d.jsx)(`label`,{htmlFor:`category-title-bn`,className:`block text-sm font-bold mb-1`,children:D}),t[31]=D,t[32]=O);let k=l.title_bn||``,A;t[33]===l?A=t[34]:(A=e=>f({...l,title_bn:e.target.value}),t[33]=l,t[34]=A);let j;t[35]!==k||t[36]!==A?(j=(0,d.jsx)(`input`,{id:`category-title-bn`,name:`title_bn`,value:k,onChange:A,required:!0,className:`w-full p-2.5 sm:p-3 text-sm sm:text-base rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind`}),t[35]=k,t[36]=A,t[37]=j):j=t[37];let M;t[38]!==O||t[39]!==j?(M=(0,d.jsxs)(`div`,{children:[O,j]}),t[38]=O,t[39]=j,t[40]=M):M=t[40];let N;t[41]===o?N=t[42]:(N=c(`title_english`,o),t[41]=o,t[42]=N);let P;t[43]===N?P=t[44]:(P=(0,d.jsx)(`label`,{htmlFor:`category-title-en`,className:`block text-xs sm:text-sm font-bold mb-1`,children:N}),t[43]=N,t[44]=P);let F=l.title_en||``,I;t[45]===l?I=t[46]:(I=e=>f({...l,title_en:e.target.value}),t[45]=l,t[46]=I);let L;t[47]!==F||t[48]!==I?(L=(0,d.jsx)(`input`,{id:`category-title-en`,name:`title_en`,value:F,onChange:I,required:!0,className:`w-full p-2.5 sm:p-3 text-sm sm:text-base rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind`}),t[47]=F,t[48]=I,t[49]=L):L=t[49];let R;t[50]!==P||t[51]!==L?(R=(0,d.jsxs)(`div`,{children:[P,L]}),t[50]=P,t[51]=L,t[52]=R):R=t[52];let z;t[53]===o?z=t[54]:(z=c(`color`,o),t[53]=o,t[54]=z);let B;t[55]===z?B=t[56]:(B=(0,d.jsx)(`label`,{htmlFor:`category-color`,className:`block text-sm font-bold mb-1`,children:z}),t[55]=z,t[56]=B);let V=l.color||`var(--color-bbcRed)`,H;t[57]===l?H=t[58]:(H=e=>f({...l,color:e.target.value}),t[57]=l,t[58]=H);let U=l.color||`var(--color-bbcRed)`,W;t[59]===U?W=t[60]:(W={color:U},t[59]=U,t[60]=W);let G;t[61]!==V||t[62]!==H||t[63]!==W?(G=(0,d.jsx)(`input`,{type:`color`,id:`category-color`,name:`color`,value:V,onChange:H,className:`w-full h-10 rounded cursor-pointer`,style:W}),t[61]=V,t[62]=H,t[63]=W,t[64]=G):G=t[64];let K;t[65]!==B||t[66]!==G?(K=(0,d.jsxs)(`div`,{children:[B,G]}),t[65]=B,t[66]=G,t[67]=K):K=t[67];let q;t[68]===o?q=t[69]:(q=c(`cancel`,o),t[68]=o,t[69]=q);let J;t[70]!==r||t[71]!==q?(J=(0,d.jsx)(`button`,{type:`button`,onClick:r,className:`px-4 py-2 text-sm font-bold text-muted-text hover:text-card-text hover:bg-muted-bg rounded-lg`,children:q}),t[70]=r,t[71]=q,t[72]=J):J=t[72];let Y;t[73]===o?Y=t[74]:(Y=c(`save`,o),t[73]=o,t[74]=Y);let X;t[75]===Y?X=t[76]:(X=(0,d.jsx)(`button`,{type:`submit`,className:`px-4 py-2 bg-bbcRed text-white rounded-lg font-bold text-sm hover:opacity-90 transition-opacity`,children:Y}),t[75]=Y,t[76]=X);let Z;t[77]!==J||t[78]!==X?(Z=(0,d.jsxs)(`div`,{className:`flex justify-end gap-2 mt-6`,children:[J,X]}),t[77]=J,t[78]=X,t[79]=Z):Z=t[79];let Q;t[80]!==v||t[81]!==E||t[82]!==M||t[83]!==R||t[84]!==K||t[85]!==Z?(Q=(0,d.jsxs)(`form`,{onSubmit:v,className:`space-y-4`,children:[E,M,R,K,Z]}),t[80]=v,t[81]=E,t[82]=M,t[83]=R,t[84]=K,t[85]=Z,t[86]=Q):Q=t[86];let $;return t[87]!==Q||t[88]!==b?($=(0,d.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[100]`,children:(0,d.jsxs)(`div`,{className:`bg-card w-full max-w-md p-6 rounded-xl shadow-2xl`,children:[b,Q]})}),t[87]=Q,t[88]=b,t[89]=$):$=t[89],$},p=()=>{let{language:e}=s(),[t,n]=(0,u.useState)([]),[ee,p]=(0,u.useState)(!0),[m,h]=(0,u.useState)(null),[g,_]=(0,u.useState)(!1),[v,y]=(0,u.useState)(null),b=(0,u.useCallback)(async()=>{p(!0);try{let e=await l.getCategories();if(e.success)n(e.data||[]);else throw Error(e.message||`Failed to fetch categories`)}catch{h(c(`failed_to_fetch_categories`,e))}finally{p(!1)}},[e]);(0,u.useEffect)(()=>{b()},[b]);let x=(e=null)=>{y(e),_(!0)},S=()=>{_(!1),y(null)},C=async e=>{try{await l.saveCategory(e),S(),b()}catch{}},w=async t=>{if(window.confirm(c(`confirm_delete_category`,e)))try{await l.deleteCategory(t),b()}catch{}};return(0,d.jsxs)(`div`,{children:[(0,d.jsx)(f,{isOpen:g,onClose:S,onSave:C,category:v,language:e}),(0,d.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,d.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:c(`manage_categories`,e)}),(0,d.jsxs)(`button`,{type:`button`,onClick:()=>x(),className:`bg-bbcRed text-white px-3 sm:px-4 py-2 rounded-lg font-bold text-sm sm:text-base flex items-center gap-2 whitespace-nowrap`,children:[(0,d.jsx)(o,{className:`w-4 h-4`}),` `,c(`new_category`,e)]})]}),(0,d.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:ee?(0,d.jsx)(`div`,{className:`p-8 text-center text-muted-text`,children:c(`loading`,e)}):m?(0,d.jsx)(`div`,{className:`p-8 text-center text-danger`,children:m}):t.length===0?(0,d.jsxs)(`div`,{className:`p-8 text-center text-muted-text`,children:[(0,d.jsx)(r,{className:`w-16 h-16 mx-auto mb-4 text-border-color`}),(0,d.jsx)(`p`,{className:`text-lg font-bold mb-2`,children:c(`no_categories_found`,e)})]}):(0,d.jsx)(`div`,{className:`grid grid-cols-1 gap-4 p-4`,children:t.map(e=>(0,d.jsx)(`div`,{className:`bg-card p-3 sm:p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors`,children:(0,d.jsxs)(`div`,{className:`flex items-start justify-between gap-2`,children:[(0,d.jsxs)(`div`,{className:`flex items-center gap-2 sm:gap-3 min-w-0`,children:[(0,d.jsx)(`div`,{className:`font-mono text-xs sm:text-sm font-bold text-card-text flex-shrink-0`,children:e.id}),(0,d.jsxs)(`div`,{className:`truncate`,children:[(0,d.jsx)(`div`,{className:`font-bold text-xs sm:text-sm truncate`,children:e.title_bn}),(0,d.jsx)(`div`,{className:`text-xs truncate`,children:e.title_en})]})]}),(0,d.jsxs)(`div`,{className:`flex items-center gap-2 flex-shrink-0`,children:[(0,d.jsx)(`div`,{className:`w-6 sm:w-8 h-6 sm:h-8 rounded-lg border border-border-color`,style:{backgroundColor:e.color}}),(0,d.jsx)(`div`,{className:`text-xs text-muted-text hidden md:block`,children:e.color})]}),(0,d.jsxs)(`div`,{className:`flex items-center gap-1 flex-shrink-0`,children:[(0,d.jsx)(`button`,{type:`button`,onClick:()=>x(e),className:`p-2 text-card-text hover:bg-muted-bg rounded`,children:(0,d.jsx)(i,{className:`w-4 h-4`})}),(0,d.jsx)(`button`,{type:`button`,onClick:()=>w(e.id),className:`p-2 text-danger hover:bg-danger/10 rounded`,children:(0,d.jsx)(a,{className:`w-4 h-4`})})]})]})},e.id))})})]})};export{p as default};