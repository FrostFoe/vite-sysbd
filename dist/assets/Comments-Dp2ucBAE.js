import{r as e}from"./rolldown-runtime-Ckerh37x.js";import{h as t,l as n,r,t as i}from"./vendor-react-BM5KEv9z.js";import{t as a}from"./vendor-BcXgp--U.js";import{O as o,Z as s,d as c}from"./vendor-ui-BPT_KSDl.js";import{d as l,f as u,h as d,m as f,n as p,o as m,r as h}from"./index-D7AVYnaX.js";var g=e(t(),1),_=e(i(),1),v=()=>{let e=n(),{data:t,isLoading:i,refetch:v}=d((0,g.useCallback)(()=>m.getAllComments(),[]),{showErrorToast:!0}),y=t?.comments||[],b=(0,g.useCallback)(async e=>{if(window.confirm(`এই মন্তব্য মুছে ফেলতে চান?`))try{let t=await m.deleteComment(e);t.success?(f(`মন্তব্য মুছে ফেলা হয়েছে!`),v()):f(t.error||`মন্তব্য মোছতে ব্যর্থ!`,`error`)}catch{f(`সার্ভার ত্রুটি!`,`error`)}},[v]);return(0,_.jsx)(h,{isLoading:i,children:(0,_.jsxs)(`div`,{className:`space-y-4 sm:space-y-6`,children:[(0,_.jsx)(`div`,{className:`flex justify-between items-center mb-4 sm:mb-6`,children:(0,_.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`পর্যবেক্ষণ`})}),(0,_.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:(0,_.jsx)(p,{isEmpty:y.length===0,title:`No Comments Found`,description:`There are currently no comments to moderate.`,icon:(0,_.jsx)(o,{className:`w-16 h-16 mx-auto`}),children:(0,_.jsx)(`div`,{className:`grid grid-cols-1 gap-3 sm:gap-4 p-3 sm:p-4`,children:y.map(t=>(0,_.jsxs)(`button`,{onClick:()=>u(window.innerWidth<768,e,`/admin/comments/${t.id}`),type:`button`,className:`bg-card p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors cursor-pointer w-full text-left`,children:[(0,_.jsxs)(`div`,{className:`flex items-start justify-between mb-3`,children:[(0,_.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0`,children:[(0,_.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-gradient-to-br from-bbcRed to-orange-600 flex items-center justify-center text-white text-sm font-bold`,children:t.user_name.charAt(0).toUpperCase()}),(0,_.jsxs)(`div`,{className:`truncate`,children:[(0,_.jsx)(`div`,{className:`font-bold text-sm truncate`,children:t.user_name}),(0,_.jsx)(`div`,{className:`text-xs text-muted-text truncate`,children:t.title_bn||`অজানা নিবন্ধ`})]})]}),(0,_.jsxs)(`div`,{className:`flex items-center gap-1 shrink-0 ml-2`,children:[(0,_.jsx)(`div`,{className:`text-xs text-muted-text hidden sm:block whitespace-nowrap`,children:l(t.created_at,`bn`)}),(0,_.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,_.jsx)(r,{to:`/article/${t.article_id}`,target:`_blank`,title:`View Article`,className:`text-muted-text hover:text-bbcRed hover:bg-bbcRed/10 p-2 rounded transition-colors`,children:(0,_.jsx)(s,{className:`w-4 h-4`})}),(0,_.jsx)(`button`,{type:`button`,onClick:()=>b(t.id),className:`text-danger hover:text-danger/80 hover:bg-danger/10 dark:hover:bg-danger/20 p-2 rounded transition-colors`,title:`Delete`,children:(0,_.jsx)(c,{className:`w-4 h-4`})})]})]})]}),(0,_.jsx)(`div`,{className:`text-sm text-card-text max-h-16 overflow-hidden prose prose-sm dark:prose-invert`,children:(()=>{let e=a.sanitize(t.text),n=document.createElement(`div`);n.innerHTML=e;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,g.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))})()}),(0,_.jsx)(`div`,{className:`text-xs text-muted-text mt-2 sm:hidden`,children:l(t.created_at,`bn`)})]},t.id))})})})]})})};export{v as default};