import{d as e,r as t,v as n}from"./vendor-react-DDJd_2jx.js";import{M as r,X as i,Y as a,nt as o}from"./vendor-ui-dKvDeG77.js";import"./vendor-utils-DddD4xHt.js";import{_ as s,d as c,g as l,h as u,n as d,p as f}from"./index-CIPjBYgy.js";var p=n(),m=t(),h=()=>{let{language:t}=s(),n=e(),[h,g]=(0,p.useState)([]),[_,v]=(0,p.useState)(!0),[y,b]=(0,p.useState)(!1),[x,S]=(0,p.useState)(null),[C,w]=(0,p.useState)(``),[T,E]=(0,p.useState)(``),D=(0,p.useCallback)(async()=>{v(!0);try{let e=await d.getUsers();e.success&&e.users?g(e.users):u(e.error||`Failed to fetch users`,`error`)}catch{u(l(`server_error`,t),`error`)}finally{v(!1)}},[t]);(0,p.useEffect)(()=>{D()},[D]);let O=(e,t)=>{S(e),w(t),E(``),b(!0)},k=()=>{b(!1),S(null)},A=async()=>{if(x)try{let e=await d.muteUser(x,T);e.success?(u(l(`user_muted_successfully`,t)),D(),k()):u(e.error||l(`failed_to_mute_user`,t),`error`)}catch{u(l(`server_error`,t),`error`)}},j=async e=>{if(window.confirm(l(`confirm_unmute_user`,t)))try{let n=await d.unmuteUser(e);n.success?(u(l(`user_unmuted_successfully`,t)),D()):u(n.error||l(`failed_to_unmute_user`,t),`error`)}catch{u(l(`server_error`,t),`error`)}};return _?(0,m.jsx)(`div`,{className:`text-center py-8`,children:(0,m.jsx)(r,{className:`w-10 h-10 animate-spin text-bbcRed`})}):(0,m.jsxs)(`div`,{className:`space-y-6`,children:[(0,m.jsx)(`h1`,{className:`text-2xl font-bold`,children:l(`users`,t)}),(0,m.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:h.length===0?(0,m.jsx)(`div`,{className:`p-8 text-center text-muted-text`,children:l(`no_users_found`,t)}):(0,m.jsx)(`div`,{className:`grid grid-cols-1 gap-4 p-4`,children:h.map(e=>{let r=!!e.is_muted;return(0,m.jsxs)(`button`,{onClick:()=>f(window.innerWidth<768,n,`/admin/users/${e.id}`),type:`button`,className:`bg-card p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors cursor-pointer w-full text-left`,children:[(0,m.jsxs)(`div`,{className:`flex items-start justify-between`,children:[(0,m.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0`,children:[(0,m.jsx)(`div`,{className:`w-12 h-12 rounded-full bg-gradient-to-br from-bbcRed to-orange-600 flex items-center justify-center text-white text-sm font-bold`,children:e.email.charAt(0).toUpperCase()}),(0,m.jsxs)(`div`,{className:`truncate`,children:[(0,m.jsx)(`div`,{className:`font-bold text-sm truncate`,children:e.email}),(0,m.jsxs)(`div`,{className:`text-xs text-muted-text truncate`,children:[`ID: `,e.id]}),(0,m.jsx)(`div`,{className:`mt-1 text-xs font-bold`,children:r?(0,m.jsxs)(`span`,{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full bg-danger/10 dark:bg-danger/20 text-danger`,children:[(0,m.jsx)(o,{className:`w-3 h-3`}),` `,l(`muted`,t)]}):(0,m.jsxs)(`span`,{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full bg-success/10 dark:bg-success/20 text-success`,children:[(0,m.jsx)(a,{className:`w-3 h-3`}),` `,l(`active`,t)]})})]})]}),(0,m.jsxs)(`div`,{className:`flex items-center gap-1 shrink-0 ml-2`,children:[(0,m.jsx)(`div`,{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${e.role===`admin`?`bg-danger/10 dark:bg-danger/20 text-danger`:`bg-muted-bg text-card-text`}`,children:e.role}),(0,m.jsx)(`div`,{className:`text-xs text-muted-text hidden sm:block`,children:new Date(e.created_at).toLocaleDateString()}),(0,m.jsx)(`div`,{className:`flex items-center gap-1`,children:e.role!==`admin`&&(r?(0,m.jsx)(`button`,{type:`button`,onClick:()=>j(e.id),className:`text-success hover:text-success/80 hover:bg-success/10 dark:hover:bg-success/20 p-2 rounded transition-colors`,title:l(`unmute`,t),children:(0,m.jsx)(a,{className:`w-4 h-4`})}):(0,m.jsx)(`button`,{type:`button`,onClick:()=>O(e.id,e.email),className:`text-warning hover:text-warning/80 hover:bg-warning/10 dark:hover:bg-warning/20 p-2 rounded transition-colors`,title:`Mute`,children:(0,m.jsx)(o,{className:`w-4 h-4`})}))})]})]}),r&&e.reason&&(0,m.jsxs)(`div`,{className:`mt-2 text-xs text-muted-text bg-danger/5 p-2 rounded`,children:[`Reason: `,c(e.reason)]})]},e.id)})})}),y&&(0,m.jsx)(`button`,{type:`button`,onClick:k,onKeyDown:e=>{e.key===`Escape`&&k()},className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 border-none`,children:(0,m.jsxs)(`div`,{role:`dialog`,"aria-modal":`true`,"aria-labelledby":`mute-dialog-title`,className:`bg-card rounded-xl border border-border-color shadow-xl max-w-md w-full p-6 animate-zoom-in`,onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:[(0,m.jsxs)(`div`,{className:`flex items-center gap-3 mb-4`,children:[(0,m.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-warning/10 dark:bg-warning/20 flex items-center justify-center text-warning dark:text-warning`,children:(0,m.jsx)(i,{className:`w-5 h-5`})}),(0,m.jsx)(`h2`,{className:`text-lg font-bold text-card-text`,children:l(`mute_user`,t)})]}),(0,m.jsxs)(`p`,{className:`text-sm text-muted-text mb-4`,children:[`You are about to mute`,` `,(0,m.jsx)(`span`,{className:`font-bold text-card-text`,children:C}),`. This user will no longer be able to post comments.`]}),(0,m.jsxs)(`div`,{className:`mb-4`,children:[(0,m.jsx)(`label`,{htmlFor:`mute-reason`,className:`block text-xs font-bold text-muted-text mb-2 uppercase tracking-wide`,children:l(`reason_optional`,t)}),(0,m.jsx)(`textarea`,{id:`mute-reason`,value:T,onChange:e=>E(e.target.value),placeholder:l(`enter_reason_for_muting`,t),className:`w-full p-3 rounded-lg border border-border-color bg-muted-bg text-card-text focus:ring-2 focus:ring-warning/20 focus:border-warning outline-none transition-all resize-none text-sm`,rows:3})]}),(0,m.jsxs)(`div`,{className:`flex gap-3 justify-end`,children:[(0,m.jsx)(`button`,{type:`button`,onClick:k,className:`px-4 py-2 rounded-lg bg-muted-bg hover:bg-border-color text-card-text font-bold transition-colors`,children:l(`cancel`,t)}),(0,m.jsxs)(`button`,{type:`button`,onClick:A,className:`px-4 py-2 rounded-lg bg-warning hover:bg-warning/80 text-white font-bold transition-colors flex items-center gap-2`,children:[(0,m.jsx)(o,{className:`w-4 h-4`}),` `,l(`mute_user`,t)]})]})]})})]})};export{h as default};