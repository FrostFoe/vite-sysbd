import{r as e}from"./rolldown-runtime-Ckerh37x.js";import{lt as t}from"./vendor-CzlevQ0X.js";import{l as n,t as r}from"./vendor-react-4tdSsti4.js";import{M as i,X as a,Y as o,rt as s}from"./vendor-ui-eoplT0e_.js";import{d as c,g as l,o as u,p as d}from"./index-BJHb7cah.js";var f=e(t(),1),p=e(r(),1),m=()=>{let e=n(),[t,r]=(0,f.useState)([]),[m,h]=(0,f.useState)(!0),[g,_]=(0,f.useState)(!1),[v,y]=(0,f.useState)(null),[b,x]=(0,f.useState)(``),[S,C]=(0,f.useState)(``),w=(0,f.useCallback)(async()=>{h(!0);try{let e=await u.getUsers();e.success&&e.users?r(e.users):l(e.error||`Failed to fetch users`,`error`)}catch{l(`সার্ভার ত্রুটি!`,`error`)}finally{h(!1)}},[]);(0,f.useEffect)(()=>{w()},[w]);let T=(e,t)=>{y(e),x(t),C(``),_(!0)},E=()=>{_(!1),y(null)},D=async()=>{if(v)try{let e=await u.muteUser(v,S);e.success?(l(`ব্যবহারকারীকে সফলভাবে মিউট করা হয়েছে`),w(),E()):l(e.error||`ব্যবহারকারীকে মিউট করতে ব্যর্থ`,`error`)}catch{l(`সার্ভার ত্রুটি!`,`error`)}},O=async e=>{if(window.confirm(`আপনি কি নিশ্চিত যে আপনি এই ব্যবহারকারীকে আনমিউট করতে চান?`))try{let t=await u.unmuteUser(e);t.success?(l(`ব্যবহারকারীকে সফলভাবে আনমিউট করা হয়েছে`),w()):l(t.error||`ব্যবহারকারীকে আনমিউট করতে ব্যর্থ`,`error`)}catch{l(`সার্ভার ত্রুটি!`,`error`)}};return m?(0,p.jsx)(`div`,{className:`text-center py-8`,children:(0,p.jsx)(i,{className:`w-10 h-10 animate-spin text-bbcRed`})}):(0,p.jsxs)(`div`,{className:`space-y-4 sm:space-y-6`,children:[(0,p.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`ব্যবহারকারী`}),(0,p.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:t.length===0?(0,p.jsx)(`div`,{className:`p-6 sm:p-8 text-center text-muted-text text-sm`,children:`কোনো ব্যবহারকারী পাওয়া যায়নি।`}):(0,p.jsx)(`div`,{className:`grid grid-cols-1 gap-3 sm:gap-4 p-3 sm:p-4`,children:t.map(t=>{let n=!!t.is_muted;return(0,p.jsxs)(`button`,{onClick:()=>d(window.innerWidth<768,e,`/admin/users/${t.id}`),type:`button`,className:`bg-card p-3 sm:p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors cursor-pointer w-full text-left`,children:[(0,p.jsxs)(`div`,{className:`flex items-start justify-between gap-2`,children:[(0,p.jsxs)(`div`,{className:`flex items-center gap-2 sm:gap-3 min-w-0`,children:[(0,p.jsx)(`div`,{className:`w-10 sm:w-12 h-10 sm:h-12 rounded-full bg-gradient-to-br from-bbcRed to-orange-600 flex items-center justify-center text-white text-xs sm:text-sm font-bold flex-shrink-0`,children:t.email.charAt(0).toUpperCase()}),(0,p.jsxs)(`div`,{className:`truncate`,children:[(0,p.jsx)(`div`,{className:`font-bold text-xs sm:text-sm truncate`,children:t.email}),(0,p.jsxs)(`div`,{className:`text-[10px] sm:text-xs text-muted-text truncate`,children:[`ID: `,t.id]}),(0,p.jsx)(`div`,{className:`mt-1 text-[10px] sm:text-xs font-bold`,children:n?(0,p.jsxs)(`span`,{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-danger/10 dark:bg-danger/20 text-danger whitespace-nowrap`,children:[(0,p.jsx)(s,{className:`w-3 h-3`}),` মিউট করা হয়েছে`]}):(0,p.jsxs)(`span`,{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-success/10 dark:bg-success/20 text-success whitespace-nowrap`,children:[(0,p.jsx)(o,{className:`w-3 h-3`}),` সক্রিয়`]})})]})]}),(0,p.jsxs)(`div`,{className:`flex items-center gap-1 flex-shrink-0`,children:[(0,p.jsx)(`div`,{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${t.role===`admin`?`bg-danger/10 dark:bg-danger/20 text-danger`:`bg-muted-bg text-card-text`}`,children:t.role}),(0,p.jsx)(`div`,{className:`text-xs text-muted-text hidden sm:block`,children:new Date(t.created_at).toLocaleDateString()}),(0,p.jsx)(`div`,{className:`flex items-center gap-1`,children:t.role!==`admin`&&(n?(0,p.jsx)(`button`,{type:`button`,onClick:()=>O(t.id),className:`text-success hover:text-success/80 hover:bg-success/10 dark:hover:bg-success/20 p-2 rounded transition-colors`,title:`আনমিউট`,children:(0,p.jsx)(o,{className:`w-4 h-4`})}):(0,p.jsx)(`button`,{type:`button`,onClick:()=>T(t.id,t.email),className:`text-warning hover:text-warning/80 hover:bg-warning/10 dark:hover:bg-warning/20 p-2 rounded transition-colors`,title:`মিউট`,children:(0,p.jsx)(s,{className:`w-4 h-4`})}))})]})]}),n&&t.reason&&(0,p.jsxs)(`div`,{className:`mt-2 text-xs text-muted-text bg-danger/5 p-2 rounded`,children:[`Reason: `,c(t.reason)]})]},t.id)})})}),g&&(0,p.jsx)(`button`,{type:`button`,onClick:E,onKeyDown:e=>{e.key===`Escape`&&E()},className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 border-none`,children:(0,p.jsxs)(`div`,{role:`dialog`,"aria-modal":`true`,"aria-labelledby":`mute-dialog-title`,className:`bg-card rounded-xl border border-border-color shadow-xl max-w-md w-full p-6 animate-zoom-in`,onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:[(0,p.jsxs)(`div`,{className:`flex items-center gap-3 mb-4`,children:[(0,p.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-warning/10 dark:bg-warning/20 flex items-center justify-center text-warning dark:text-warning`,children:(0,p.jsx)(a,{className:`w-5 h-5`})}),(0,p.jsx)(`h2`,{className:`text-lg font-bold text-card-text`,children:`ব্যবহারকারীকে মিউট করুন`})]}),(0,p.jsxs)(`p`,{className:`text-sm text-muted-text mb-4`,children:[`আপনি`,` `,(0,p.jsx)(`span`,{className:`font-bold text-card-text`,children:b}),`কে মিউট করতে চলেছেন। এই ব্যবহারকারী আর মন্তব্য পোস্ট করতে পারবেন না।`]}),(0,p.jsxs)(`div`,{className:`mb-4`,children:[(0,p.jsx)(`label`,{htmlFor:`mute-reason`,className:`block text-xs font-bold text-muted-text mb-2 uppercase tracking-wide`,children:`কারণ (ঐচ্ছিক)`}),(0,p.jsx)(`textarea`,{id:`mute-reason`,value:S,onChange:e=>C(e.target.value),placeholder:`এই ব্যবহারকারীকে মিউট করার কারণ লিখুন...`,className:`w-full p-3 rounded-lg border border-border-color bg-muted-bg text-card-text focus:ring-2 focus:ring-warning/20 focus:border-warning outline-none transition-all resize-none text-sm`,rows:3})]}),(0,p.jsxs)(`div`,{className:`flex gap-3 justify-end`,children:[(0,p.jsx)(`button`,{type:`button`,onClick:E,className:`px-4 py-2 rounded-lg bg-muted-bg hover:bg-border-color text-card-text font-bold transition-colors`,children:`বাতিল`}),(0,p.jsxs)(`button`,{type:`button`,onClick:D,className:`px-4 py-2 rounded-lg bg-warning hover:bg-warning/80 text-white font-bold transition-colors flex items-center gap-2`,children:[(0,p.jsx)(s,{className:`w-4 h-4`}),` ব্যবহারকারীকে মিউট করুন`]})]})]})})]})};export{m as default};