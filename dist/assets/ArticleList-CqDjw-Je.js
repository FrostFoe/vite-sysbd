import{a as e,d as t,p as n,r,v as i}from"./vendor-react-DDJd_2jx.js";import{M as a,R as o,b as s,g as c,u as l,v as u}from"./vendor-ui-CMDLMZmI.js";import"./vendor-utils-DddD4xHt.js";import{c as d,d as f,f as p,g as m,o as h,p as g,u as _,v}from"./index-CbvSX8E9.js";var y=i(),b=r(),x=()=>{let{language:r}=v(),i=t(),[_,x]=(0,y.useState)([]),[S,C]=(0,y.useState)([]),[w,T]=(0,y.useState)(!0),[E,D]=n(),O=E.get(`status`)||`all`,k=E.get(`search`)||``,A=E.get(`cat`)||``,j=(0,y.useCallback)(async()=>{T(!0);try{let e=await h.getArticles({status:O,search:k,cat:A,lang:`bn`});e.success&&e.articles&&x(e.articles)}catch{m(`সার্ভার ত্রুটি!`,`error`)}finally{T(!1)}},[O,k,A]),M=(0,y.useCallback)(async()=>{try{let e=await h.getCategories();e.success&&e.data&&C(e.data)}catch{m(`সার্ভার ত্রুটি!`,`error`)}},[]);(0,y.useEffect)(()=>{j(),M()},[j,M]);let N=(0,y.useCallback)(async e=>{if(window.confirm(`আপনি কি নিশ্চিত এই নিবন্ধটি মুছে ফেলতে চান? এটি উভয় ভাষার সংস্করণ মুছে দেবে।`))try{let t=await h.deleteArticle(e);t.success?(m(`নিবন্ধ সফলভাবে মুছে ফেলা হয়েছে`),x(t=>t.filter(t=>t.id!==e))):m(t.error||`নিবন্ধ মোছতে ব্যর্থ!`,`error`)}catch{m(`সার্ভার ত্রুটি!`,`error`)}},[]),P=(e,t)=>{let n=new URLSearchParams(E.toString());t?n.set(e,t):n.delete(e),D(n)};return w?(0,b.jsx)(`div`,{className:`text-center py-8`,children:(0,b.jsx)(a,{className:`w-10 h-10 animate-spin text-bbcRed`})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-start md:items-center gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,b.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`নিবন্ধ পরিচালনা করুন`}),(0,b.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-2 w-full md:w-auto`,children:[(0,b.jsxs)(`form`,{onSubmit:e=>{e.preventDefault()},className:`flex gap-2 w-full md:w-auto flex-wrap sm:flex-nowrap`,children:[(0,b.jsx)(`input`,{type:`text`,name:`search`,placeholder:`নিবন্ধ খুঁজুন...`,value:k,onChange:e=>P(`search`,e.target.value),className:`p-2 sm:p-2.5 rounded border border-border-color bg-card text-xs sm:text-sm w-full sm:w-auto md:w-48 focus:border-bbcRed outline-none`}),(0,b.jsx)(d,{value:A,onChange:e=>P(`cat`,e),options:[{value:``,label:`সকল বিভাগ`},...S.map(e=>({value:e.id,label:e.title_bn}))],className:`w-full sm:w-32 md:w-40`}),(0,b.jsx)(`button`,{type:`submit`,className:`bg-muted-bg p-2 rounded hover:bg-bbcRed hover:text-white transition-colors flex-shrink-0`,children:(0,b.jsx)(c,{className:`w-4 h-4`})})]}),(0,b.jsxs)(e,{to:`/admin/articles/new`,className:`bg-bbcRed text-white px-4 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap justify-center`,children:[(0,b.jsx)(u,{className:`w-4 h-4`}),` `,(0,b.jsx)(`span`,{className:`hidden sm:inline`,children:`নতুন`})]})]})]}),(0,b.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:_.length===0?(0,b.jsxs)(`div`,{className:`p-8 text-center text-muted-text`,children:[(0,b.jsx)(o,{className:`w-16 h-16 mx-auto mb-4 text-border-color`}),(0,b.jsx)(`p`,{className:`text-lg font-bold mb-2`,children:`কোনো নিবন্ধ পাওয়া যায়নি`}),(0,b.jsx)(`p`,{className:`text-sm mb-4`,children:`আপনার মানদণ্ডের সাথে মেলে এমন কোনো নিবন্ধ নেই।`}),(0,b.jsxs)(e,{to:`/admin/articles/new`,className:`bg-bbcRed text-white px-4 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity flex items-center gap-2 w-fit mx-auto`,children:[(0,b.jsx)(u,{className:`w-4 h-4`}),` নতুন নিবন্ধ তৈরি করুন`]})]}):(0,b.jsx)(`div`,{className:`grid grid-cols-1 gap-4 p-4`,children:_.map(t=>{let n={published:`bg-success/10 dark:bg-success/20 text-success border-success/30 dark:border-success/50`,draft:`bg-warning/10 dark:bg-warning/20 text-warning border-warning/30 dark:border-warning/50`,archived:`bg-danger/10 dark:bg-danger/20 text-danger border-danger/30 dark:border-danger/50`},a=n[t.status]||n.draft,o=p(t.published_at,r),c=p(t.created_at,r);return(0,b.jsxs)(`button`,{onClick:()=>g(window.innerWidth<768,i,`/admin/articles/${t.id}/edit`),type:`button`,className:`bg-card p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors cursor-pointer w-full text-left`,children:[(0,b.jsxs)(`div`,{className:`flex items-start justify-between mb-3 gap-3`,children:[(0,b.jsxs)(`div`,{className:`flex items-start gap-3 min-w-0 flex-1`,children:[(0,b.jsx)(`img`,{src:t.image||`https://placehold.co/600x400/1a1a1a/FFF?text=BreachTimes`,alt:``,className:`w-12 h-12 rounded object-cover bg-muted-bg shrink-0`}),(0,b.jsxs)(`div`,{className:`truncate flex-1`,children:[(0,b.jsx)(e,{to:`/admin/articles/${t.id}/edit`,className:`font-bold text-sm block hover:text-bbcRed truncate font-hind`,children:f(t.title_bn||t.title_en||`(শিরোনাম নেই)`)}),t.title_bn&&t.title_en&&(0,b.jsx)(`p`,{className:`text-xs text-muted-text truncate`,children:f(t.title_en)}),(0,b.jsxs)(`div`,{className:`flex gap-2 items-center mt-2 flex-wrap`,children:[(0,b.jsx)(`span`,{className:`px-2 py-1 rounded-full text-xs font-bold border ${a}`,children:f(t.status)}),t.category&&(0,b.jsx)(`span`,{className:`text-xs bg-muted-bg text-card-text px-2 py-1 rounded-full border border-border-color`,children:f(t.category)})]})]})]}),(0,b.jsxs)(`div`,{className:`flex items-center gap-1 shrink-0 ml-2`,children:[(0,b.jsx)(e,{to:`/admin/articles/${t.id}/edit`,className:`p-2 text-card-text hover:bg-muted-bg hover:text-bbcRed rounded transition-colors`,children:(0,b.jsx)(s,{className:`w-4 h-4`})}),(0,b.jsx)(`button`,{type:`button`,onClick:()=>N(t.id),className:`p-2 text-danger hover:bg-danger/10 dark:hover:bg-danger/20 rounded transition-colors`,children:(0,b.jsx)(l,{className:`w-4 h-4`})})]})]}),(0,b.jsxs)(`div`,{className:`text-xs text-muted-text space-y-1`,children:[(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`span`,{className:`font-bold`,children:`প্রকাশিত:`}),` `,o]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`span`,{className:`font-bold`,children:`তৈরি:`}),` `,c]})]})]},t.id)})})})]})};export{x as default};