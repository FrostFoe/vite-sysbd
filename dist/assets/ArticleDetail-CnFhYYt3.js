import{f as e,h as t,r as n,v as r}from"./vendor-react-DDJd_2jx.js";import{t as i}from"./vendor-ByUF73EW.js";import{E as a,H as o,J as s,M as c,O as l,R as u,S as d,V as ee,W as f,d as p,et as m,f as te,h as ne,i as re,j as h,n as g,r as _,s as v,u as y,y as ie,z as b}from"./vendor-ui-dKvDeG77.js";import"./vendor-utils-DddD4xHt.js";import{_ as x,c as S,d as C,f as w,g as T,h as E,m as D,n as O,r as k,t as A,u as j}from"./index-Dl8FHqTb.js";var M=t(),N=r(),P=n(),F=e=>{let t=(0,M.c)(43),{src:n,alt:r,title:i,className:a,width:s,height:c,caption:l,showCaption:u}=e,d=r===void 0?``:r,f=a===void 0?``:a,p=u===void 0?!0:u,[m,te]=(0,N.useState)(!0),[ne,re]=(0,N.useState)(!1),[h,g]=(0,N.useState)(!0),_;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(_=()=>{te(!1)},t[0]=_):_=t[0];let v=_,y;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(y=()=>{te(!1),re(!0)},t[1]=y):y=t[1];let ie=y,b;t[2]===h?b=t[3]:(b=()=>{g(!h)},t[2]=h,t[3]=b);let x=b;if(!h){let e=`relative w-full bg-muted-bg border border-border-color rounded-lg flex items-center justify-center cursor-pointer ${f}`,n;t[4]===x?n=t[5]:(n=e=>{(e.key===`Enter`||e.key===` `)&&x()},t[4]=x,t[5]=n);let r=h?`Hide image`:`Show image`,i;t[6]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,P.jsxs)(`div`,{className:`text-center p-4`,children:[(0,P.jsx)(o,{className:`w-8 h-8 mx-auto text-muted-text`}),(0,P.jsx)(`p`,{className:`mt-2 text-sm text-muted-text`,children:`Image hidden`}),(0,P.jsx)(`p`,{className:`text-xs text-muted-text`,children:`Click to show`})]}),t[6]=i):i=t[6];let a;return t[7]!==e||t[8]!==n||t[9]!==r||t[10]!==x?(a=(0,P.jsx)(`button`,{type:`button`,className:e,onClick:x,onKeyDown:n,"aria-label":r,children:i}),t[7]=e,t[8]=n,t[9]=r,t[10]=x,t[11]=a):a=t[11],a}if(ne){let e=`relative w-full bg-muted-bg border border-border-color rounded-lg flex items-center justify-center ${f}`,r,i;t[12]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,P.jsx)(`div`,{className:`bg-muted-bg border-2 border-dashed border-border-color rounded-xl w-16 h-16 mx-auto`}),i=(0,P.jsx)(`p`,{className:`mt-2 text-sm text-muted-text`,children:`Image failed to load`}),t[12]=r,t[13]=i):(r=t[12],i=t[13]);let a;t[14]===n?a=t[15]:(a=(0,P.jsxs)(`div`,{className:`text-center p-4`,children:[r,i,(0,P.jsx)(`p`,{className:`text-xs text-muted-text`,children:n})]}),t[14]=n,t[15]=a);let o;return t[16]!==a||t[17]!==e?(o=(0,P.jsx)(`div`,{className:e,children:a}),t[16]=a,t[17]=e,t[18]=o):o=t[18],o}let S=`relative ${f}`,C;t[19]===m?C=t[20]:(C=m&&(0,P.jsx)(`div`,{className:`absolute inset-0 bg-muted-bg animate-pulse rounded-lg flex items-center justify-center`,children:(0,P.jsx)(`span`,{className:`text-sm text-muted-text`,children:`Loading...`})}),t[19]=m,t[20]=C);let w=`w-full h-auto rounded-lg ${m?`opacity-0`:`opacity-100`} transition-opacity duration-300`,T;t[21]!==d||t[22]!==c||t[23]!==n||t[24]!==w||t[25]!==i||t[26]!==s?(T=(0,P.jsx)(`img`,{src:n,alt:d,title:i,width:s,height:c,onLoad:v,onError:ie,className:w}),t[21]=d,t[22]=c,t[23]=n,t[24]=w,t[25]=i,t[26]=s,t[27]=T):T=t[27];let E;t[28]!==l||t[29]!==p?(E=p&&l&&(0,P.jsx)(`figcaption`,{className:`mt-2 text-sm text-center text-muted-text italic`,children:l}),t[28]=l,t[29]=p,t[30]=E):E=t[30];let D=h?`Hide image`:`Show image`,O;t[31]===h?O=t[32]:(O=h?(0,P.jsx)(o,{className:`w-4 h-4`}):(0,P.jsx)(ee,{className:`w-4 h-4`}),t[31]=h,t[32]=O);let k;t[33]!==D||t[34]!==O||t[35]!==x?(k=(0,P.jsx)(`button`,{type:`button`,onClick:x,className:`absolute top-2 right-2 p-1.5 bg-black/50 hover:bg-black/70 text-white rounded-full transition-all opacity-0 hover:opacity-100 group-hover:opacity-100`,"aria-label":D,children:O}),t[33]=D,t[34]=O,t[35]=x,t[36]=k):k=t[36];let A;return t[37]!==T||t[38]!==E||t[39]!==k||t[40]!==S||t[41]!==C?(A=(0,P.jsxs)(`figure`,{className:S,children:[C,T,E,k]}),t[37]=T,t[38]=E,t[39]=k,t[40]=S,t[41]=C,t[42]=A):A=t[42],A},I=t(),L=e=>{let t=(0,I.c)(52),{src:n,alt:r,title:i,className:a,width:o,height:s,poster:c,caption:u,showCaption:ee,loop:f,muted:p,controls:m}=e,te=r===void 0?``:r,ne=a===void 0?``:a,h=o===void 0?`100%`:o,g=s===void 0?`auto`:s,v=ee===void 0?!0:ee,y=f===void 0?!1:f,b=p===void 0?!1:p,x=m===void 0?!0:m,[S,C]=(0,N.useState)(!1),[w,T]=(0,N.useState)(b),[E,D]=(0,N.useState)(!0),[O,k]=(0,N.useState)(!1),A=(0,N.useRef)(null),j;t[0]===S?j=t[1]:(j=()=>{A.current&&(S?(A.current.pause(),C(!1)):(A.current.play(),C(!0)))},t[0]=S,t[1]=j);let M=j,F;t[2]===w?F=t[3]:(F=()=>{A.current&&(A.current.muted=!w,T(!w))},t[2]=w,t[3]=F);let L=F,R;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(R=()=>{D(!0)},t[4]=R):R=t[4];let ae=R,z;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(z=()=>{D(!1)},t[5]=z):z=t[5];let oe=z,B;t[6]===Symbol.for(`react.memo_cache_sentinel`)?(B=()=>{D(!1),k(!0)},t[6]=B):B=t[6];let se=B,V;t[7]===y?V=t[8]:(V=()=>{A.current&&A.current.currentTime>=A.current.duration-.1&&!y&&C(!1)},t[7]=y,t[8]=V);let H=V,U;t[9]===y?U=t[10]:(U=()=>{y||C(!1)},t[9]=y,t[10]=U);let W=U;if(O){let e=`relative w-full bg-muted-bg border border-border-color rounded-lg flex flex-col items-center justify-center ${ne}`,r,i;t[11]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,P.jsx)(`div`,{className:`bg-muted-bg border-2 border-dashed border-border-color rounded-xl w-16 h-16 mx-auto flex items-center justify-center`,children:(0,P.jsx)(ie,{className:`w-6 h-6 text-muted-text`})}),i=(0,P.jsx)(`p`,{className:`mt-2 text-sm text-muted-text`,children:`Video failed to load`}),t[11]=r,t[12]=i):(r=t[11],i=t[12]);let a;t[13]===n?a=t[14]:(a=(0,P.jsxs)(`div`,{className:`p-4 text-center`,children:[r,i,(0,P.jsx)(`p`,{className:`text-xs text-muted-text`,children:n})]}),t[13]=n,t[14]=a);let o;return t[15]!==e||t[16]!==a?(o=(0,P.jsx)(`div`,{className:e,children:a}),t[15]=e,t[16]=a,t[17]=o):o=t[17],o}let ce=`relative ${ne}`,G;t[18]===E?G=t[19]:(G=E&&(0,P.jsx)(`div`,{className:`absolute inset-0 bg-card flex items-center justify-center`,children:(0,P.jsx)(`div`,{className:`animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-white`})}),t[18]=E,t[19]=G);let K=`w-full h-auto ${E?`opacity-0`:`opacity-100`} transition-opacity duration-300`,q,J;t[20]===Symbol.for(`react.memo_cache_sentinel`)?(q=()=>C(!0),J=()=>C(!1),t[20]=q,t[21]=J):(q=t[20],J=t[21]);let Y=te||`Video content`,X;t[22]!==x||t[23]!==H||t[24]!==W||t[25]!==g||t[26]!==w||t[27]!==y||t[28]!==c||t[29]!==n||t[30]!==K||t[31]!==Y||t[32]!==i||t[33]!==h?(X=(0,P.jsx)(`video`,{ref:A,src:n,poster:c,loop:y,muted:w,controls:x,width:h,height:g,title:i,className:K,onPlay:q,onPause:J,onEnded:W,onTimeUpdate:H,onLoadStart:ae,onCanPlay:oe,onError:se,"aria-label":Y}),t[22]=x,t[23]=H,t[24]=W,t[25]=g,t[26]=w,t[27]=y,t[28]=c,t[29]=n,t[30]=K,t[31]=Y,t[32]=i,t[33]=h,t[34]=X):X=t[34];let Z;t[35]!==x||t[36]!==L||t[37]!==M||t[38]!==w||t[39]!==S?(Z=!x&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity`,children:(0,P.jsx)(`button`,{type:`button`,onClick:M,className:`bg-black/50 hover:bg-black/70 text-white p-4 rounded-full transition-all`,"aria-label":S?`Pause video`:`Play video`,children:S?(0,P.jsx)(d,{className:`w-8 h-8`}):(0,P.jsx)(ie,{className:`w-8 h-8`})})}),(0,P.jsxs)(`div`,{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 opacity-0 hover:opacity-100 transition-opacity flex justify-between items-center`,children:[(0,P.jsx)(`button`,{type:`button`,onClick:L,className:`text-white hover:text-white/80`,"aria-label":w?`Unmute video`:`Mute video`,children:w?(0,P.jsx)(_,{className:`w-5 h-5`}):(0,P.jsx)(re,{className:`w-5 h-5`})}),(0,P.jsx)(`button`,{type:`button`,onClick:()=>{A.current&&A.current.requestFullscreen?.()},className:`text-white hover:text-white/80`,"aria-label":`Enter fullscreen`,children:(0,P.jsx)(l,{className:`w-5 h-5`})})]})]}),t[35]=x,t[36]=L,t[37]=M,t[38]=w,t[39]=S,t[40]=Z):Z=t[40];let Q;t[41]!==G||t[42]!==X||t[43]!==Z?(Q=(0,P.jsxs)(`div`,{className:`relative bg-black rounded-lg overflow-hidden`,children:[G,X,Z]}),t[41]=G,t[42]=X,t[43]=Z,t[44]=Q):Q=t[44];let $;t[45]!==u||t[46]!==v?($=v&&u&&(0,P.jsx)(`figcaption`,{className:`mt-2 text-sm text-center text-muted-text italic`,children:u}),t[45]=u,t[46]=v,t[47]=$):$=t[47];let le;return t[48]!==ce||t[49]!==Q||t[50]!==$?(le=(0,P.jsxs)(`figure`,{className:ce,children:[Q,$]}),t[48]=ce,t[49]=Q,t[50]=$,t[51]=le):le=t[51],le},R=({content:e,className:t=``})=>{let n=D(e);return(0,P.jsx)(`div`,{className:`prose max-w-none ${t}`,children:(()=>{let e=n,t=[];e=e.replace(/<img\s+([^>]*?)\s*>/gi,(e,n)=>{let r=n.match(/src\s*=\s*["']([^"']*)["']/i),i=n.match(/alt\s*=\s*["']([^"']*)["']/i),a=n.match(/title\s*=\s*["']([^"']*)["']/i),o=n.match(/width\s*=\s*["']([^"']*)["']/i),s=n.match(/height\s*=\s*["']([^"']*)["']/i),c=t.length;return t.push((0,P.jsx)(F,{src:r?r[1]:``,alt:i?i[1]:``,title:a?a[1]:``,width:o?o[1]:void 0,height:s?s[1]:void 0,className:`my-4`},`img-${c}`)),`__CUSTOM_COMPONENT_PLACEHOLDER_${c}__`}),e=e.replace(/<video\s+([^>]*?)\s*\/?>.*?<\/video>|<video\s+([^>]*?)\s*>/gi,e=>{let n=e.match(/src\s*=\s*["']([^"']*)["']/i),r=e.match(/poster\s*=\s*["']([^"']*)["']/i),i=e.match(/alt\s*=\s*["']([^"']*)["']/i),a=e.match(/title\s*=\s*["']([^"']*)["']/i),o=e.match(/width\s*=\s*["']([^"']*)["']/i),s=e.match(/height\s*=\s*["']([^"']*)["']/i),c=e.includes(`loop`),l=e.includes(`muted`),u=e.includes(`controls`),d=t.length;return t.push((0,P.jsx)(L,{src:n?n[1]:``,poster:r?r[1]:``,alt:i?i[1]:``,title:a?a[1]:``,width:o?o[1]:void 0,height:s?s[1]:void 0,loop:c,muted:l,controls:u,className:`my-4`},`video-${d}`)),`__CUSTOM_COMPONENT_PLACEHOLDER_${d}__`});let r=e.split(/(__CUSTOM_COMPONENT_PLACEHOLDER_\d+__)/),a=0;return r.map(e=>{if(a++,e.startsWith(`__CUSTOM_COMPONENT_PLACEHOLDER_`)){let n=e.match(/__CUSTOM_COMPONENT_PLACEHOLDER_(\d+)__/);if(n)return t[parseInt(n[1],10)]}else if(e.trim()){let t=i.sanitize(e),n=document.createElement(`div`);n.innerHTML=t;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={key:`html-${Date.now()}-${a}-${e.textContent?.slice(0,10)||`node`}`};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,N.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))}return null}).filter(Boolean)})()})},ae=()=>{let{id:t}=e(),{language:n}=x(),{user:r}=A(),[i,o]=(0,N.useState)(null),[l,d]=(0,N.useState)(!0),[ee,re]=(0,N.useState)([]),[_,ie]=(0,N.useState)(`md`),[j,M]=(0,N.useState)(``),[F,I]=(0,N.useState)(``),[L,ae]=(0,N.useState)({}),[z,oe]=(0,N.useState)(`newest`),[B,se]=(0,N.useState)({}),[V,H]=(0,N.useState)(null),[U,W]=(0,N.useState)(!1),[ce,G]=(0,N.useState)(!1),[K,q]=(0,N.useState)(null),J=r?.role===`admin`;(0,N.useEffect)(()=>{try{let e=localStorage.getItem(`breachtimes-bookmarks`);if(e&&re(JSON.parse(e)),t){let e=localStorage.getItem(`votes-${t}`);e&&ae(JSON.parse(e));let n=localStorage.getItem(`sort-${t}`);n&&oe(n)}}catch{}},[t]),(0,N.useEffect)(()=>{(async()=>{if(t){d(!0);try{let e=await k.getArticle(t,n);e.success&&e.article?o(e.article):o(null)}catch{o(null)}finally{d(!1)}}})()},[t,n]);let Y=(0,N.useCallback)(e=>{ie(e);let t=document.querySelector(`.prose`);if(t){let n={sm:[`text-[0.95rem]`,`leading-[1.6]`],md:[`text-lg`,`leading-[1.8]`],lg:[`text-[1.35rem]`,`leading-loose`]};Object.values(n).flat().forEach(e=>{t.classList.remove(`[&_p]:${e.replace(`text-lg`,`text-base`)}`),t.classList.remove(`[&_p]:${e}`)}),n[e].forEach(e=>{t.classList.add(`[&_p]:${e}`)})}},[]);(0,N.useEffect)(()=>{Y(_)},[_,Y]);let X=(0,N.useCallback)(()=>{t&&re(e=>{let r=e.indexOf(t),i=r>-1?e.filter(e=>e!==t):[...e,t];return localStorage.setItem(`breachtimes-bookmarks`,JSON.stringify(i)),E(T(r>-1?`removed`:`saved_successfully`,n)),i})},[t,n]),Z=(0,N.useCallback)(()=>{navigator.share?navigator.share({title:i?.title||document.title,url:window.location.href}).catch(()=>{}):navigator.clipboard.writeText(window.location.href).then(()=>{E(T(`link_copied`,n))})},[i,n]),Q=(0,N.useCallback)(async()=>{if(!t)return;I(``);let e=j.trim();if(e.length<3){I(T(`comment_too_short`,n));return}if(e.length>5e3){I(T(`comment_too_long`,n));return}try{let r=await k.postComment(t,e,n);if(r.success){M(``),E(T(`comment_posted`,n));let e=await k.getArticle(t,n);e.success&&e.article&&o(e.article)}else I(r.error||T(`failed_to_post_comment`,n))}catch{I(T(`server_error`,n))}},[t,j,n]),$=(0,N.useCallback)(async(e,r)=>{try{let i=await k.voteComment(e,r);i.success?(ae(n=>{let i={...n};return i[e]===r?delete i[e]:i[e]=r,localStorage.setItem(`votes-${t}`,JSON.stringify(i)),i}),o(t=>{if(!t)return null;let n=t.comments?.map(t=>t.id===e?{...t,upvotes:i.upvotes,downvotes:i.downvotes}:t);return{...t,comments:n}}),E(T(`vote_recorded`,n))):E(i.error||T(`failed_to_vote`,n),`error`)}catch{E(T(`server_error`,n),`error`)}},[t,n]),le=(0,N.useCallback)(e=>{oe(e),localStorage.setItem(`sort-${t}`,e)},[t]),ue=(0,N.useCallback)(e=>{H(t=>t===e?null:e),se(t=>({...t,[e]:``}))},[]),de=(0,N.useCallback)(async e=>{if(!t)return;let r=B[e]?.trim();if(!r||r.length<3){E(T(`reply_too_short`,n),`error`);return}try{let i=await k.postReply(e,r,n);if(i.success){se(t=>({...t,[e]:``})),H(null),E(T(`reply_posted`,n));let r=await k.getArticle(t,n);r.success&&r.article&&o(r.article)}else E(i.error||T(`failed_to_post_reply`,n),`error`)}catch{E(T(`server_error`,n),`error`)}},[t,B,n]),fe=(0,N.useCallback)(async e=>{if(!(!J||!window.confirm(T(`confirm_delete_comment`,n))))try{let r=await O.deleteComment(e);if(r.success){if(E(T(`comment_deleted`,n)),!t)return;let e=await k.getArticle(t,n);e.success&&e.article&&o(e.article)}else E(r.error||T(`failed_to_delete_comment`,n),`error`)}catch{E(T(`server_error`,n),`error`)}},[t,J,n]),pe=(0,N.useCallback)(async e=>{W(!0),G(!0),q(null);try{let t=await k.getUserProfile({userName:e});t.success&&t.profile?q(t.profile):E(t.error||T(`failed_to_fetch_profile`,n),`error`)}catch{E(T(`server_error`,n),`error`)}finally{G(!1)}},[n]),me=(0,N.useCallback)(()=>{W(!1),q(null)},[]),he=(0,N.useRef)(null),ge=(0,N.useCallback)(async e=>{if(e.preventDefault(),!t)return;let r=new FormData(e.currentTarget);try{let e=await k.submitDocument(r);e.success?(E(T(`submission_success`,n)),he.current?.reset()):E(e.error||T(`submission_failed`,n),`error`)}catch{E(T(`server_error`,n),`error`)}},[t,n]);if(l)return(0,P.jsx)(`div`,{className:`text-center py-8`,children:(0,P.jsx)(c,{className:`w-10 h-10 animate-spin text-bbcRed`})});if(!i)return(0,P.jsx)(`div`,{className:`text-center py-8 text-danger`,children:T(`article_not_found`,n)});let _e=ee.includes(i.id);return(0,P.jsxs)(`div`,{className:`max-w-[1280px] mx-auto px-2 sm:px-3`,children:[(0,P.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6 lg:gap-12`,children:[(0,P.jsx)(`div`,{className:`lg:col-span-8`,children:(0,P.jsxs)(`article`,{className:`bg-card p-3 sm:p-4 md:p-5 rounded-2xl shadow-soft border border-border-color`,children:[(0,P.jsxs)(`div`,{className:`mb-4 sm:mb-6`,children:[(0,P.jsx)(`span`,{className:`bg-bbcRed text-white text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block`,children:C(i.category)}),(0,P.jsx)(`h1`,{className:`text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold leading-tight mb-3 sm:mb-4 text-card-text`,children:C(i.title)}),(0,P.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-muted-text font-medium`,children:[(0,P.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,P.jsx)(s,{className:`w-4 h-4`}),` `,w(i.published_at,n)]}),i.readTime&&(0,P.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,P.jsx)(u,{className:`w-4 h-4`}),` `,C(i.readTime)]})]})]}),(0,P.jsx)(`div`,{className:`mb-10 relative aspect-video bg-muted-bg rounded-2xl overflow-hidden shadow-lg`,children:(0,P.jsx)(`img`,{src:i.image||`https://placehold.co/600x400/1a1a1a/FFF?text=BreachTimes`,alt:i.title,className:`w-full h-full object-cover`})}),(0,P.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-center justify-between border-y border-border-color py-3 sm:py-4 mb-6 sm:mb-8 gap-3 sm:gap-0`,children:[(0,P.jsxs)(`div`,{className:`flex items-center gap-1 bg-muted-bg rounded-lg p-1`,children:[(0,P.jsx)(`button`,{type:`button`,onClick:()=>Y(`sm`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-xs font-bold text-card-text ${_===`sm`?`bg-card`:``}`,children:`A`}),(0,P.jsx)(`button`,{type:`button`,onClick:()=>Y(`md`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-xs sm:text-sm font-bold text-card-text ${_===`md`?`bg-card`:``}`,children:`A`}),(0,P.jsx)(`button`,{type:`button`,onClick:()=>Y(`lg`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-sm sm:text-base font-bold text-card-text ${_===`lg`?`bg-card`:``}`,children:`A`})]}),(0,P.jsxs)(`div`,{className:`flex gap-2 sm:gap-3 w-full sm:w-auto`,children:[(0,P.jsxs)(`button`,{type:`button`,"aria-label":`Share article`,onClick:Z,className:`flex items-center justify-center gap-2 px-3 sm:px-4 py-2 rounded-full bg-muted-bg hover:bg-bbcRed hover:text-white transition-all text-xs sm:text-sm font-bold text-card-text flex-1 sm:flex-none`,children:[(0,P.jsx)(ne,{className:`w-4 h-4`}),` `,T(`share`,n)]}),(0,P.jsx)(`button`,{type:`button`,"aria-label":`Toggle bookmark`,onClick:X,className:`p-2.5 rounded-full bg-muted-bg hover:bg-bbcRed hover:text-white text-card-text transition-all shadow-sm flex items-center justify-center group`,children:(0,P.jsx)(m,{className:`w-5 h-5`,fill:_e?`currentColor`:`none`})})]})]}),(0,P.jsx)(R,{content:i.content,className:`prose max-w-none [&_p]:text-base sm:[&_p]:text-lg [&_p]:leading-[1.8] [&_p]:mb-[1em] space-y-6 sm:space-y-8 text-card-text transition-all duration-300`})]})}),(0,P.jsx)(`div`,{className:`lg:col-span-4 w-full`,children:(0,P.jsxs)(`div`,{className:`w-full space-y-4 sm:space-y-6 lg:sticky lg:top-28`,children:[i.leaked_documents&&i.leaked_documents.length>0&&(0,P.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,P.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,P.jsx)(b,{className:`w-5 h-5 text-bbcRed`}),T(`leaked_documents`,n)]}),(0,P.jsx)(`ul`,{className:`space-y-3`,children:i.leaked_documents.map(e=>(0,P.jsxs)(`li`,{className:`group flex items-center gap-3 p-2 rounded-lg hover:bg-muted-bg transition-colors cursor-pointer`,children:[(0,P.jsx)(`div`,{className:`w-10 h-10 rounded-lg bg-danger/10 dark:bg-danger/20 flex items-center justify-center flex-shrink-0 text-bbcRed font-bold text-xs border border-bbcRed/20`,children:e.file_type||`DOC`}),(0,P.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,P.jsx)(`p`,{className:`text-sm font-bold text-card-text truncate group-hover:text-bbcRed transition-colors`,children:e.display_name_bn||e.display_name_en}),(0,P.jsx)(`span`,{className:`text-[10px] text-muted-text uppercase tracking-wider`,children:`Download`})]}),(0,P.jsx)(`a`,{href:e.download_url||`/downloads/?file=${e.file_path}`,download:!0,target:`_blank`,rel:`noopener noreferrer`,className:`p-2 rounded-lg bg-bbcRed/10 text-bbcRed group-hover:bg-bbcRed group-hover:text-white transition-all`,children:(0,P.jsx)(f,{className:`w-4 h-4`})})]},e.id||e.display_name_en))})]}),i.documents&&i.documents.length>0&&(0,P.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,P.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,P.jsx)(f,{className:`w-5 h-5 text-bbcRed`}),T(`downloadable_documents`,n)]}),(0,P.jsx)(`ul`,{className:`space-y-3`,children:i.documents.map(e=>(0,P.jsxs)(`li`,{className:`group flex items-center gap-3 p-3 rounded-lg hover:bg-muted-bg transition-colors cursor-pointer border border-transparent hover:border-bbcRed/30`,children:[(0,P.jsx)(`div`,{className:`w-10 h-10 rounded-lg bg-muted-bg dark:bg-muted-bg flex items-center justify-center flex-shrink-0 text-card-text dark:text-card-text font-bold text-xs border border-border-color/50`,children:e.file_type}),(0,P.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,P.jsx)(`p`,{className:`text-sm font-bold text-card-text truncate group-hover:text-bbcRed transition-colors`,title:e.display_name_bn||e.display_name_en,children:n===`bn`?e.display_name_bn||e.display_name_en:e.display_name_en||e.display_name_bn}),e.file_size&&(0,P.jsxs)(`span`,{className:`text-[10px] text-muted-text uppercase tracking-wider`,children:[Math.round(e.file_size/1024),` KB`]})]}),(0,P.jsx)(`a`,{href:e.download_url||`/downloads/?file=${encodeURIComponent(e.file_path)}`,download:!0,target:`_blank`,rel:`noopener noreferrer`,className:`p-2 rounded-lg bg-bbcRed/10 text-bbcRed group-hover:bg-bbcRed group-hover:text-white transition-all`,children:(0,P.jsx)(f,{className:`w-4 h-4`})})]},e.id))})]}),(0,P.jsx)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:i.allow_submissions?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,P.jsx)(v,{className:`w-5 h-5 text-bbcRed`}),T(`submit_documents`,n)]}),(0,P.jsxs)(`form`,{ref:he,onSubmit:ge,className:`space-y-4`,children:[(0,P.jsx)(`input`,{type:`hidden`,name:`article_id`,value:i.id}),(0,P.jsxs)(`div`,{children:[(0,P.jsx)(`label`,{htmlFor:`document-input`,className:`block text-xs font-bold mb-2 text-muted-text`,children:T(`your_file`,n)}),(0,P.jsx)(`input`,{id:`document-input`,type:`file`,name:`document`,required:!0,className:`w-full text-xs text-card-text file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-bbcRed/10 file:text-bbcRed hover:file:bg-bbcRed/20`})]}),(0,P.jsxs)(`div`,{children:[(0,P.jsx)(`label`,{htmlFor:`message-textarea`,className:`block text-xs font-bold mb-2 text-muted-text`,children:T(`message_optional`,n)}),(0,P.jsx)(`textarea`,{id:`message-textarea`,name:`message`,rows:3,className:`w-full p-3 rounded-lg border border-border-color bg-muted-bg text-card-text text-sm focus:border-bbcRed outline-none`,placeholder:T(`write_details`,n)})]}),(0,P.jsx)(`button`,{type:`submit`,className:`w-full bg-bbcRed text-white py-2 rounded-lg font-bold text-sm hover:opacity-90 transition-opacity`,children:T(`submit`,n)})]})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(`h4`,{className:`text-lg font-bold mb-2 text-card-text flex items-center gap-2`,children:[(0,P.jsx)(h,{className:`w-5 h-5 text-muted-text`}),T(`submissions_closed`,n)]}),(0,P.jsx)(`p`,{className:`text-sm text-muted-text font-bold text-danger`,children:T(`submissions_turned_off_by_admin`,n)})]})}),(0,P.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,P.jsx)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text`,children:T(`article_info`,n)}),(0,P.jsxs)(`div`,{className:`space-y-2 sm:space-y-3 text-xs sm:text-sm`,children:[(0,P.jsxs)(`div`,{className:`flex justify-between items-center pb-2 sm:pb-3 border-b border-border-color`,children:[(0,P.jsx)(`span`,{className:`text-muted-text`,children:T(`category`,n)}),(0,P.jsx)(`span`,{className:`font-bold text-card-text`,children:C(i.category)})]}),(0,P.jsxs)(`div`,{className:`flex justify-between items-center pb-2 sm:pb-3 border-b border-border-color`,children:[(0,P.jsx)(`span`,{className:`text-muted-text`,children:T(`published`,n)}),(0,P.jsx)(`span`,{className:`font-bold text-card-text`,children:w(i.published_at,n)})]}),i.readTime&&(0,P.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,P.jsx)(`span`,{className:`text-muted-text`,children:T(`read_time`,n)}),(0,P.jsx)(`span`,{className:`font-bold text-card-text`,children:C(i.readTime)})]})]})]})]})}),(0,P.jsxs)(`div`,{className:`lg:col-span-8 bg-card p-4 sm:p-6 md:p-8 rounded-2xl shadow-soft border border-border-color`,children:[(0,P.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 gap-3`,children:[(0,P.jsxs)(`h3`,{className:`text-xl sm:text-2xl font-bold text-card-text flex items-center gap-2`,children:[(0,P.jsx)(a,{className:`w-5 sm:w-6 h-5 sm:h-6 text-bbcRed`}),` `,T(`comments`,n)]}),(0,P.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,P.jsx)(`label`,{htmlFor:`sort-comments`,className:`text-xs font-bold text-muted-text`,children:T(`sort_by`,n)}),(0,P.jsx)(S,{id:`sort-comments`,value:z,onChange:le,options:[{value:`newest`,label:T(`newest`,n)},{value:`oldest`,label:T(`oldest`,n)},{value:`helpful`,label:T(`most_helpful`,n)},{value:`discussed`,label:T(`most_discussed`,n)}],className:`w-32`})]})]}),(0,P.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color overflow-hidden`,children:i.comments&&i.comments.length>0?(0,P.jsx)(`div`,{className:`divide-y divide-border-color`,children:[...i.comments].sort((e,t)=>{if(z===`newest`)return new Date(t.created_at).getTime()-new Date(e.created_at).getTime();if(z===`oldest`)return new Date(e.created_at).getTime()-new Date(t.created_at).getTime();if(z===`helpful`)return t.upvotes-t.downvotes-(e.upvotes-e.downvotes);if(z===`discussed`){let n=e.replies?.length||0;return(t.replies?.length||0)-n}return 0}).map(e=>(0,P.jsxs)(`div`,{className:`p-4`,children:[(0,P.jsxs)(`div`,{className:`flex items-start gap-3 mb-2`,children:[(0,P.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-gradient-to-br from-bbcRed to-orange-500 flex items-center justify-center font-bold text-white text-sm shadow-md flex-shrink-0`,children:e.user[0].toUpperCase()}),(0,P.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,P.jsx)(`button`,{type:`button`,onClick:()=>pe(e.user),className:`font-bold text-sm text-card-text block hover:text-bbcRed cursor-pointer transition-colors bg-transparent border-none p-0`,children:C(e.user)}),(0,P.jsx)(`span`,{className:`text-xs text-muted-text`,children:e.time})]})]}),(0,P.jsx)(`p`,{className:`text-sm text-card-text ml-12 leading-relaxed mb-3`,children:(()=>{let t=D(e.text),n=document.createElement(`div`);n.innerHTML=t;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,N.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))})()}),(0,P.jsxs)(`div`,{className:`ml-12 flex items-center gap-3 text-xs`,children:[(0,P.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,P.jsx)(`button`,{type:`button`,onClick:()=>$(e.id,`upvote`),className:`p-1 hover:text-success transition-colors text-muted-text vote-btn-up flex items-center justify-center min-w-[36px] min-h-[36px] ${L[e.id]===`upvote`?`text-success font-bold`:``}`,title:`Upvote`,children:(0,P.jsx)(p,{className:`w-3 h-3`})}),(0,P.jsx)(`span`,{className:`text-xs font-bold text-muted-text min-w-[20px] text-center`,children:e.upvotes-e.downvotes}),(0,P.jsx)(`button`,{type:`button`,onClick:()=>$(e.id,`downvote`),className:`p-1 hover:text-danger transition-colors text-muted-text vote-btn-down flex items-center justify-center min-w-[36px] min-h-[36px] ${L[e.id]===`downvote`?`text-danger font-bold`:``}`,title:`Downvote`,children:(0,P.jsx)(te,{className:`w-3 h-3`})})]}),(0,P.jsx)(`button`,{type:`button`,onClick:()=>ue(e.id),className:`px-3 py-1 hover:bg-bbcRed/10 dark:hover:bg-bbcRed/20 text-bbcRed rounded transition-colors font-bold text-sm`,children:T(`reply`,n)}),J&&(0,P.jsx)(`button`,{type:`button`,onClick:()=>fe(e.id),className:`text-danger hover:text-danger/80 p-1 rounded hover:bg-danger/10 dark:hover:bg-danger/20`,children:(0,P.jsx)(y,{className:`w-3 h-3`})})]}),e.replies&&e.replies.length>0&&(0,P.jsx)(`div`,{className:`ml-12 mt-4 space-y-3 border-l-2 border-border-color pl-4`,children:e.replies.map(e=>(0,P.jsxs)(`div`,{children:[(0,P.jsxs)(`div`,{className:`flex items-start gap-2 mb-1`,children:[(0,P.jsx)(`div`,{className:`w-7 h-7 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center font-bold text-white text-xs shadow-md flex-shrink-0`,children:e.user[0].toUpperCase()}),(0,P.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,P.jsx)(`span`,{className:`font-bold text-xs text-card-text block`,children:C(e.user)}),(0,P.jsx)(`span`,{className:`text-xs text-muted-text`,children:e.time})]})]}),(0,P.jsx)(`p`,{className:`text-xs text-card-text ml-9 leading-relaxed`,children:(()=>{let t=D(e.text),n=document.createElement(`div`);n.innerHTML=t;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,N.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))})()})]},e.id))}),V===e.id&&(0,P.jsxs)(`div`,{className:`ml-12 mt-4 p-4 rounded-lg`,children:[(0,P.jsx)(`h4`,{className:`text-xs font-bold text-card-text mb-3`,children:T(`write_your_reply`,n)}),(0,P.jsx)(`textarea`,{value:B[e.id]||``,onChange:t=>se(n=>({...n,[e.id]:t.target.value})),placeholder:T(`write_your_reply`,n),className:`w-full p-3 rounded-lg bg-card border border-border-color text-card-text focus:ring-2 focus:ring-bbcRed/30 focus:border-bbcRed outline-none transition-all resize-none text-sm mb-3 min-h-[80px]`}),(0,P.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,P.jsx)(`button`,{type:`button`,onClick:()=>ue(e.id),className:`px-4 py-2 rounded-lg bg-card border border-border-color hover:bg-border-color transition-colors text-sm font-bold text-card-text`,children:T(`cancel`,n)}),(0,P.jsx)(`button`,{type:`button`,onClick:()=>de(e.id),className:`px-4 py-2 rounded-lg bg-bbcRed hover:bg-bbcRed-hover text-white transition-colors text-sm font-bold shadow-soft hover:shadow-soft-hover`,children:T(`send_reply`,n)})]})]})]},e.id))}):(0,P.jsx)(`div`,{className:`text-center py-8 text-muted-text`,children:T(`no_comments_yet`,n)})}),(0,P.jsxs)(`div`,{className:`border-t border-border-color pt-6`,children:[(0,P.jsx)(`h4`,{className:`font-bold text-sm text-card-text mb-4`,children:T(`write_your_comment`,n)}),(0,P.jsx)(`textarea`,{id:`comment-input`,className:`w-full p-4 rounded-xl border border-border-color bg-card text-card-text focus:ring-2 focus:ring-bbcRed/20 focus:border-bbcRed outline-none transition-all resize-y text-base min-h-[150px]`,placeholder:T(`write_your_comment`,n),value:j,onChange:e=>M(e.target.value)}),(0,P.jsxs)(`div`,{className:`flex justify-between items-center mt-3 gap-4`,children:[(0,P.jsxs)(`div`,{className:`text-xs text-muted-text`,children:[j.length,`/5000`]}),F&&(0,P.jsx)(`div`,{className:`text-xs text-danger font-bold`,children:F}),(0,P.jsx)(`button`,{type:`button`,onClick:Q,className:`bg-bbcRed text-white px-6 py-2.5 rounded-full font-bold hover:bg-opacity-90 hover:shadow-lg hover:-translate-y-0.5 transition-all text-sm`,children:T(`post_comment`,n)})]})]})]})]}),U&&(0,P.jsx)(`button`,{type:`button`,onClick:me,onKeyDown:e=>{e.key===`Escape`&&me()},className:`fixed inset-0 bg-black/50 dark:bg-black/70 z-[200] flex items-center justify-center p-4 border-none`,children:(0,P.jsxs)(`div`,{role:`dialog`,"aria-modal":`true`,"aria-labelledby":`profile-modal-title`,className:`bg-card rounded-2xl shadow-2xl border border-border-color max-w-md w-full max-h-[90vh] overflow-y-auto`,onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:[(0,P.jsxs)(`div`,{className:`sticky top-0 bg-card border-b border-border-color p-4 flex items-center justify-between`,children:[(0,P.jsxs)(`h3`,{className:`text-xl font-bold text-card-text`,children:[`ðŸ‘¤ `,T(`user_profile`,n)]}),(0,P.jsx)(`button`,{type:`button`,onClick:me,className:`p-2 hover:bg-muted-bg rounded-lg transition-colors`,children:(0,P.jsx)(g,{className:`w-5 h-5`})})]}),(0,P.jsx)(`div`,{id:`profile-content`,className:`p-6 space-y-4`,children:ce?(0,P.jsx)(`div`,{className:`flex items-center justify-center py-8`,children:(0,P.jsx)(c,{className:`w-6 h-6 animate-spin text-bbcRed`})}):K?(0,P.jsxs)(`div`,{className:`space-y-4`,children:[(0,P.jsxs)(`div`,{className:`flex items-center gap-4 pb-4 border-b border-border-color`,children:[(0,P.jsx)(`div`,{className:`w-16 h-16 rounded-full bg-gradient-to-br from-bbcRed to-orange-500 flex items-center justify-center font-bold text-white text-2xl shadow-lg`,children:K.displayName[0].toUpperCase()}),(0,P.jsxs)(`div`,{children:[(0,P.jsx)(`h4`,{className:`text-lg font-bold text-card-text`,children:K.displayName}),(0,P.jsx)(`p`,{className:`text-xs text-muted-text`,children:K.email})]})]}),(0,P.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,P.jsxs)(`div`,{className:`bg-muted-bg p-3 rounded-lg border border-border-color`,children:[(0,P.jsx)(`div`,{className:`text-2xl font-bold text-bbcRed`,children:K.commentCount}),(0,P.jsx)(`div`,{className:`text-xs text-muted-text`,children:T(`comments_count`,n)})]}),(0,P.jsxs)(`div`,{className:`bg-muted-bg p-3 rounded-lg border border-border-color`,children:[(0,P.jsx)(`div`,{className:`text-2xl font-bold text-success`,children:K.upvotes}),(0,P.jsx)(`div`,{className:`text-xs text-muted-text`,children:T(`received_likes`,n)})]})]}),K.recentComments&&K.recentComments.length>0&&(0,P.jsxs)(`div`,{children:[(0,P.jsx)(`div`,{className:`text-sm font-bold text-card-text mb-2`,children:T(`recent_comments`,n)}),(0,P.jsx)(`div`,{className:`space-y-2`,children:K.recentComments.map(e=>(0,P.jsxs)(`div`,{className:`bg-muted-bg p-2 rounded-lg text-xs text-card-text border border-border-color`,children:[(0,P.jsxs)(`p`,{className:`mb-1`,children:[`"`,e.text,`"`]}),(0,P.jsxs)(`div`,{className:`flex items-center justify-between text-muted-text text-xs`,children:[(0,P.jsx)(`span`,{children:e.time}),(0,P.jsxs)(`span`,{children:[(0,P.jsx)(p,{className:`w-3 h-3 inline-block mr-1`}),` `,e.upvotes]})]})]},`comment-${e.text.substring(0,20)}`))})]})]}):(0,P.jsx)(`div`,{className:`text-center py-8`,children:(0,P.jsx)(`p`,{className:`text-muted-text`,children:T(`user_profile_not_found`,n)})})})]})})]})};export{ae as default};