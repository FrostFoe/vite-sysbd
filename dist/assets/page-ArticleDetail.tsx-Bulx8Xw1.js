import{r as e,t}from"./rolldown-runtime-Ckerh37x.js";import{B as n,D as r,F as i,M as a,N as o,W as s,_ as c,a as l,c as u,d,g as f,i as p,m,o as h,s as g,u as ee,v as te,x as ne}from"./component-Layout-TPrHIES6.js";import{d as re}from"./page-Admin-BtvxPNeS.js";import{d as ie,n as ae,p as oe,s as se,t as ce}from"./component-common-Brp59LFJ.js";import{i as le}from"./component-admin-C1EmCHSN.js";var ue=t(((e,t)=>{var n=typeof Element<`u`,r=typeof Map==`function`,i=typeof Set==`function`,a=typeof ArrayBuffer==`function`&&!!ArrayBuffer.isView;function o(e,t){if(e===t)return!0;if(e&&t&&typeof e==`object`&&typeof t==`object`){if(e.constructor!==t.constructor)return!1;var s,c,l;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(c=s;c--!==0;)if(!o(e[c],t[c]))return!1;return!0}var u;if(r&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(u=e.entries();!(c=u.next()).done;)if(!t.has(c.value[0]))return!1;for(u=e.entries();!(c=u.next()).done;)if(!o(c.value[1],t.get(c.value[0])))return!1;return!0}if(i&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(u=e.entries();!(c=u.next()).done;)if(!t.has(c.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(s=e.length,s!=t.length)return!1;for(c=s;c--!==0;)if(e[c]!==t[c])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf==`function`&&typeof t.valueOf==`function`)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString==`function`&&typeof t.toString==`function`)return e.toString()===t.toString();if(l=Object.keys(e),s=l.length,s!==Object.keys(t).length)return!1;for(c=s;c--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[c]))return!1;if(n&&e instanceof Element)return!1;for(c=s;c--!==0;)if(!((l[c]===`_owner`||l[c]===`__v`||l[c]===`__o`)&&e.$$typeof)&&!o(e[l[c]],t[l[c]]))return!1;return!0}return e!==e&&t!==t}t.exports=function(e,t){try{return o(e,t)}catch(e){if((e.message||``).match(/stack|recursion/i))return console.warn(`react-fast-compare cannot handle circular refs`),!1;throw e}}})),de=t(((e,t)=>{t.exports=function(e,t,n,r,i,a,o,s){if(!e){var c;if(t===void 0)c=Error(`Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.`);else{var l=[n,r,i,a,o,s],u=0;c=Error(t.replace(/%s/g,function(){return l[u++]})),c.name=`Invariant Violation`}throw c.framesToPop=1,c}}}));function _(e){"@babel/helpers - typeof";return _=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},_(e)}function fe(e,t){if(_(e)!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if(_(r)!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}function pe(e){var t=fe(e,`string`);return _(t)==`symbol`?t:t+``}function v(e,t,n){return(t=pe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=t(((e,t)=>{t.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(i!==void 0)return!!i;if(e===t)return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),c=0;c<a.length;c++){var l=a[c];if(!s(l))return!1;var u=e[l],d=t[l];if(i=n?n.call(r,u,d,l):void 0,i===!1||i===void 0&&u!==d)return!1}return!0}})),b=e(s()),me=e(ue()),x=e(de()),S=e(y()),C,w,T=(e=>(e.BASE=`base`,e.BODY=`body`,e.HEAD=`head`,e.HTML=`html`,e.LINK=`link`,e.META=`meta`,e.NOSCRIPT=`noscript`,e.SCRIPT=`script`,e.STYLE=`style`,e.TITLE=`title`,e.FRAGMENT=`Symbol(react.fragment)`,e))(T||{}),E={link:{rel:[`amphtml`,`canonical`,`alternate`]},script:{type:[`application/ld+json`]},meta:{charset:``,name:[`generator`,`robots`,`description`],property:[`og:type`,`og:title`,`og:url`,`og:image`,`og:image:alt`,`og:description`,`twitter:url`,`twitter:title`,`twitter:description`,`twitter:image`,`twitter:image:alt`,`twitter:card`,`twitter:site`]}},D=Object.values(T),O={accesskey:`accessKey`,charset:`charSet`,class:`className`,contenteditable:`contentEditable`,contextmenu:`contextMenu`,"http-equiv":`httpEquiv`,itemprop:`itemProp`,tabindex:`tabIndex`},k=Object.entries(O).reduce((e,[t,n])=>(e[n]=t,e),{}),A=`data-rh`,j={DEFAULT_TITLE:`defaultTitle`,DEFER:`defer`,ENCODE_SPECIAL_CHARACTERS:`encodeSpecialCharacters`,ON_CHANGE_CLIENT_STATE:`onChangeClientState`,TITLE_TEMPLATE:`titleTemplate`,PRIORITIZE_SEO_TAGS:`prioritizeSeoTags`},M=(e,t)=>{for(let n=e.length-1;n>=0;--n){let r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},he=e=>{let t=M(e,`title`),n=M(e,j.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join(``)),n&&t)return n.replace(/%s/g,()=>t);let r=M(e,j.DEFAULT_TITLE);return t||r||void 0},ge=e=>M(e,j.ON_CHANGE_CLIENT_STATE)||(()=>{}),N=(e,t)=>t.filter(t=>t[e]!==void 0).map(t=>t[e]).reduce((e,t)=>({...e,...t}),{}),P=(e,t)=>t.filter(e=>e.base!==void 0).map(e=>e.base).reverse().reduce((t,n)=>{if(!t.length){let r=Object.keys(n);for(let i=0;i<r.length;i+=1){let a=r[i].toLowerCase();if(e.indexOf(a)!==-1&&n[a])return t.concat(n)}}return t},[]),F=e=>console&&typeof console.warn==`function`&&console.warn(e),I=(e,t,n)=>{let r={};return n.filter(t=>Array.isArray(t[e])?!0:(t[e]!==void 0&&F(`Helmet: ${e} should be of type "Array". Instead found type "${typeof t[e]}"`),!1)).map(t=>t[e]).reverse().reduce((e,n)=>{let i={};n.filter(e=>{let n,a=Object.keys(e);for(let r=0;r<a.length;r+=1){let i=a[r],o=i.toLowerCase();t.indexOf(o)!==-1&&!(n===`rel`&&e[n].toLowerCase()===`canonical`)&&!(o===`rel`&&e[o].toLowerCase()===`stylesheet`)&&(n=o),t.indexOf(i)!==-1&&(i===`innerHTML`||i===`cssText`||i===`itemprop`)&&(n=i)}if(!n||!e[n])return!1;let o=e[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),r[n][o]?!1:(i[n][o]=!0,!0)}).reverse().forEach(t=>e.push(t));let a=Object.keys(i);for(let e=0;e<a.length;e+=1){let t=a[e];r[t]={...r[t],...i[t]}}return e},[]).reverse()},_e=(e,t)=>{if(Array.isArray(e)&&e.length){for(let n=0;n<e.length;n+=1)if(e[n][t])return!0}return!1},L=e=>({baseTag:P([`href`],e),bodyAttributes:N(`bodyAttributes`,e),defer:M(e,j.DEFER),encode:M(e,j.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:N(`htmlAttributes`,e),linkTags:I(`link`,[`rel`,`href`],e),metaTags:I(`meta`,[`name`,`charset`,`http-equiv`,`property`,`itemprop`],e),noscriptTags:I(`noscript`,[`innerHTML`],e),onChangeClientState:ge(e),scriptTags:I(`script`,[`src`,`innerHTML`],e),styleTags:I(`style`,[`cssText`],e),title:he(e),titleAttributes:N(`titleAttributes`,e),prioritizeSeoTags:_e(e,j.PRIORITIZE_SEO_TAGS)}),R=e=>Array.isArray(e)?e.join(``):e,ve=(e,t)=>{let n=Object.keys(e);for(let r=0;r<n.length;r+=1)if(t[n[r]]&&t[n[r]].includes(e[n[r]]))return!0;return!1},z=(e,t)=>Array.isArray(e)?e.reduce((e,n)=>(ve(n,t)?e.priority.push(n):e.default.push(n),e),{priority:[],default:[]}):{default:e,priority:[]},B=(e,t)=>({...e,[t]:void 0}),V=[`noscript`,`script`,`style`],H=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/"/g,`&quot;`).replace(/'/g,`&#x27;`),U=e=>Object.keys(e).reduce((t,n)=>{let r=e[n]===void 0?`${n}`:`${n}="${e[n]}"`;return t?`${t} ${r}`:r},``),ye=(e,t,n,r)=>{let i=U(n),a=R(t);return i?`<${e} ${A}="true" ${i}>${H(a,r)}</${e}>`:`<${e} ${A}="true">${H(a,r)}</${e}>`},be=(e,t,n=!0)=>t.reduce((t,r)=>{let i=r,a=Object.keys(i).filter(e=>!(e===`innerHTML`||e===`cssText`)).reduce((e,t)=>{let r=i[t]===void 0?t:`${t}="${H(i[t],n)}"`;return e?`${e} ${r}`:r},``),o=i.innerHTML||i.cssText||``;return`${t}<${e} ${A}="true" ${a}${V.indexOf(e)===-1?`/>`:`>${o}</${e}>`}`},``),xe=(e,t={})=>Object.keys(e).reduce((t,n)=>{let r=O[n];return t[r||n]=e[n],t},t),W=(e,t,n)=>{let r=xe(n,{key:t,[A]:!0});return[b.createElement(`title`,r,t)]},G=(e,t)=>t.map((t,n)=>{let r={key:n,[A]:!0};return Object.keys(t).forEach(e=>{let n=O[e]||e;n===`innerHTML`||n===`cssText`?r.dangerouslySetInnerHTML={__html:t.innerHTML||t.cssText}:r[n]=t[e]}),b.createElement(e,r)}),K=(e,t,n=!0)=>{switch(e){case`title`:return{toComponent:()=>W(e,t.title,t.titleAttributes),toString:()=>ye(e,t.title,t.titleAttributes,n)};case`bodyAttributes`:case`htmlAttributes`:return{toComponent:()=>xe(t),toString:()=>U(t)};default:return{toComponent:()=>G(e,t),toString:()=>be(e,t,n)}}},Se=({metaTags:e,linkTags:t,scriptTags:n,encode:r})=>{let i=z(e,E.meta),a=z(t,E.link),o=z(n,E.script);return{priorityMethods:{toComponent:()=>[...G(`meta`,i.priority),...G(`link`,a.priority),...G(`script`,o.priority)],toString:()=>`${K(`meta`,i.priority,r)} ${K(`link`,a.priority,r)} ${K(`script`,o.priority,r)}`},metaTags:i.default,linkTags:a.default,scriptTags:o.default}},q=e=>{let{baseTag:t,bodyAttributes:n,encode:r=!0,htmlAttributes:i,noscriptTags:a,styleTags:o,title:s=``,titleAttributes:c,prioritizeSeoTags:l}=e,{linkTags:u,metaTags:d,scriptTags:f}=e,p={toComponent:()=>{},toString:()=>``};return l&&({priorityMethods:p,linkTags:u,metaTags:d,scriptTags:f}=Se(e)),{priority:p,base:K(`base`,t,r),bodyAttributes:K(`bodyAttributes`,n,r),htmlAttributes:K(`htmlAttributes`,i,r),link:K(`link`,u,r),meta:K(`meta`,d,r),noscript:K(`noscript`,a,r),script:K(`script`,f,r),style:K(`style`,o,r),title:K(`title`,{title:s,titleAttributes:c},r)}},J=[],Ce=!!(typeof window<`u`&&window.document&&window.document.createElement),Y=class{constructor(e,t){v(this,`instances`,[]),v(this,`canUseDOM`,Ce),v(this,`context`,void 0),v(this,`value`,{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?J:this.instances,add:e=>{(this.canUseDOM?J:this.instances).push(e)},remove:e=>{let t=(this.canUseDOM?J:this.instances).indexOf(e);(this.canUseDOM?J:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=q({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:``,titleAttributes:{}}))}},we=b.createContext({}),Te=(C=class e extends b.Component{constructor(t){super(t),v(this,`helmetData`,void 0),this.helmetData=new Y(this.props.context||{},e.canUseDOM)}render(){return b.createElement(we.Provider,{value:this.helmetData.value},this.props.children)}},v(C,`canUseDOM`,Ce),C),X=(e,t)=>{let n=document.head||document.querySelector(`head`),r=n.querySelectorAll(`${e}[${A}]`),i=[].slice.call(r),a=[],o;return t&&t.length&&t.forEach(t=>{let n=document.createElement(e);for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))if(e===`innerHTML`)n.innerHTML=t.innerHTML;else if(e===`cssText`)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{let r=e,i=t[r]===void 0?``:t[r];n.setAttribute(e,i)}n.setAttribute(A,`true`),i.some((e,t)=>(o=t,n.isEqualNode(e)))?i.splice(o,1):a.push(n)}),i.forEach(e=>e.parentNode?.removeChild(e)),a.forEach(e=>n.appendChild(e)),{oldTags:i,newTags:a}},Ee=(e,t)=>{let n=document.getElementsByTagName(e)[0];if(!n)return;let r=n.getAttribute(A),i=r?r.split(`,`):[],a=[...i],o=Object.keys(t);for(let e of o){let r=t[e]||``;n.getAttribute(e)!==r&&n.setAttribute(e,r),i.indexOf(e)===-1&&i.push(e);let o=a.indexOf(e);o!==-1&&a.splice(o,1)}for(let e=a.length-1;e>=0;--e)n.removeAttribute(a[e]);i.length===a.length?n.removeAttribute(A):n.getAttribute(A)!==o.join(`,`)&&n.setAttribute(A,o.join(`,`))},De=(e,t)=>{e!==void 0&&document.title!==e&&(document.title=R(e)),Ee(`title`,t)},Oe=(e,t)=>{let{baseTag:n,bodyAttributes:r,htmlAttributes:i,linkTags:a,metaTags:o,noscriptTags:s,onChangeClientState:c,scriptTags:l,styleTags:u,title:d,titleAttributes:f}=e;Ee(`body`,r),Ee(`html`,i),De(d,f);let p={baseTag:X(`base`,n),linkTags:X(`link`,a),metaTags:X(`meta`,o),noscriptTags:X(`noscript`,s),scriptTags:X(`script`,l),styleTags:X(`style`,u)},m={},h={};Object.keys(p).forEach(e=>{let{newTags:t,oldTags:n}=p[e];t.length&&(m[e]=t),n.length&&(h[e]=p[e].oldTags)}),t&&t(),c(e,m,h)},Z=null,ke=e=>{Z&&cancelAnimationFrame(Z),e.defer?Z=requestAnimationFrame(()=>{Oe(e,()=>{Z=null})}):(Oe(e),Z=null)},Ae=class extends b.Component{constructor(...e){super(...e),v(this,`rendered`,!1)}shouldComponentUpdate(e){return!(0,S.default)(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){let{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){let{helmetInstances:e,setHelmet:t}=this.props.context,n=null,r=L(e.get().map(e=>{let t={...e.props};return delete t.context,t}));Te.canUseDOM?ke(r):q&&(n=q(r)),t(n)}init(){if(this.rendered)return;this.rendered=!0;let{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},je=(w=class extends b.Component{shouldComponentUpdate(e){return!(0,me.default)(B(this.props,`helmetData`),B(e,`helmetData`))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case`script`:case`noscript`:return{innerHTML:t};case`style`:return{cssText:t};default:throw Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,r){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,n,r){switch(e.type){case`title`:return{...t,[e.type]:r,titleAttributes:{...n}};case`body`:return{...t,bodyAttributes:{...n}};case`html`:return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach(t=>{n={...n,[t]:e[t]}}),n}warnOnInvalidChildren(e,t){return(0,x.default)(D.some(t=>e.type===t),typeof e.type==`function`?`You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.`:`Only elements types ${D.join(`, `)} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),(0,x.default)(!t||typeof t==`string`||Array.isArray(t)&&!t.some(e=>typeof e!=`string`),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return b.Children.forEach(e,e=>{if(!e||!e.props)return;let{children:r,...i}=e.props,a=Object.keys(i).reduce((e,t)=>(e[k[t]||t]=i[t],e),{}),{type:o}=e;switch(typeof o==`symbol`?o=o.toString():this.warnOnInvalidChildren(e,r),o){case`Symbol(react.fragment)`:t=this.mapChildrenToProps(r,t);break;case`link`:case`meta`:case`noscript`:case`script`:case`style`:n=this.flattenArrayTypeChildren(e,n,a,r);break;default:t=this.mapObjectTypeChildren(e,t,a,r);break}}),this.mapArrayTypeChildrenToProps(n,t)}render(){let{children:e,...t}=this.props,n={...t},{helmetData:r}=t;return e&&(n=this.mapChildrenToProps(e,n)),r&&!(r instanceof Y)&&(r=new Y(r.context,!0),delete n.helmetData),r?b.createElement(Ae,{...n,context:r.value}):b.createElement(we.Consumer,null,e=>b.createElement(Ae,{...n,context:e}))}},v(w,`defaultProps`,{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),w),Me=o(`book-open`,[[`path`,{d:`M12 7v14`,key:`1akyts`}],[`path`,{d:`M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z`,key:`ruj8y`}]]),Ne=o(`file-exclamation-point`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M12 9v4`,key:`juzpu7`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),Q=o(`lock`,[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`,key:`fwvmzm`}]]),Pe=o(`share-2`,[[`circle`,{cx:`18`,cy:`5`,r:`3`,key:`gq8acd`}],[`circle`,{cx:`6`,cy:`12`,r:`3`,key:`w7nqdw`}],[`circle`,{cx:`18`,cy:`19`,r:`3`,key:`1xt0gg`}],[`line`,{x1:`8.59`,x2:`15.42`,y1:`13.51`,y2:`17.49`,key:`47mynk`}],[`line`,{x1:`15.41`,x2:`8.59`,y1:`6.51`,y2:`10.49`,key:`1n3mei`}]]),Fe=o(`thumbs-up`,[[`path`,{d:`M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z`,key:`emmmcr`}],[`path`,{d:`M7 10v12`,key:`1qc93n`}]]),Ie=o(`thumbs-down`,[[`path`,{d:`M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z`,key:`m61m77`}],[`path`,{d:`M17 14V2`,key:`8ymqnk`}]]),Le=o(`upload`,[[`path`,{d:`M12 3v12`,key:`1x0j5s`}],[`path`,{d:`m17 8-5-5-5 5`,key:`7q97r8`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}]]),$=e(c(),1),Re=()=>{let{id:e}=n(),{language:t}=f(),{user:o,isAuthenticated:s}=p(),[c,g]=(0,b.useState)(null),[ue,de]=(0,b.useState)([]),[_,fe]=(0,b.useState)(!0),[pe,v]=(0,b.useState)([]),[y,me]=(0,b.useState)(`md`),[x,S]=(0,b.useState)(``),[C,w]=(0,b.useState)(``),[T,E]=(0,b.useState)({}),[D,O]=(0,b.useState)(`newest`),[k,A]=(0,b.useState)({}),[j,M]=(0,b.useState)(null),[he,ge]=(0,b.useState)(!1),[N,P]=(0,b.useState)(!1),[F,I]=(0,b.useState)(null),_e=(0,b.useRef)(null),L=o?.role===`admin`;(0,b.useEffect)(()=>{try{let t=localStorage.getItem(`breachtimes-bookmarks`);if(t&&v(JSON.parse(t)),e){let t=localStorage.getItem(`votes-${e}`);t&&E(JSON.parse(t));let n=localStorage.getItem(`sort-${e}`);n&&O(n)}}catch{}},[e]),(0,b.useEffect)(()=>{(async()=>{if(e){fe(!0);try{let n=await h.getArticle(e,t);n.success&&n.article?g(n.article):g(null)}catch{g(null)}try{let e=await l.getArticles({status:`published`,lang:t});e.success&&e.articles&&de(e.articles)}catch{console.error(`Failed to fetch related articles`)}finally{fe(!1)}}})()},[e,t]);let R=(0,b.useCallback)(e=>{me(e)},[]),ve=(0,b.useCallback)(()=>{e&&v(n=>{let r=n.indexOf(e),i=r>-1?n.filter(t=>t!==e):[...n,e];return localStorage.setItem(`breachtimes-bookmarks`,JSON.stringify(i)),d(m(r>-1?`removed`:`saved_successfully`,t)),i})},[e,t]),z=(0,b.useCallback)(()=>{navigator.share?navigator.share({title:c?.title||document.title,url:window.location.href}).catch(()=>{}):navigator.clipboard.writeText(window.location.href).then(()=>{d(m(`link_copied`,t))})},[c,t]),B=(0,b.useCallback)(async()=>{if(!e)return;w(``);let n=x.trim();if(n.length<3){w(m(`comment_too_short`,t));return}if(n.length>5e3){w(m(`comment_too_long`,t));return}try{let r=await h.postComment(e,n,t);if(r.success){S(``),d(m(`comment_posted`,t));let n=await h.getArticle(e,t);n.success&&n.article&&g(n.article)}else w(r.error||m(`failed_to_post_comment`,t))}catch{w(m(`server_error`,t))}},[e,x,t]),V=(0,b.useCallback)(async(n,r)=>{try{let i=await h.voteComment(n,r);i.success?(E(t=>{let i={...t};return i[n]===r?delete i[n]:i[n]=r,localStorage.setItem(`votes-${e}`,JSON.stringify(i)),i}),g(e=>{if(!e)return null;let t=e.comments?.map(e=>e.id===n?{...e,upvotes:i.upvotes,downvotes:i.downvotes}:e);return{...e,comments:t}}),d(m(`vote_recorded`,t))):d(i.error||m(`failed_to_vote`,t),`error`)}catch{d(m(`server_error`,t),`error`)}},[e,t]),H=(0,b.useCallback)(t=>{O(t),localStorage.setItem(`sort-${e}`,t)},[e]),U=(0,b.useCallback)(e=>{M(t=>t===e?null:e),A(t=>({...t,[e]:``}))},[]),ye=(0,b.useCallback)(async n=>{if(!e)return;let r=k[n]?.trim();if(!r||r.length<3){d(m(`reply_too_short`,t),`error`);return}try{let i=await h.postReply(n,r,t);if(i.success){A(e=>({...e,[n]:``})),M(null),d(m(`reply_posted`,t));let r=await h.getArticle(e,t);r.success&&r.article&&g(r.article)}else d(i.error||m(`failed_to_post_reply`,t),`error`)}catch{d(m(`server_error`,t),`error`)}},[e,k,t]),be=(0,b.useCallback)(async n=>{if(!(!L||!window.confirm(m(`confirm_delete_comment`,t))))try{let r=await l.deleteComment(n);if(r.success){if(d(m(`comment_deleted`,t)),!e)return;let n=await h.getArticle(e,t);n.success&&n.article&&g(n.article)}else d(r.error||m(`failed_to_delete_comment`,t),`error`)}catch{d(m(`server_error`,t),`error`)}},[e,L,t]),xe=(0,b.useCallback)(async e=>{ge(!0),P(!0),I(null);try{let n=await h.getUserProfile({userName:e});n.success&&n.profile?I(n.profile):d(n.error||m(`failed_to_fetch_profile`,t),`error`)}catch{d(m(`server_error`,t),`error`)}finally{P(!1)}},[t]),W=(0,b.useCallback)(()=>{ge(!1),I(null)},[]),G=(0,b.useCallback)(e=>{S(t=>{let n=`> "${e}"\n\n`;return t?`${t}\n${n}`:n});let t=document.getElementById(`comment-input`);t&&(t.scrollIntoView({behavior:`smooth`,block:`center`}),t.focus())},[]),K=(0,b.useRef)(null),Se=(0,b.useCallback)(async n=>{if(n.preventDefault(),!e)return;let r=new FormData(n.currentTarget);try{let e=await h.submitDocument(r);e.success?(d(m(`submission_success`,t)),K.current?.reset()):d(e.error||m(`submission_failed`,t),`error`)}catch{d(m(`server_error`,t),`error`)}},[e,t]);if(_)return(0,$.jsx)(`div`,{className:`text-center py-8`,children:(0,$.jsx)(le,{className:`w-10 h-10 animate-spin text-bbcRed`})});if(!c)return(0,$.jsx)(`div`,{className:`text-center py-8 text-danger`,children:m(`article_not_found`,t)});let q=pe.includes(c.id),J=ee(c.image)||`https://placehold.co/600x400/1a1a1a/FFF?text=BreachTimes`,Ce=J.startsWith(`http`)?J:`${window.location.origin}${J}`,Y=window.location.href;return(0,$.jsxs)(`div`,{className:`max-w-[1280px] mx-auto px-2 sm:px-3`,children:[(0,$.jsxs)(je,{children:[(0,$.jsx)(`title`,{children:c.meta_title||c.title}),(0,$.jsx)(`meta`,{name:`description`,content:c.meta_description||c.summary}),(0,$.jsx)(`meta`,{name:`keywords`,content:c.meta_keywords||``}),(0,$.jsx)(`link`,{rel:`canonical`,href:Y}),(0,$.jsx)(`meta`,{property:`og:title`,content:c.meta_title||c.title}),(0,$.jsx)(`meta`,{property:`og:description`,content:c.meta_description||c.summary}),(0,$.jsx)(`meta`,{property:`og:image`,content:Ce}),(0,$.jsx)(`meta`,{property:`og:url`,content:Y}),(0,$.jsx)(`meta`,{property:`og:type`,content:`article`})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6 lg:gap-12`,children:[(0,$.jsx)(`div`,{className:`lg:col-span-8`,children:(0,$.jsxs)(`article`,{className:`bg-card p-3 sm:p-4 md:p-5 rounded-2xl shadow-soft border border-border-color`,children:[(0,$.jsxs)(`div`,{className:`mb-4 sm:mb-6`,children:[(0,$.jsx)(`span`,{className:`bg-bbcRed text-white text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block`,children:c.category}),(0,$.jsx)(`h1`,{className:`text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold leading-tight mb-3 sm:mb-4 text-card-text`,children:c.title}),(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-muted-text font-medium`,children:[(0,$.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,$.jsx)(oe,{className:`w-4 h-4`}),` `,u(c.published_at,t)]}),c.readTime&&(0,$.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,$.jsx)(Me,{className:`w-4 h-4`}),` `,c.readTime]})]})]}),(0,$.jsx)(`div`,{className:`mb-10 relative aspect-video bg-muted-bg rounded-2xl overflow-hidden shadow-lg`,children:(0,$.jsx)(`img`,{src:ee(c.image)||`https://placehold.co/600x400/1a1a1a/FFF?text=BreachTimes`,alt:c.title,crossOrigin:`anonymous`,className:`w-full h-full object-cover`})}),(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-center justify-between border-y border-border-color py-3 sm:py-4 mb-6 sm:mb-8 gap-3 sm:gap-0`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-1 bg-muted-bg rounded-lg p-1`,children:[(0,$.jsx)(`button`,{type:`button`,onClick:()=>R(`sm`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-xs font-bold text-card-text ${y===`sm`?`bg-card`:``}`,children:`A`}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>R(`md`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-xs sm:text-sm font-bold text-card-text ${y===`md`?`bg-card`:``}`,children:`A`}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>R(`lg`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-sm sm:text-base font-bold text-card-text ${y===`lg`?`bg-card`:``}`,children:`A`})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 sm:gap-3 w-full sm:w-auto`,children:[(0,$.jsxs)(`button`,{type:`button`,"aria-label":`Share article`,onClick:z,className:`flex items-center justify-center gap-2 px-3 sm:px-4 py-2 rounded-full bg-muted-bg hover:bg-bbcRed hover:text-white transition-all text-xs sm:text-sm font-bold text-card-text flex-1 sm:flex-none`,children:[(0,$.jsx)(Pe,{className:`w-4 h-4`}),` `,m(`share`,t)]}),(0,$.jsx)(`button`,{type:`button`,"aria-label":`Toggle bookmark`,onClick:ve,className:`p-2.5 rounded-full bg-muted-bg hover:bg-bbcRed hover:text-white text-card-text transition-all shadow-sm flex items-center justify-center group`,children:(0,$.jsx)(a,{className:`w-5 h-5`,fill:q?`currentColor`:`none`})})]})]}),(0,$.jsx)(`div`,{className:`relative`,children:(0,$.jsx)(ce,{content:c.content,className:`[&_p]:leading-[1.8] [&_p]:mb-[1em] space-y-6 sm:space-y-8 text-card-text transition-all duration-300`,fontSizeClass:y===`sm`?`[&_*:not(button):not(img):not(video):not(audio)]:text-[0.95rem] [&_p]:leading-[1.6]`:y===`lg`?`[&_*:not(button):not(img):not(video):not(audio)]:text-[1.35rem] [&_p]:leading-loose`:`[&_*:not(button):not(img):not(video):not(audio)]:text-base sm:[&_*:not(button):not(img):not(video):not(audio)]:text-lg [&_p]:leading-[1.8]`,containerRef:_e,enableTextSelectionToolbar:!0,onAddComment:G})})]})}),(0,$.jsxs)(`div`,{className:`lg:col-span-4 w-full`,children:[(0,$.jsxs)(`div`,{className:`w-full space-y-4 sm:space-y-6 lg:sticky lg:top-28`,children:[c.leaked_documents&&c.leaked_documents.length>0&&(0,$.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,$.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,$.jsx)(Ne,{className:`w-5 h-5 text-bbcRed`}),m(`leaked_documents`,t)]}),(0,$.jsx)(`ul`,{className:`space-y-3`,children:c.leaked_documents.map(e=>(0,$.jsxs)(`li`,{className:`group flex items-center gap-3 p-2 rounded-lg hover:bg-muted-bg transition-colors cursor-pointer`,children:[(0,$.jsx)(`div`,{className:`w-10 h-10 rounded-lg bg-danger/10 dark:bg-danger/20 flex items-center justify-center flex-shrink-0 text-bbcRed font-bold text-xs border border-bbcRed/20`,children:e.file_type||`DOC`}),(0,$.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,$.jsx)(`p`,{className:`text-sm font-bold text-card-text truncate group-hover:text-bbcRed transition-colors`,children:e.display_name_bn||e.display_name_en}),(0,$.jsx)(`span`,{className:`text-[10px] text-muted-text uppercase tracking-wider`,children:`Download`})]}),(0,$.jsx)(`a`,{href:e.download_url||`/downloads/?file=${e.file_path}`,download:!0,target:`_blank`,rel:`noopener noreferrer`,className:`p-2 rounded-lg bg-bbcRed/10 text-bbcRed group-hover:bg-bbcRed group-hover:text-white transition-all`,children:(0,$.jsx)(r,{className:`w-4 h-4`})})]},e.id||e.display_name_en))})]}),c.documents&&c.documents.length>0&&(0,$.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,$.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,$.jsx)(r,{className:`w-5 h-5 text-bbcRed`}),m(`downloadable_documents`,t)]}),(0,$.jsx)(`ul`,{className:`space-y-3`,children:c.documents.map(e=>(0,$.jsxs)(`li`,{className:`group flex items-center gap-3 p-3 rounded-lg hover:bg-muted-bg transition-colors cursor-pointer border border-transparent hover:border-bbcRed/30`,children:[(0,$.jsx)(`div`,{className:`w-10 h-10 rounded-lg bg-muted-bg dark:bg-muted-bg flex items-center justify-center flex-shrink-0 text-card-text dark:text-card-text font-bold text-xs border border-border-color/50`,children:e.file_type}),(0,$.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,$.jsx)(`p`,{className:`text-sm font-bold text-card-text truncate group-hover:text-bbcRed transition-colors`,title:e.display_name_bn||e.display_name_en,children:t===`bn`?e.display_name_bn||e.display_name_en:e.display_name_en||e.display_name_bn}),e.file_size&&(0,$.jsxs)(`span`,{className:`text-[10px] text-muted-text uppercase tracking-wider`,children:[Math.round(e.file_size/1024),` KB`]})]}),(0,$.jsx)(`a`,{href:e.download_url||`/downloads/?file=${encodeURIComponent(e.file_path)}`,download:!0,target:`_blank`,rel:`noopener noreferrer`,className:`p-2 rounded-lg bg-bbcRed/10 text-bbcRed group-hover:bg-bbcRed group-hover:text-white transition-all`,children:(0,$.jsx)(r,{className:`w-4 h-4`})})]},e.id))})]}),(0,$.jsx)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:s?c.allow_submissions?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,$.jsx)(Le,{className:`w-5 h-5 text-bbcRed`}),m(`submit_documents`,t)]}),(0,$.jsxs)(`form`,{ref:K,onSubmit:Se,className:`space-y-4`,children:[(0,$.jsx)(`input`,{type:`hidden`,name:`article_id`,value:c.id}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{htmlFor:`document-input`,className:`block text-xs font-bold mb-2 text-muted-text`,children:m(`your_file`,t)}),(0,$.jsx)(`input`,{id:`document-input`,type:`file`,name:`document`,required:!0,className:`w-full text-xs text-card-text file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-bbcRed/10 file:text-bbcRed hover:file:bg-bbcRed/20`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{htmlFor:`message-textarea`,className:`block text-xs font-bold mb-2 text-muted-text`,children:m(`message_optional`,t)}),(0,$.jsx)(`textarea`,{id:`message-textarea`,name:`message`,rows:3,className:`w-full p-3 rounded-lg border border-border-color bg-muted-bg text-card-text text-sm focus:border-bbcRed outline-none`,placeholder:m(`write_details`,t)})]}),(0,$.jsx)(`button`,{type:`submit`,className:`w-full bg-bbcRed text-white py-2 rounded-lg font-bold text-sm hover:opacity-90 transition-opacity`,children:m(`submit`,t)})]})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`h4`,{className:`text-lg font-bold mb-2 text-card-text flex items-center gap-2`,children:[(0,$.jsx)(Q,{className:`w-5 h-5 text-muted-text`}),m(`submissions_closed`,t)]}),(0,$.jsx)(`p`,{className:`text-sm text-muted-text font-bold text-danger`,children:m(`submissions_turned_off_by_admin`,t)})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`h4`,{className:`text-lg font-bold mb-2 text-card-text flex items-center gap-2`,children:[(0,$.jsx)(Q,{className:`w-5 h-5 text-muted-text`}),t===`bn`?`à¦«à¦¾à¦‡à¦² à¦œà¦®à¦¾ à¦¦à¦¿à¦¤à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨`:`Sign in to submit`]}),(0,$.jsx)(`p`,{className:`text-sm text-muted-text mb-4`,children:t===`bn`?`à¦¨à¦¥à¦¿ à¦œà¦®à¦¾ à¦¦à¦¿à¦¤à§‡ à¦¦à¦¯à¦¼à¦¾ à¦•à¦°à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨`:`Please sign in to submit documents`}),(0,$.jsx)(i,{to:`/login`,className:`inline-block bg-bbcRed text-white px-6 py-2 rounded-full font-bold hover:bg-opacity-90 transition-all`,children:m(`sign_in`,t)})]})}),(0,$.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,$.jsx)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text`,children:m(`article_info`,t)}),(0,$.jsxs)(`div`,{className:`space-y-2 sm:space-y-3 text-xs sm:text-sm`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-center pb-2 sm:pb-3 border-b border-border-color`,children:[(0,$.jsx)(`span`,{className:`text-muted-text`,children:m(`category`,t)}),(0,$.jsx)(`span`,{className:`font-bold text-card-text`,children:c.category})]}),(0,$.jsxs)(`div`,{className:`flex justify-between items-center pb-2 sm:pb-3 border-b border-border-color`,children:[(0,$.jsx)(`span`,{className:`text-muted-text`,children:m(`published`,t)}),(0,$.jsx)(`span`,{className:`font-bold text-card-text`,children:u(c.published_at,t)})]}),c.readTime&&(0,$.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,$.jsx)(`span`,{className:`text-muted-text`,children:m(`read_time`,t)}),(0,$.jsx)(`span`,{className:`font-bold text-card-text`,children:c.readTime})]})]})]})]}),c&&ue.length>0&&(0,$.jsx)(se,{currentArticle:c,allArticles:ue})]}),(0,$.jsxs)(`div`,{className:`lg:col-span-8 bg-card p-4 sm:p-6 md:p-8 rounded-2xl shadow-soft border border-border-color`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 gap-3`,children:[(0,$.jsxs)(`h3`,{className:`text-xl sm:text-2xl font-bold text-card-text flex items-center gap-2`,children:[(0,$.jsx)(ne,{className:`w-5 sm:w-6 h-5 sm:h-6 text-bbcRed`}),` `,m(`comments`,t)]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`label`,{htmlFor:`sort-comments`,className:`text-xs font-bold text-muted-text`,children:m(`sort_by`,t)}),(0,$.jsx)(ie,{id:`sort-comments`,value:D,onChange:H,options:[{value:`newest`,label:m(`newest`,t)},{value:`oldest`,label:m(`oldest`,t)},{value:`helpful`,label:m(`most_helpful`,t)},{value:`discussed`,label:m(`most_discussed`,t)}],className:`w-32`})]})]}),(0,$.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color overflow-hidden`,children:c.comments&&c.comments.length>0?(0,$.jsx)(`div`,{className:`divide-y divide-border-color`,children:[...c.comments].sort((e,t)=>{if(D===`newest`)return new Date(t.created_at).getTime()-new Date(e.created_at).getTime();if(D===`oldest`)return new Date(e.created_at).getTime()-new Date(t.created_at).getTime();if(D===`helpful`)return t.upvotes-t.downvotes-(e.upvotes-e.downvotes);if(D===`discussed`){let n=e.replies?.length||0;return(t.replies?.length||0)-n}return 0}).map(e=>(0,$.jsxs)(`div`,{className:`p-4`,children:[(0,$.jsxs)(`div`,{className:`flex items-start gap-3 mb-2`,children:[(0,$.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-gradient-to-br from-bbcRed to-orange-500 flex items-center justify-center font-bold text-white text-sm shadow-md flex-shrink-0`,children:e.user[0].toUpperCase()}),(0,$.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,$.jsx)(`button`,{type:`button`,onClick:()=>xe(e.user),className:`font-bold text-sm text-card-text block hover:text-bbcRed cursor-pointer transition-colors bg-transparent border-none p-0`,children:e.user}),(0,$.jsx)(`span`,{className:`text-xs text-muted-text`,children:e.time})]})]}),(0,$.jsx)(`p`,{className:`text-sm text-card-text ml-12 leading-relaxed mb-3`,children:(()=>{let t=ae.sanitize(e.text),n=document.createElement(`div`);n.innerHTML=t;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,b.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))})()}),(0,$.jsxs)(`div`,{className:`ml-12 flex items-center gap-3 text-xs`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,$.jsx)(`button`,{type:`button`,onClick:()=>V(e.id,`upvote`),className:`p-1 hover:text-success transition-colors text-muted-text vote-btn-up flex items-center justify-center min-w-[36px] min-h-[36px] ${T[e.id]===`upvote`?`text-success font-bold`:``}`,title:`Upvote`,children:(0,$.jsx)(Fe,{className:`w-3 h-3`})}),(0,$.jsx)(`span`,{className:`text-xs font-bold text-muted-text min-w-[20px] text-center`,children:e.upvotes-e.downvotes}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>V(e.id,`downvote`),className:`p-1 hover:text-danger transition-colors text-muted-text vote-btn-down flex items-center justify-center min-w-[36px] min-h-[36px] ${T[e.id]===`downvote`?`text-danger font-bold`:``}`,title:`Downvote`,children:(0,$.jsx)(Ie,{className:`w-3 h-3`})})]}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>U(e.id),className:`px-3 py-1 hover:bg-bbcRed/10 dark:hover:bg-bbcRed/20 text-bbcRed rounded transition-colors font-bold text-sm`,children:m(`reply`,t)}),L&&(0,$.jsx)(`button`,{type:`button`,onClick:()=>be(e.id),className:`text-danger hover:text-danger/80 p-1 rounded hover:bg-danger/10 dark:hover:bg-danger/20`,children:(0,$.jsx)(re,{className:`w-3 h-3`})})]}),e.replies&&e.replies.length>0&&(0,$.jsx)(`div`,{className:`ml-12 mt-4 space-y-3 border-l-2 border-border-color pl-4`,children:e.replies.map(e=>(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`flex items-start gap-2 mb-1`,children:[(0,$.jsx)(`div`,{className:`w-7 h-7 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center font-bold text-white text-xs shadow-md flex-shrink-0`,children:e.user[0].toUpperCase()}),(0,$.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,$.jsx)(`span`,{className:`font-bold text-xs text-card-text block`,children:e.user}),(0,$.jsx)(`span`,{className:`text-xs text-muted-text`,children:e.time})]})]}),(0,$.jsx)(`p`,{className:`text-xs text-card-text ml-9 leading-relaxed`,children:(()=>{let t=ae.sanitize(e.text),n=document.createElement(`div`);n.innerHTML=t;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,b.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))})()})]},e.id))}),j===e.id&&(0,$.jsxs)(`div`,{className:`ml-12 mt-4 p-4 rounded-lg`,children:[(0,$.jsx)(`h4`,{className:`text-xs font-bold text-card-text mb-3`,children:m(`write_your_reply`,t)}),(0,$.jsx)(`textarea`,{value:k[e.id]||``,onChange:t=>A(n=>({...n,[e.id]:t.target.value})),placeholder:m(`write_your_reply`,t),className:`w-full p-3 rounded-lg bg-card border border-border-color text-card-text focus:ring-2 focus:ring-bbcRed/30 focus:border-bbcRed outline-none transition-all resize-none text-sm mb-3 min-h-[80px]`}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,$.jsx)(`button`,{type:`button`,onClick:()=>U(e.id),className:`px-4 py-2 rounded-lg bg-card border border-border-color hover:bg-border-color transition-colors text-sm font-bold text-card-text`,children:m(`cancel`,t)}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>ye(e.id),className:`px-4 py-2 rounded-lg bg-bbcRed hover:bg-bbcRed-hover text-white transition-colors text-sm font-bold shadow-soft hover:shadow-soft-hover`,children:m(`send_reply`,t)})]})]})]},e.id))}):(0,$.jsx)(`div`,{className:`text-center py-8 text-muted-text`,children:m(`no_comments_yet`,t)})}),(0,$.jsx)(`div`,{className:`border-t border-border-color pt-6`,children:s?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`h4`,{className:`font-bold text-sm text-card-text mb-4`,children:m(`write_your_comment`,t)}),(0,$.jsx)(`textarea`,{id:`comment-input`,className:`w-full p-4 rounded-xl border border-border-color bg-card text-card-text focus:ring-2 focus:ring-bbcRed/20 focus:border-bbcRed outline-none transition-all resize-y text-base min-h-[150px]`,placeholder:m(`write_your_comment`,t),value:x,onChange:e=>S(e.target.value)}),(0,$.jsxs)(`div`,{className:`flex justify-between items-center mt-3 gap-4`,children:[(0,$.jsxs)(`div`,{className:`text-xs text-muted-text`,children:[x.length,`/5000`]}),C&&(0,$.jsx)(`div`,{className:`text-xs text-danger font-bold`,children:C}),(0,$.jsx)(`button`,{type:`button`,onClick:B,className:`bg-bbcRed text-white px-6 py-2.5 rounded-full font-bold hover:bg-opacity-90 hover:shadow-lg hover:-translate-y-0.5 transition-all text-sm`,children:m(`post_comment`,t)})]})]}):(0,$.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-8 text-center`,children:[(0,$.jsx)(Q,{className:`w-12 h-12 text-muted-text mb-3`}),(0,$.jsx)(`p`,{className:`text-card-text font-bold mb-3`,children:t===`bn`?`à¦®à¦¨à§à¦¤à¦¬à§à¦¯ à¦•à¦°à¦¤à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨`:`Sign in to comment`}),(0,$.jsx)(i,{to:`/login`,className:`bg-bbcRed text-white px-6 py-2 rounded-full font-bold hover:bg-opacity-90 transition-all`,children:m(`sign_in`,t)})]})})]})]}),he&&(0,$.jsx)(`button`,{type:`button`,onClick:W,onKeyDown:e=>{e.key===`Escape`&&W()},className:`fixed inset-0 bg-black/50 dark:bg-black/70 z-[200] flex items-center justify-center p-4 border-none`,children:(0,$.jsxs)(`div`,{role:`dialog`,"aria-modal":`true`,"aria-labelledby":`profile-modal-title`,className:`bg-card rounded-2xl shadow-2xl border border-border-color max-w-md w-full max-h-[90vh] overflow-y-auto`,onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`sticky top-0 bg-card border-b border-border-color p-4 flex items-center justify-between`,children:[(0,$.jsxs)(`h3`,{className:`text-xl font-bold text-card-text`,children:[`ðŸ‘¤ `,m(`user_profile`,t)]}),(0,$.jsx)(`button`,{type:`button`,onClick:W,className:`p-2 hover:bg-muted-bg rounded-lg transition-colors`,children:(0,$.jsx)(te,{className:`w-5 h-5`})})]}),(0,$.jsx)(`div`,{id:`profile-content`,className:`p-6 space-y-4`,children:N?(0,$.jsx)(`div`,{className:`flex items-center justify-center py-8`,children:(0,$.jsx)(le,{className:`w-6 h-6 animate-spin text-bbcRed`})}):F?(0,$.jsxs)(`div`,{className:`space-y-4`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-4 pb-4 border-b border-border-color`,children:[(0,$.jsx)(`div`,{className:`w-16 h-16 rounded-full bg-gradient-to-br from-bbcRed to-orange-500 flex items-center justify-center font-bold text-white text-2xl shadow-lg`,children:F.displayName[0].toUpperCase()}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h4`,{className:`text-lg font-bold text-card-text`,children:F.displayName}),(0,$.jsx)(`p`,{className:`text-xs text-muted-text`,children:F.email})]})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,$.jsxs)(`div`,{className:`bg-muted-bg p-3 rounded-lg border border-border-color`,children:[(0,$.jsx)(`div`,{className:`text-2xl font-bold text-bbcRed`,children:F.commentCount}),(0,$.jsx)(`div`,{className:`text-xs text-muted-text`,children:m(`comments_count`,t)})]}),(0,$.jsxs)(`div`,{className:`bg-muted-bg p-3 rounded-lg border border-border-color`,children:[(0,$.jsx)(`div`,{className:`text-2xl font-bold text-success`,children:F.upvotes}),(0,$.jsx)(`div`,{className:`text-xs text-muted-text`,children:m(`received_likes`,t)})]})]}),F.recentComments&&F.recentComments.length>0&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`text-sm font-bold text-card-text mb-2`,children:m(`recent_comments`,t)}),(0,$.jsx)(`div`,{className:`space-y-2`,children:F.recentComments.map(e=>(0,$.jsxs)(`div`,{className:`bg-muted-bg p-2 rounded-lg text-xs text-card-text border border-border-color`,children:[(0,$.jsxs)(`p`,{className:`mb-1`,children:[`"`,e.text,`"`]}),(0,$.jsxs)(`div`,{className:`flex items-center justify-between text-muted-text text-xs`,children:[(0,$.jsx)(`span`,{children:e.time}),(0,$.jsxs)(`span`,{children:[(0,$.jsx)(Fe,{className:`w-3 h-3 inline-block mr-1`}),` `,e.upvotes]})]})]},`comment-${e.text.substring(0,20)}`))})]})]}):(0,$.jsx)(`div`,{className:`text-center py-8`,children:(0,$.jsx)(`p`,{className:`text-muted-text`,children:m(`user_profile_not_found`,t)})})})]})})]})};export{Me as n,Te as r,Re as t};