import{r as e}from"./rolldown-runtime-Ckerh37x.js";import{h as t,p as n,t as r}from"./vendor-react-BM5KEv9z.js";import{V as i,m as a,u as o,y as s}from"./vendor-ui-C5Vdypzg.js";import{o as c}from"./index-C946C_fX.js";var l=n(),u=e(t(),1),d=e(r(),1),f=e=>{let t=(0,l.c)(56),{isOpen:n,onClose:r,onSave:i,category:a}=e,o;t[0]===a?o=t[1]:(o=()=>a?{...a}:{id:``,title_bn:``,title_en:``,color:`var(--color-bbcRed)`},t[0]=a,t[1]=o);let[s,c]=(0,u.useState)(o),f;if(a){let e;t[2]===a?e=t[3]:(e={...a},t[2]=a,t[3]=e),f=e}else{let e;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(e={id:``,title_bn:``,title_en:``,color:`var(--color-bbcRed)`},t[4]=e):e=t[4],f=e}let p=f,m,h;t[5]===p?(m=t[6],h=t[7]):(m=()=>{c(p)},h=[p],t[5]=p,t[6]=m,t[7]=h),(0,u.useEffect)(m,h);let g;t[8]!==s||t[9]!==i?(g=e=>{e.preventDefault(),i(s)},t[8]=s,t[9]=i,t[10]=g):g=t[10];let _=g;if(!n)return null;let v=a?.id?`বিভাগ সম্পাদনা করুন`:`নতুন বিভাগ`,y;t[11]===v?y=t[12]:(y=(0,d.jsx)(`h2`,{className:`text-xl font-bold mb-4`,children:v}),t[11]=v,t[12]=y);let b;t[13]===Symbol.for(`react.memo_cache_sentinel`)?(b=(0,d.jsx)(`label`,{htmlFor:`category-id`,className:`block text-sm font-bold mb-1`,children:`আইডি (স্লাগ)`}),t[13]=b):b=t[13];let x=s.id||``,S;t[14]===s?S=t[15]:(S=e=>c({...s,id:e.target.value}),t[14]=s,t[15]=S);let C=!!a?.id,w;t[16]!==S||t[17]!==C||t[18]!==x?(w=(0,d.jsxs)(`div`,{children:[b,(0,d.jsx)(`input`,{id:`category-id`,name:`id`,value:x,onChange:S,required:!0,readOnly:C,className:`w-full p-3 sm:p-2.5 rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none text-sm sm:text-base`})]}),t[16]=S,t[17]=C,t[18]=x,t[19]=w):w=t[19];let T;t[20]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,d.jsx)(`label`,{htmlFor:`category-title-bn`,className:`block text-sm font-bold mb-1`,children:`শিরোনাম (বাংলা)`}),t[20]=T):T=t[20];let E=s.title_bn||``,D;t[21]===s?D=t[22]:(D=e=>c({...s,title_bn:e.target.value}),t[21]=s,t[22]=D);let O;t[23]!==E||t[24]!==D?(O=(0,d.jsxs)(`div`,{children:[T,(0,d.jsx)(`input`,{id:`category-title-bn`,name:`title_bn`,value:E,onChange:D,required:!0,className:`w-full p-2.5 sm:p-3 text-sm sm:text-base rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind`})]}),t[23]=E,t[24]=D,t[25]=O):O=t[25];let k;t[26]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,d.jsx)(`label`,{htmlFor:`category-title-en`,className:`block text-xs sm:text-sm font-bold mb-1`,children:`শিরোনাম (ইংরেজি)`}),t[26]=k):k=t[26];let A=s.title_en||``,j;t[27]===s?j=t[28]:(j=e=>c({...s,title_en:e.target.value}),t[27]=s,t[28]=j);let M;t[29]!==A||t[30]!==j?(M=(0,d.jsxs)(`div`,{children:[k,(0,d.jsx)(`input`,{id:`category-title-en`,name:`title_en`,value:A,onChange:j,required:!0,className:`w-full p-2.5 sm:p-3 text-sm sm:text-base rounded-lg border border-border-color bg-card focus:border-bbcRed outline-none font-hind`})]}),t[29]=A,t[30]=j,t[31]=M):M=t[31];let N;t[32]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,d.jsx)(`label`,{htmlFor:`category-color`,className:`block text-sm font-bold mb-1`,children:`রং`}),t[32]=N):N=t[32];let P=s.color||`var(--color-bbcRed)`,F;t[33]===s?F=t[34]:(F=e=>c({...s,color:e.target.value}),t[33]=s,t[34]=F);let I=s.color||`var(--color-bbcRed)`,L;t[35]===I?L=t[36]:(L={color:I},t[35]=I,t[36]=L);let R;t[37]!==P||t[38]!==F||t[39]!==L?(R=(0,d.jsxs)(`div`,{children:[N,(0,d.jsx)(`input`,{type:`color`,id:`category-color`,name:`color`,value:P,onChange:F,className:`w-full h-10 rounded cursor-pointer`,style:L})]}),t[37]=P,t[38]=F,t[39]=L,t[40]=R):R=t[40];let z;t[41]===r?z=t[42]:(z=(0,d.jsx)(`button`,{type:`button`,onClick:r,className:`px-4 py-2 text-sm font-bold text-muted-text hover:text-card-text hover:bg-muted-bg rounded-lg`,children:`বাতিল`}),t[41]=r,t[42]=z);let B;t[43]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,d.jsx)(`button`,{type:`submit`,className:`px-4 py-2 bg-bbcRed text-white rounded-lg font-bold text-sm hover:opacity-90 transition-opacity`,children:`সংরক্ষণ`}),t[43]=B):B=t[43];let V;t[44]===z?V=t[45]:(V=(0,d.jsxs)(`div`,{className:`flex justify-end gap-2 mt-6`,children:[z,B]}),t[44]=z,t[45]=V);let H;t[46]!==_||t[47]!==w||t[48]!==O||t[49]!==M||t[50]!==R||t[51]!==V?(H=(0,d.jsxs)(`form`,{onSubmit:_,className:`space-y-4`,children:[w,O,M,R,V]}),t[46]=_,t[47]=w,t[48]=O,t[49]=M,t[50]=R,t[51]=V,t[52]=H):H=t[52];let U;return t[53]!==H||t[54]!==y?(U=(0,d.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[100]`,children:(0,d.jsxs)(`div`,{className:`bg-card w-full max-w-md p-6 rounded-xl shadow-2xl`,children:[y,H]})}),t[53]=H,t[54]=y,t[55]=U):U=t[55],U},p=()=>{let[e,t]=(0,u.useState)([]),[n,r]=(0,u.useState)(!0),[l,p]=(0,u.useState)(null),[m,h]=(0,u.useState)(!1),[g,_]=(0,u.useState)(null),v=(0,u.useCallback)(async()=>{r(!0);try{let e=await c.getCategories();if(e.success)t(e.data||[]);else throw Error(e.message||`Failed to fetch categories`)}catch{p(`বিভাগগুলি আনতে ব্যর্থ হয়েছে`)}finally{r(!1)}},[]);(0,u.useEffect)(()=>{v()},[v]);let y=(e=null)=>{_(e),h(!0)},b=()=>{h(!1),_(null)},x=async e=>{try{await c.saveCategory(e),b(),v()}catch{}},S=async e=>{if(window.confirm(`আপনি কি নিশ্চিত যে আপনি এই বিভাগটি মুছে ফেলতে চান?`))try{await c.deleteCategory(e),v()}catch{}};return(0,d.jsxs)(`div`,{children:[(0,d.jsx)(f,{isOpen:m,onClose:b,onSave:x,category:g}),(0,d.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4 mb-4 sm:mb-6`,children:[(0,d.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold`,children:`বিভাগ পরিচালনা করুন`}),(0,d.jsxs)(`button`,{type:`button`,onClick:()=>y(),className:`bg-bbcRed text-white px-3 sm:px-4 py-2 rounded-lg font-bold text-sm sm:text-base flex items-center gap-2 whitespace-nowrap`,children:[(0,d.jsx)(s,{className:`w-4 h-4`}),` নতুন বিভাগ`]})]}),(0,d.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color shadow-sm overflow-hidden`,children:n?(0,d.jsx)(`div`,{className:`p-8 text-center text-muted-text`,children:`লোড হচ্ছে...`}):l?(0,d.jsx)(`div`,{className:`p-8 text-center text-danger`,children:l}):e.length===0?(0,d.jsxs)(`div`,{className:`p-8 text-center text-muted-text`,children:[(0,d.jsx)(i,{className:`w-16 h-16 mx-auto mb-4 text-border-color`}),(0,d.jsx)(`p`,{className:`text-lg font-bold mb-2`,children:`কোনো বিভাগ পাওয়া যায়নি`})]}):(0,d.jsx)(`div`,{className:`grid grid-cols-1 gap-4 p-4`,children:e.map(e=>(0,d.jsx)(`div`,{className:`bg-card p-3 sm:p-4 rounded-lg border border-border-color group hover:bg-muted-bg transition-colors`,children:(0,d.jsxs)(`div`,{className:`flex items-start justify-between gap-2`,children:[(0,d.jsxs)(`div`,{className:`flex items-center gap-2 sm:gap-3 min-w-0`,children:[(0,d.jsx)(`div`,{className:`font-mono text-xs sm:text-sm font-bold text-card-text flex-shrink-0`,children:e.id}),(0,d.jsxs)(`div`,{className:`truncate`,children:[(0,d.jsx)(`div`,{className:`font-bold text-xs sm:text-sm truncate`,children:e.title_bn}),(0,d.jsx)(`div`,{className:`text-xs truncate`,children:e.title_en})]})]}),(0,d.jsxs)(`div`,{className:`flex items-center gap-2 flex-shrink-0`,children:[(0,d.jsx)(`div`,{className:`w-6 sm:w-8 h-6 sm:h-8 rounded-lg border border-border-color`,style:{backgroundColor:e.color}}),(0,d.jsx)(`div`,{className:`text-xs text-muted-text hidden md:block`,children:e.color})]}),(0,d.jsxs)(`div`,{className:`flex items-center gap-1 flex-shrink-0`,children:[(0,d.jsx)(`button`,{type:`button`,onClick:()=>y(e),className:`p-2 text-card-text hover:bg-muted-bg rounded`,children:(0,d.jsx)(a,{className:`w-4 h-4`})}),(0,d.jsx)(`button`,{type:`button`,onClick:()=>S(e.id),className:`p-2 text-danger hover:bg-danger/10 rounded`,children:(0,d.jsx)(o,{className:`w-4 h-4`})})]})]})},e.id))})})]})};export{p as default};