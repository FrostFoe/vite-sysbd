import{r as e}from"./rolldown-runtime-Ckerh37x.js";import{h as t,p as n,t as r,u as i}from"./vendor-react-BM5KEv9z.js";import{t as a}from"./vendor-BcXgp--U.js";import{E as o,H as s,J as c,M as l,O as ee,R as u,S as d,V as te,W as f,d as p,f as ne,h as re,i as ie,j as m,n as ae,r as h,s as g,tt as _,u as oe,y as v,z as y}from"./vendor-ui-D58bueRV.js";import{c as b,d as x,g as S,h as C,m as w,o as T,p as se,s as E,t as ce,u as D}from"./index-DtnX_pcH.js";var O=n(),k=e(t(),1),A=e(r(),1),j=e=>{let t=(0,O.c)(45),{src:n,alt:r,title:i,className:a,width:o,height:c,caption:l,showCaption:ee}=e,u=r===void 0?``:r,d=a===void 0?``:a,f=ee===void 0?!0:ee,[p,ne]=(0,k.useState)(!0),[re,ie]=(0,k.useState)(!1),[m,ae]=(0,k.useState)(!0),h;t[0]===n?h=t[1]:(h=se(n),t[0]=n,t[1]=h);let g=h,_;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(_=()=>{ne(!1)},t[2]=_):_=t[2];let oe=_,v;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(v=()=>{ne(!1),ie(!0)},t[3]=v):v=t[3];let y=v,b;t[4]===m?b=t[5]:(b=()=>{ae(!m)},t[4]=m,t[5]=b);let x=b;if(!m){let e=`relative w-full bg-muted-bg border border-border-color rounded-lg flex items-center justify-center cursor-pointer ${d}`,n;t[6]===x?n=t[7]:(n=e=>{(e.key===`Enter`||e.key===` `)&&x()},t[6]=x,t[7]=n);let r=m?`Hide image`:`Show image`,i;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,A.jsxs)(`div`,{className:`text-center p-4`,children:[(0,A.jsx)(s,{className:`w-8 h-8 mx-auto text-muted-text`}),(0,A.jsx)(`p`,{className:`mt-2 text-sm text-muted-text`,children:`Image hidden`}),(0,A.jsx)(`p`,{className:`text-xs text-muted-text`,children:`Click to show`})]}),t[8]=i):i=t[8];let a;return t[9]!==r||t[10]!==e||t[11]!==n||t[12]!==x?(a=(0,A.jsx)(`button`,{type:`button`,className:e,onClick:x,onKeyDown:n,"aria-label":r,children:i}),t[9]=r,t[10]=e,t[11]=n,t[12]=x,t[13]=a):a=t[13],a}if(re){let e=`relative w-full bg-muted-bg border border-border-color rounded-lg flex items-center justify-center ${d}`,n,r;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,A.jsx)(`div`,{className:`bg-muted-bg border-2 border-dashed border-border-color rounded-xl w-16 h-16 mx-auto`}),n=(0,A.jsx)(`p`,{className:`mt-2 text-sm text-muted-text`,children:`Image failed to load`}),t[14]=n,t[15]=r):(n=t[14],r=t[15]);let i;t[16]===g?i=t[17]:(i=(0,A.jsxs)(`div`,{className:`text-center p-4`,children:[r,n,(0,A.jsx)(`p`,{className:`text-xs text-muted-text`,children:g})]}),t[16]=g,t[17]=i);let a;return t[18]!==i||t[19]!==e?(a=(0,A.jsx)(`div`,{className:e,children:i}),t[18]=i,t[19]=e,t[20]=a):a=t[20],a}let S=`relative ${d}`,C;t[21]===p?C=t[22]:(C=p&&(0,A.jsx)(`div`,{className:`absolute inset-0 bg-muted-bg animate-pulse rounded-lg flex items-center justify-center`,children:(0,A.jsx)(`span`,{className:`text-sm text-muted-text`,children:`Loading...`})}),t[21]=p,t[22]=C);let w=`w-full h-auto rounded-lg ${p?`opacity-0`:`opacity-100`} transition-opacity duration-300`,T;t[23]!==u||t[24]!==c||t[25]!==g||t[26]!==w||t[27]!==i||t[28]!==o?(T=(0,A.jsx)(`img`,{src:g,alt:u,title:i,width:o,height:c,crossOrigin:`anonymous`,onLoad:oe,onError:y,className:w}),t[23]=u,t[24]=c,t[25]=g,t[26]=w,t[27]=i,t[28]=o,t[29]=T):T=t[29];let E;t[30]!==l||t[31]!==f?(E=f&&l&&(0,A.jsx)(`figcaption`,{className:`mt-2 text-sm text-center text-muted-text italic`,children:l}),t[30]=l,t[31]=f,t[32]=E):E=t[32];let ce=m?`Hide image`:`Show image`,D;t[33]===m?D=t[34]:(D=m?(0,A.jsx)(s,{className:`w-4 h-4`}):(0,A.jsx)(te,{className:`w-4 h-4`}),t[33]=m,t[34]=D);let j;t[35]!==ce||t[36]!==D||t[37]!==x?(j=(0,A.jsx)(`button`,{type:`button`,onClick:x,className:`absolute top-2 right-2 p-1.5 bg-black/50 hover:bg-black/70 text-white rounded-full transition-all opacity-0 hover:opacity-100 group-hover:opacity-100`,"aria-label":ce,children:D}),t[35]=ce,t[36]=D,t[37]=x,t[38]=j):j=t[38];let M;return t[39]!==T||t[40]!==E||t[41]!==j||t[42]!==S||t[43]!==C?(M=(0,A.jsxs)(`figure`,{className:S,children:[C,T,E,j]}),t[39]=T,t[40]=E,t[41]=j,t[42]=S,t[43]=C,t[44]=M):M=t[44],M},M=n(),N=e=>{let t=(0,M.c)(56),{src:n,alt:r,title:i,className:a,width:o,height:s,poster:c,caption:l,showCaption:u,loop:te,muted:f,controls:p}=e,ne=r===void 0?``:r,re=a===void 0?``:a,m=o===void 0?`100%`:o,ae=s===void 0?`auto`:s,g=u===void 0?!0:u,_=te===void 0?!1:te,oe=f===void 0?!1:f,y=p===void 0?!0:p,[b,x]=(0,k.useState)(!1),[S,C]=(0,k.useState)(oe),[w,T]=(0,k.useState)(!0),[E,ce]=(0,k.useState)(!1),D=(0,k.useRef)(null),O;t[0]===n?O=t[1]:(O=se(n),t[0]=n,t[1]=O);let j=O,N;t[2]===c?N=t[3]:(N=se(c),t[2]=c,t[3]=N);let P=N,F;t[4]===b?F=t[5]:(F=()=>{D.current&&(b?(D.current.pause(),x(!1)):(D.current.play(),x(!0)))},t[4]=b,t[5]=F);let I=F,L;t[6]===S?L=t[7]:(L=()=>{D.current&&(D.current.muted=!S,C(!S))},t[6]=S,t[7]=L);let R=L,z;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(z=()=>{T(!0)},t[8]=z):z=t[8];let le=z,B;t[9]===Symbol.for(`react.memo_cache_sentinel`)?(B=()=>{T(!1)},t[9]=B):B=t[9];let ue=B,V;t[10]===Symbol.for(`react.memo_cache_sentinel`)?(V=()=>{T(!1),ce(!0)},t[10]=V):V=t[10];let de=V,H;t[11]===_?H=t[12]:(H=()=>{D.current&&D.current.currentTime>=D.current.duration-.1&&!_&&x(!1)},t[11]=_,t[12]=H);let U=H,W;t[13]===_?W=t[14]:(W=()=>{_||x(!1)},t[13]=_,t[14]=W);let G=W;if(E){let e=`relative w-full bg-muted-bg border border-border-color rounded-lg flex flex-col items-center justify-center ${re}`,n,r;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,A.jsx)(`div`,{className:`bg-muted-bg border-2 border-dashed border-border-color rounded-xl w-16 h-16 mx-auto flex items-center justify-center`,children:(0,A.jsx)(v,{className:`w-6 h-6 text-muted-text`})}),r=(0,A.jsx)(`p`,{className:`mt-2 text-sm text-muted-text`,children:`Video failed to load`}),t[15]=n,t[16]=r):(n=t[15],r=t[16]);let i;t[17]===j?i=t[18]:(i=(0,A.jsxs)(`div`,{className:`p-4 text-center`,children:[n,r,(0,A.jsx)(`p`,{className:`text-xs text-muted-text`,children:j})]}),t[17]=j,t[18]=i);let a;return t[19]!==e||t[20]!==i?(a=(0,A.jsx)(`div`,{className:e,children:i}),t[19]=e,t[20]=i,t[21]=a):a=t[21],a}let K=`relative ${re}`,q;t[22]===w?q=t[23]:(q=w&&(0,A.jsx)(`div`,{className:`absolute inset-0 bg-card flex items-center justify-center`,children:(0,A.jsx)(`div`,{className:`animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-white`})}),t[22]=w,t[23]=q);let fe=`w-full h-auto ${w?`opacity-0`:`opacity-100`} transition-opacity duration-300`,pe,J;t[24]===Symbol.for(`react.memo_cache_sentinel`)?(pe=()=>x(!0),J=()=>x(!1),t[24]=pe,t[25]=J):(pe=t[24],J=t[25]);let me=ne||`Video content`,Y;t[26]!==y||t[27]!==U||t[28]!==G||t[29]!==ae||t[30]!==S||t[31]!==_||t[32]!==P||t[33]!==j||t[34]!==fe||t[35]!==me||t[36]!==i||t[37]!==m?(Y=(0,A.jsx)(`video`,{ref:D,src:j,poster:P,loop:_,muted:S,controls:y,width:m,height:ae,title:i,crossOrigin:`anonymous`,className:fe,onPlay:pe,onPause:J,onEnded:G,onTimeUpdate:U,onLoadStart:le,onCanPlay:ue,onError:de,"aria-label":me}),t[26]=y,t[27]=U,t[28]=G,t[29]=ae,t[30]=S,t[31]=_,t[32]=P,t[33]=j,t[34]=fe,t[35]=me,t[36]=i,t[37]=m,t[38]=Y):Y=t[38];let X;t[39]!==y||t[40]!==R||t[41]!==I||t[42]!==S||t[43]!==b?(X=!y&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity`,children:(0,A.jsx)(`button`,{type:`button`,onClick:I,className:`bg-black/50 hover:bg-black/70 text-white p-4 rounded-full transition-all`,"aria-label":b?`Pause video`:`Play video`,children:b?(0,A.jsx)(d,{className:`w-8 h-8`}):(0,A.jsx)(v,{className:`w-8 h-8`})})}),(0,A.jsxs)(`div`,{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 opacity-0 hover:opacity-100 transition-opacity flex justify-between items-center`,children:[(0,A.jsx)(`button`,{type:`button`,onClick:R,className:`text-white hover:text-white/80`,"aria-label":S?`Unmute video`:`Mute video`,children:S?(0,A.jsx)(h,{className:`w-5 h-5`}):(0,A.jsx)(ie,{className:`w-5 h-5`})}),(0,A.jsx)(`button`,{type:`button`,onClick:()=>{D.current&&D.current.requestFullscreen?.()},className:`text-white hover:text-white/80`,"aria-label":`Enter fullscreen`,children:(0,A.jsx)(ee,{className:`w-5 h-5`})})]})]}),t[39]=y,t[40]=R,t[41]=I,t[42]=S,t[43]=b,t[44]=X):X=t[44];let Z;t[45]!==q||t[46]!==Y||t[47]!==X?(Z=(0,A.jsxs)(`div`,{className:`relative bg-black rounded-lg overflow-hidden`,children:[q,Y,X]}),t[45]=q,t[46]=Y,t[47]=X,t[48]=Z):Z=t[48];let Q;t[49]!==l||t[50]!==g?(Q=g&&l&&(0,A.jsx)(`figcaption`,{className:`mt-2 text-sm text-center text-muted-text italic`,children:l}),t[49]=l,t[50]=g,t[51]=Q):Q=t[51];let $;return t[52]!==K||t[53]!==Z||t[54]!==Q?($=(0,A.jsxs)(`figure`,{className:K,children:[Z,Q]}),t[52]=K,t[53]=Z,t[54]=Q,t[55]=$):$=t[55],$},P=n(),F=e=>{let t=(0,P.c)(7),{content:n,className:r}=e,i=r===void 0?``:r,o,s;if(t[0]!==i||t[1]!==n){let e=a.sanitize(n);o=`prose max-w-none ${i}`,s=(()=>{let t=e,n=[];return t=t.replace(/<img\s+([^>]*?)\s*>/gi,(e,t)=>{let r=t.match(/src\s*=\s*["']([^"']*)["']/i),i=t.match(/alt\s*=\s*["']([^"']*)["']/i),a=t.match(/title\s*=\s*["']([^"']*)["']/i),o=t.match(/width\s*=\s*["']([^"']*)["']/i),s=t.match(/height\s*=\s*["']([^"']*)["']/i),c=n.length;return n.push((0,A.jsx)(j,{src:r?r[1]:``,alt:i?i[1]:``,title:a?a[1]:``,width:o?o[1]:void 0,height:s?s[1]:void 0,className:`my-4`},`img-${c}`)),`__CUSTOM_COMPONENT_PLACEHOLDER_${c}__`}),t=t.replace(/<video\s+([^>]*?)\s*\/?>.*?<\/video>|<video\s+([^>]*?)\s*>/gi,e=>{let t=e.match(/src\s*=\s*["']([^"']*)["']/i),r=e.match(/poster\s*=\s*["']([^"']*)["']/i),i=e.match(/alt\s*=\s*["']([^"']*)["']/i),a=e.match(/title\s*=\s*["']([^"']*)["']/i),o=e.match(/width\s*=\s*["']([^"']*)["']/i),s=e.match(/height\s*=\s*["']([^"']*)["']/i),c=e.includes(`loop`),l=e.includes(`muted`),ee=e.includes(`controls`),u=n.length;return n.push((0,A.jsx)(N,{src:t?t[1]:``,poster:r?r[1]:``,alt:i?i[1]:``,title:a?a[1]:``,width:o?o[1]:void 0,height:s?s[1]:void 0,loop:c,muted:l,controls:ee,className:`my-4`},`video-${u}`)),`__CUSTOM_COMPONENT_PLACEHOLDER_${u}__`}),t.split(/(__CUSTOM_COMPONENT_PLACEHOLDER_\d+__)/).map((e,t)=>{if(e.startsWith(`__CUSTOM_COMPONENT_PLACEHOLDER_`)){let t=e.match(/__CUSTOM_COMPONENT_PLACEHOLDER_(\d+)__/);if(t)return n[parseInt(t[1],10)]}else if(e.trim()){let n=a.sanitize(e),r=document.createElement(`div`);r.innerHTML=n;let i=(e,t)=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let n=e,r={key:t};for(let e=0;e<n.attributes.length;e++){let t=n.attributes[e],i=t.name===`class`?`className`:t.name;r[i]=t.value}let a=Array.from(n.childNodes).map((e,n)=>i(e,`${t}-child-${n}`));return(0,k.createElement)(n.tagName.toLowerCase(),r,...a)}return null};return Array.from(r.childNodes).map((e,n)=>i(e,`part-${t}-node-${n}`))}return null}).filter(Boolean)})(),t[0]=i,t[1]=n,t[2]=o,t[3]=s}else o=t[2],s=t[3];let c;return t[4]!==o||t[5]!==s?(c=(0,A.jsx)(`div`,{className:o,children:s}),t[4]=o,t[5]=s,t[6]=c):c=t[6],c},I=()=>{let{id:e}=i(),{language:t}=S(),{user:n}=ce(),[r,s]=(0,k.useState)(null),[ee,d]=(0,k.useState)(!0),[te,ie]=(0,k.useState)([]),[h,v]=(0,k.useState)(`md`),[D,O]=(0,k.useState)(``),[j,M]=(0,k.useState)(``),[N,P]=(0,k.useState)({}),[I,L]=(0,k.useState)(`newest`),[R,z]=(0,k.useState)({}),[le,B]=(0,k.useState)(null),[ue,V]=(0,k.useState)(!1),[de,H]=(0,k.useState)(!1),[U,W]=(0,k.useState)(null),G=n?.role===`admin`;(0,k.useEffect)(()=>{try{let t=localStorage.getItem(`breachtimes-bookmarks`);if(t&&ie(JSON.parse(t)),e){let t=localStorage.getItem(`votes-${e}`);t&&P(JSON.parse(t));let n=localStorage.getItem(`sort-${e}`);n&&L(n)}}catch{}},[e]),(0,k.useEffect)(()=>{(async()=>{if(e){d(!0);try{let n=await E.getArticle(e,t);n.success&&n.article?s(n.article):s(null)}catch{s(null)}finally{d(!1)}}})()},[e,t]);let K=(0,k.useCallback)(e=>{v(e);let t=document.querySelector(`.prose`);if(t){let n={sm:[`text-[0.95rem]`,`leading-[1.6]`],md:[`text-lg`,`leading-[1.8]`],lg:[`text-[1.35rem]`,`leading-loose`]};Object.values(n).flat().forEach(e=>{t.classList.remove(`[&_p]:${e.replace(`text-lg`,`text-base`)}`),t.classList.remove(`[&_p]:${e}`)}),n[e].forEach(e=>{t.classList.add(`[&_p]:${e}`)})}},[]);(0,k.useEffect)(()=>{K(h)},[h,K]);let q=(0,k.useCallback)(()=>{e&&ie(n=>{let r=n.indexOf(e),i=r>-1?n.filter(t=>t!==e):[...n,e];return localStorage.setItem(`breachtimes-bookmarks`,JSON.stringify(i)),w(C(r>-1?`removed`:`saved_successfully`,t)),i})},[e,t]),fe=(0,k.useCallback)(()=>{navigator.share?navigator.share({title:r?.title||document.title,url:window.location.href}).catch(()=>{}):navigator.clipboard.writeText(window.location.href).then(()=>{w(C(`link_copied`,t))})},[r,t]),pe=(0,k.useCallback)(async()=>{if(!e)return;M(``);let n=D.trim();if(n.length<3){M(C(`comment_too_short`,t));return}if(n.length>5e3){M(C(`comment_too_long`,t));return}try{let r=await E.postComment(e,n,t);if(r.success){O(``),w(C(`comment_posted`,t));let n=await E.getArticle(e,t);n.success&&n.article&&s(n.article)}else M(r.error||C(`failed_to_post_comment`,t))}catch{M(C(`server_error`,t))}},[e,D,t]),J=(0,k.useCallback)(async(n,r)=>{try{let i=await E.voteComment(n,r);i.success?(P(t=>{let i={...t};return i[n]===r?delete i[n]:i[n]=r,localStorage.setItem(`votes-${e}`,JSON.stringify(i)),i}),s(e=>{if(!e)return null;let t=e.comments?.map(e=>e.id===n?{...e,upvotes:i.upvotes,downvotes:i.downvotes}:e);return{...e,comments:t}}),w(C(`vote_recorded`,t))):w(i.error||C(`failed_to_vote`,t),`error`)}catch{w(C(`server_error`,t),`error`)}},[e,t]),me=(0,k.useCallback)(t=>{L(t),localStorage.setItem(`sort-${e}`,t)},[e]),Y=(0,k.useCallback)(e=>{B(t=>t===e?null:e),z(t=>({...t,[e]:``}))},[]),X=(0,k.useCallback)(async n=>{if(!e)return;let r=R[n]?.trim();if(!r||r.length<3){w(C(`reply_too_short`,t),`error`);return}try{let i=await E.postReply(n,r,t);if(i.success){z(e=>({...e,[n]:``})),B(null),w(C(`reply_posted`,t));let r=await E.getArticle(e,t);r.success&&r.article&&s(r.article)}else w(i.error||C(`failed_to_post_reply`,t),`error`)}catch{w(C(`server_error`,t),`error`)}},[e,R,t]),Z=(0,k.useCallback)(async n=>{if(!(!G||!window.confirm(C(`confirm_delete_comment`,t))))try{let r=await T.deleteComment(n);if(r.success){if(w(C(`comment_deleted`,t)),!e)return;let n=await E.getArticle(e,t);n.success&&n.article&&s(n.article)}else w(r.error||C(`failed_to_delete_comment`,t),`error`)}catch{w(C(`server_error`,t),`error`)}},[e,G,t]),Q=(0,k.useCallback)(async e=>{V(!0),H(!0),W(null);try{let n=await E.getUserProfile({userName:e});n.success&&n.profile?W(n.profile):w(n.error||C(`failed_to_fetch_profile`,t),`error`)}catch{w(C(`server_error`,t),`error`)}finally{H(!1)}},[t]),$=(0,k.useCallback)(()=>{V(!1),W(null)},[]),he=(0,k.useRef)(null),ge=(0,k.useCallback)(async n=>{if(n.preventDefault(),!e)return;let r=new FormData(n.currentTarget);try{let e=await E.submitDocument(r);e.success?(w(C(`submission_success`,t)),he.current?.reset()):w(e.error||C(`submission_failed`,t),`error`)}catch{w(C(`server_error`,t),`error`)}},[e,t]);if(ee)return(0,A.jsx)(`div`,{className:`text-center py-8`,children:(0,A.jsx)(l,{className:`w-10 h-10 animate-spin text-bbcRed`})});if(!r)return(0,A.jsx)(`div`,{className:`text-center py-8 text-danger`,children:C(`article_not_found`,t)});let _e=te.includes(r.id);return(0,A.jsxs)(`div`,{className:`max-w-[1280px] mx-auto px-2 sm:px-3`,children:[(0,A.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6 lg:gap-12`,children:[(0,A.jsx)(`div`,{className:`lg:col-span-8`,children:(0,A.jsxs)(`article`,{className:`bg-card p-3 sm:p-4 md:p-5 rounded-2xl shadow-soft border border-border-color`,children:[(0,A.jsxs)(`div`,{className:`mb-4 sm:mb-6`,children:[(0,A.jsx)(`span`,{className:`bg-bbcRed text-white text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block`,children:r.category}),(0,A.jsx)(`h1`,{className:`text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold leading-tight mb-3 sm:mb-4 text-card-text`,children:r.title}),(0,A.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-muted-text font-medium`,children:[(0,A.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,A.jsx)(c,{className:`w-4 h-4`}),` `,x(r.published_at,t)]}),r.readTime&&(0,A.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,A.jsx)(u,{className:`w-4 h-4`}),` `,r.readTime]})]})]}),(0,A.jsx)(`div`,{className:`mb-10 relative aspect-video bg-muted-bg rounded-2xl overflow-hidden shadow-lg`,children:(0,A.jsx)(`img`,{src:se(r.image)||`https://placehold.co/600x400/1a1a1a/FFF?text=BreachTimes`,alt:r.title,crossOrigin:`anonymous`,className:`w-full h-full object-cover`})}),(0,A.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-center justify-between border-y border-border-color py-3 sm:py-4 mb-6 sm:mb-8 gap-3 sm:gap-0`,children:[(0,A.jsxs)(`div`,{className:`flex items-center gap-1 bg-muted-bg rounded-lg p-1`,children:[(0,A.jsx)(`button`,{type:`button`,onClick:()=>K(`sm`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-xs font-bold text-card-text ${h===`sm`?`bg-card`:``}`,children:`A`}),(0,A.jsx)(`button`,{type:`button`,onClick:()=>K(`md`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-xs sm:text-sm font-bold text-card-text ${h===`md`?`bg-card`:``}`,children:`A`}),(0,A.jsx)(`button`,{type:`button`,onClick:()=>K(`lg`),className:`w-7 sm:w-8 h-7 sm:h-8 flex items-center justify-center hover:bg-card rounded transition-colors text-sm sm:text-base font-bold text-card-text ${h===`lg`?`bg-card`:``}`,children:`A`})]}),(0,A.jsxs)(`div`,{className:`flex gap-2 sm:gap-3 w-full sm:w-auto`,children:[(0,A.jsxs)(`button`,{type:`button`,"aria-label":`Share article`,onClick:fe,className:`flex items-center justify-center gap-2 px-3 sm:px-4 py-2 rounded-full bg-muted-bg hover:bg-bbcRed hover:text-white transition-all text-xs sm:text-sm font-bold text-card-text flex-1 sm:flex-none`,children:[(0,A.jsx)(re,{className:`w-4 h-4`}),` `,C(`share`,t)]}),(0,A.jsx)(`button`,{type:`button`,"aria-label":`Toggle bookmark`,onClick:q,className:`p-2.5 rounded-full bg-muted-bg hover:bg-bbcRed hover:text-white text-card-text transition-all shadow-sm flex items-center justify-center group`,children:(0,A.jsx)(_,{className:`w-5 h-5`,fill:_e?`currentColor`:`none`})})]})]}),(0,A.jsx)(F,{content:r.content,className:`prose max-w-none [&_p]:text-base sm:[&_p]:text-lg [&_p]:leading-[1.8] [&_p]:mb-[1em] space-y-6 sm:space-y-8 text-card-text transition-all duration-300`})]})}),(0,A.jsx)(`div`,{className:`lg:col-span-4 w-full`,children:(0,A.jsxs)(`div`,{className:`w-full space-y-4 sm:space-y-6 lg:sticky lg:top-28`,children:[r.leaked_documents&&r.leaked_documents.length>0&&(0,A.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,A.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,A.jsx)(y,{className:`w-5 h-5 text-bbcRed`}),C(`leaked_documents`,t)]}),(0,A.jsx)(`ul`,{className:`space-y-3`,children:r.leaked_documents.map(e=>(0,A.jsxs)(`li`,{className:`group flex items-center gap-3 p-2 rounded-lg hover:bg-muted-bg transition-colors cursor-pointer`,children:[(0,A.jsx)(`div`,{className:`w-10 h-10 rounded-lg bg-danger/10 dark:bg-danger/20 flex items-center justify-center flex-shrink-0 text-bbcRed font-bold text-xs border border-bbcRed/20`,children:e.file_type||`DOC`}),(0,A.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,A.jsx)(`p`,{className:`text-sm font-bold text-card-text truncate group-hover:text-bbcRed transition-colors`,children:e.display_name_bn||e.display_name_en}),(0,A.jsx)(`span`,{className:`text-[10px] text-muted-text uppercase tracking-wider`,children:`Download`})]}),(0,A.jsx)(`a`,{href:e.download_url||`/downloads/?file=${e.file_path}`,download:!0,target:`_blank`,rel:`noopener noreferrer`,className:`p-2 rounded-lg bg-bbcRed/10 text-bbcRed group-hover:bg-bbcRed group-hover:text-white transition-all`,children:(0,A.jsx)(f,{className:`w-4 h-4`})})]},e.id||e.display_name_en))})]}),r.documents&&r.documents.length>0&&(0,A.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,A.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,A.jsx)(f,{className:`w-5 h-5 text-bbcRed`}),C(`downloadable_documents`,t)]}),(0,A.jsx)(`ul`,{className:`space-y-3`,children:r.documents.map(e=>(0,A.jsxs)(`li`,{className:`group flex items-center gap-3 p-3 rounded-lg hover:bg-muted-bg transition-colors cursor-pointer border border-transparent hover:border-bbcRed/30`,children:[(0,A.jsx)(`div`,{className:`w-10 h-10 rounded-lg bg-muted-bg dark:bg-muted-bg flex items-center justify-center flex-shrink-0 text-card-text dark:text-card-text font-bold text-xs border border-border-color/50`,children:e.file_type}),(0,A.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,A.jsx)(`p`,{className:`text-sm font-bold text-card-text truncate group-hover:text-bbcRed transition-colors`,title:e.display_name_bn||e.display_name_en,children:t===`bn`?e.display_name_bn||e.display_name_en:e.display_name_en||e.display_name_bn}),e.file_size&&(0,A.jsxs)(`span`,{className:`text-[10px] text-muted-text uppercase tracking-wider`,children:[Math.round(e.file_size/1024),` KB`]})]}),(0,A.jsx)(`a`,{href:e.download_url||`/downloads/?file=${encodeURIComponent(e.file_path)}`,download:!0,target:`_blank`,rel:`noopener noreferrer`,className:`p-2 rounded-lg bg-bbcRed/10 text-bbcRed group-hover:bg-bbcRed group-hover:text-white transition-all`,children:(0,A.jsx)(f,{className:`w-4 h-4`})})]},e.id))})]}),(0,A.jsx)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:r.allow_submissions?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text border-b border-border-color pb-2 flex items-center gap-2`,children:[(0,A.jsx)(g,{className:`w-5 h-5 text-bbcRed`}),C(`submit_documents`,t)]}),(0,A.jsxs)(`form`,{ref:he,onSubmit:ge,className:`space-y-4`,children:[(0,A.jsx)(`input`,{type:`hidden`,name:`article_id`,value:r.id}),(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`label`,{htmlFor:`document-input`,className:`block text-xs font-bold mb-2 text-muted-text`,children:C(`your_file`,t)}),(0,A.jsx)(`input`,{id:`document-input`,type:`file`,name:`document`,required:!0,className:`w-full text-xs text-card-text file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-bbcRed/10 file:text-bbcRed hover:file:bg-bbcRed/20`})]}),(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`label`,{htmlFor:`message-textarea`,className:`block text-xs font-bold mb-2 text-muted-text`,children:C(`message_optional`,t)}),(0,A.jsx)(`textarea`,{id:`message-textarea`,name:`message`,rows:3,className:`w-full p-3 rounded-lg border border-border-color bg-muted-bg text-card-text text-sm focus:border-bbcRed outline-none`,placeholder:C(`write_details`,t)})]}),(0,A.jsx)(`button`,{type:`submit`,className:`w-full bg-bbcRed text-white py-2 rounded-lg font-bold text-sm hover:opacity-90 transition-opacity`,children:C(`submit`,t)})]})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(`h4`,{className:`text-lg font-bold mb-2 text-card-text flex items-center gap-2`,children:[(0,A.jsx)(m,{className:`w-5 h-5 text-muted-text`}),C(`submissions_closed`,t)]}),(0,A.jsx)(`p`,{className:`text-sm text-muted-text font-bold text-danger`,children:C(`submissions_turned_off_by_admin`,t)})]})}),(0,A.jsxs)(`div`,{className:`bg-card p-4 sm:p-6 rounded-2xl shadow-soft border border-border-color`,children:[(0,A.jsx)(`h4`,{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 text-card-text`,children:C(`article_info`,t)}),(0,A.jsxs)(`div`,{className:`space-y-2 sm:space-y-3 text-xs sm:text-sm`,children:[(0,A.jsxs)(`div`,{className:`flex justify-between items-center pb-2 sm:pb-3 border-b border-border-color`,children:[(0,A.jsx)(`span`,{className:`text-muted-text`,children:C(`category`,t)}),(0,A.jsx)(`span`,{className:`font-bold text-card-text`,children:r.category})]}),(0,A.jsxs)(`div`,{className:`flex justify-between items-center pb-2 sm:pb-3 border-b border-border-color`,children:[(0,A.jsx)(`span`,{className:`text-muted-text`,children:C(`published`,t)}),(0,A.jsx)(`span`,{className:`font-bold text-card-text`,children:x(r.published_at,t)})]}),r.readTime&&(0,A.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,A.jsx)(`span`,{className:`text-muted-text`,children:C(`read_time`,t)}),(0,A.jsx)(`span`,{className:`font-bold text-card-text`,children:r.readTime})]})]})]})]})}),(0,A.jsxs)(`div`,{className:`lg:col-span-8 bg-card p-4 sm:p-6 md:p-8 rounded-2xl shadow-soft border border-border-color`,children:[(0,A.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 gap-3`,children:[(0,A.jsxs)(`h3`,{className:`text-xl sm:text-2xl font-bold text-card-text flex items-center gap-2`,children:[(0,A.jsx)(o,{className:`w-5 sm:w-6 h-5 sm:h-6 text-bbcRed`}),` `,C(`comments`,t)]}),(0,A.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,A.jsx)(`label`,{htmlFor:`sort-comments`,className:`text-xs font-bold text-muted-text`,children:C(`sort_by`,t)}),(0,A.jsx)(b,{id:`sort-comments`,value:I,onChange:me,options:[{value:`newest`,label:C(`newest`,t)},{value:`oldest`,label:C(`oldest`,t)},{value:`helpful`,label:C(`most_helpful`,t)},{value:`discussed`,label:C(`most_discussed`,t)}],className:`w-32`})]})]}),(0,A.jsx)(`div`,{className:`bg-card rounded-xl border border-border-color overflow-hidden`,children:r.comments&&r.comments.length>0?(0,A.jsx)(`div`,{className:`divide-y divide-border-color`,children:[...r.comments].sort((e,t)=>{if(I===`newest`)return new Date(t.created_at).getTime()-new Date(e.created_at).getTime();if(I===`oldest`)return new Date(e.created_at).getTime()-new Date(t.created_at).getTime();if(I===`helpful`)return t.upvotes-t.downvotes-(e.upvotes-e.downvotes);if(I===`discussed`){let n=e.replies?.length||0;return(t.replies?.length||0)-n}return 0}).map(e=>(0,A.jsxs)(`div`,{className:`p-4`,children:[(0,A.jsxs)(`div`,{className:`flex items-start gap-3 mb-2`,children:[(0,A.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-gradient-to-br from-bbcRed to-orange-500 flex items-center justify-center font-bold text-white text-sm shadow-md flex-shrink-0`,children:e.user[0].toUpperCase()}),(0,A.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,A.jsx)(`button`,{type:`button`,onClick:()=>Q(e.user),className:`font-bold text-sm text-card-text block hover:text-bbcRed cursor-pointer transition-colors bg-transparent border-none p-0`,children:e.user}),(0,A.jsx)(`span`,{className:`text-xs text-muted-text`,children:e.time})]})]}),(0,A.jsx)(`p`,{className:`text-sm text-card-text ml-12 leading-relaxed mb-3`,children:(()=>{let t=a.sanitize(e.text),n=document.createElement(`div`);n.innerHTML=t;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,k.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))})()}),(0,A.jsxs)(`div`,{className:`ml-12 flex items-center gap-3 text-xs`,children:[(0,A.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,A.jsx)(`button`,{type:`button`,onClick:()=>J(e.id,`upvote`),className:`p-1 hover:text-success transition-colors text-muted-text vote-btn-up flex items-center justify-center min-w-[36px] min-h-[36px] ${N[e.id]===`upvote`?`text-success font-bold`:``}`,title:`Upvote`,children:(0,A.jsx)(ne,{className:`w-3 h-3`})}),(0,A.jsx)(`span`,{className:`text-xs font-bold text-muted-text min-w-[20px] text-center`,children:e.upvotes-e.downvotes}),(0,A.jsx)(`button`,{type:`button`,onClick:()=>J(e.id,`downvote`),className:`p-1 hover:text-danger transition-colors text-muted-text vote-btn-down flex items-center justify-center min-w-[36px] min-h-[36px] ${N[e.id]===`downvote`?`text-danger font-bold`:``}`,title:`Downvote`,children:(0,A.jsx)(p,{className:`w-3 h-3`})})]}),(0,A.jsx)(`button`,{type:`button`,onClick:()=>Y(e.id),className:`px-3 py-1 hover:bg-bbcRed/10 dark:hover:bg-bbcRed/20 text-bbcRed rounded transition-colors font-bold text-sm`,children:C(`reply`,t)}),G&&(0,A.jsx)(`button`,{type:`button`,onClick:()=>Z(e.id),className:`text-danger hover:text-danger/80 p-1 rounded hover:bg-danger/10 dark:hover:bg-danger/20`,children:(0,A.jsx)(oe,{className:`w-3 h-3`})})]}),e.replies&&e.replies.length>0&&(0,A.jsx)(`div`,{className:`ml-12 mt-4 space-y-3 border-l-2 border-border-color pl-4`,children:e.replies.map(e=>(0,A.jsxs)(`div`,{children:[(0,A.jsxs)(`div`,{className:`flex items-start gap-2 mb-1`,children:[(0,A.jsx)(`div`,{className:`w-7 h-7 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center font-bold text-white text-xs shadow-md flex-shrink-0`,children:e.user[0].toUpperCase()}),(0,A.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,A.jsx)(`span`,{className:`font-bold text-xs text-card-text block`,children:e.user}),(0,A.jsx)(`span`,{className:`text-xs text-muted-text`,children:e.time})]})]}),(0,A.jsx)(`p`,{className:`text-xs text-card-text ml-9 leading-relaxed`,children:(()=>{let t=a.sanitize(e.text),n=document.createElement(`div`);n.innerHTML=t;let r=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){let t=e,n={};for(let e=0;e<t.attributes.length;e++){let r=t.attributes[e],i=r.name===`class`?`className`:r.name;n[i]=r.value}let i=Array.from(t.childNodes).map(r);return(0,k.createElement)(t.tagName.toLowerCase(),n,...i)}return null};return Array.from(n.childNodes).map((e,t)=>r(e))})()})]},e.id))}),le===e.id&&(0,A.jsxs)(`div`,{className:`ml-12 mt-4 p-4 rounded-lg`,children:[(0,A.jsx)(`h4`,{className:`text-xs font-bold text-card-text mb-3`,children:C(`write_your_reply`,t)}),(0,A.jsx)(`textarea`,{value:R[e.id]||``,onChange:t=>z(n=>({...n,[e.id]:t.target.value})),placeholder:C(`write_your_reply`,t),className:`w-full p-3 rounded-lg bg-card border border-border-color text-card-text focus:ring-2 focus:ring-bbcRed/30 focus:border-bbcRed outline-none transition-all resize-none text-sm mb-3 min-h-[80px]`}),(0,A.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,A.jsx)(`button`,{type:`button`,onClick:()=>Y(e.id),className:`px-4 py-2 rounded-lg bg-card border border-border-color hover:bg-border-color transition-colors text-sm font-bold text-card-text`,children:C(`cancel`,t)}),(0,A.jsx)(`button`,{type:`button`,onClick:()=>X(e.id),className:`px-4 py-2 rounded-lg bg-bbcRed hover:bg-bbcRed-hover text-white transition-colors text-sm font-bold shadow-soft hover:shadow-soft-hover`,children:C(`send_reply`,t)})]})]})]},e.id))}):(0,A.jsx)(`div`,{className:`text-center py-8 text-muted-text`,children:C(`no_comments_yet`,t)})}),(0,A.jsxs)(`div`,{className:`border-t border-border-color pt-6`,children:[(0,A.jsx)(`h4`,{className:`font-bold text-sm text-card-text mb-4`,children:C(`write_your_comment`,t)}),(0,A.jsx)(`textarea`,{id:`comment-input`,className:`w-full p-4 rounded-xl border border-border-color bg-card text-card-text focus:ring-2 focus:ring-bbcRed/20 focus:border-bbcRed outline-none transition-all resize-y text-base min-h-[150px]`,placeholder:C(`write_your_comment`,t),value:D,onChange:e=>O(e.target.value)}),(0,A.jsxs)(`div`,{className:`flex justify-between items-center mt-3 gap-4`,children:[(0,A.jsxs)(`div`,{className:`text-xs text-muted-text`,children:[D.length,`/5000`]}),j&&(0,A.jsx)(`div`,{className:`text-xs text-danger font-bold`,children:j}),(0,A.jsx)(`button`,{type:`button`,onClick:pe,className:`bg-bbcRed text-white px-6 py-2.5 rounded-full font-bold hover:bg-opacity-90 hover:shadow-lg hover:-translate-y-0.5 transition-all text-sm`,children:C(`post_comment`,t)})]})]})]})]}),ue&&(0,A.jsx)(`button`,{type:`button`,onClick:$,onKeyDown:e=>{e.key===`Escape`&&$()},className:`fixed inset-0 bg-black/50 dark:bg-black/70 z-[200] flex items-center justify-center p-4 border-none`,children:(0,A.jsxs)(`div`,{role:`dialog`,"aria-modal":`true`,"aria-labelledby":`profile-modal-title`,className:`bg-card rounded-2xl shadow-2xl border border-border-color max-w-md w-full max-h-[90vh] overflow-y-auto`,onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:[(0,A.jsxs)(`div`,{className:`sticky top-0 bg-card border-b border-border-color p-4 flex items-center justify-between`,children:[(0,A.jsxs)(`h3`,{className:`text-xl font-bold text-card-text`,children:[`ðŸ‘¤ `,C(`user_profile`,t)]}),(0,A.jsx)(`button`,{type:`button`,onClick:$,className:`p-2 hover:bg-muted-bg rounded-lg transition-colors`,children:(0,A.jsx)(ae,{className:`w-5 h-5`})})]}),(0,A.jsx)(`div`,{id:`profile-content`,className:`p-6 space-y-4`,children:de?(0,A.jsx)(`div`,{className:`flex items-center justify-center py-8`,children:(0,A.jsx)(l,{className:`w-6 h-6 animate-spin text-bbcRed`})}):U?(0,A.jsxs)(`div`,{className:`space-y-4`,children:[(0,A.jsxs)(`div`,{className:`flex items-center gap-4 pb-4 border-b border-border-color`,children:[(0,A.jsx)(`div`,{className:`w-16 h-16 rounded-full bg-gradient-to-br from-bbcRed to-orange-500 flex items-center justify-center font-bold text-white text-2xl shadow-lg`,children:U.displayName[0].toUpperCase()}),(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`h4`,{className:`text-lg font-bold text-card-text`,children:U.displayName}),(0,A.jsx)(`p`,{className:`text-xs text-muted-text`,children:U.email})]})]}),(0,A.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,A.jsxs)(`div`,{className:`bg-muted-bg p-3 rounded-lg border border-border-color`,children:[(0,A.jsx)(`div`,{className:`text-2xl font-bold text-bbcRed`,children:U.commentCount}),(0,A.jsx)(`div`,{className:`text-xs text-muted-text`,children:C(`comments_count`,t)})]}),(0,A.jsxs)(`div`,{className:`bg-muted-bg p-3 rounded-lg border border-border-color`,children:[(0,A.jsx)(`div`,{className:`text-2xl font-bold text-success`,children:U.upvotes}),(0,A.jsx)(`div`,{className:`text-xs text-muted-text`,children:C(`received_likes`,t)})]})]}),U.recentComments&&U.recentComments.length>0&&(0,A.jsxs)(`div`,{children:[(0,A.jsx)(`div`,{className:`text-sm font-bold text-card-text mb-2`,children:C(`recent_comments`,t)}),(0,A.jsx)(`div`,{className:`space-y-2`,children:U.recentComments.map(e=>(0,A.jsxs)(`div`,{className:`bg-muted-bg p-2 rounded-lg text-xs text-card-text border border-border-color`,children:[(0,A.jsxs)(`p`,{className:`mb-1`,children:[`"`,e.text,`"`]}),(0,A.jsxs)(`div`,{className:`flex items-center justify-between text-muted-text text-xs`,children:[(0,A.jsx)(`span`,{children:e.time}),(0,A.jsxs)(`span`,{children:[(0,A.jsx)(ne,{className:`w-3 h-3 inline-block mr-1`}),` `,e.upvotes]})]})]},`comment-${e.text.substring(0,20)}`))})]})]}):(0,A.jsx)(`div`,{className:`text-center py-8`,children:(0,A.jsx)(`p`,{className:`text-muted-text`,children:C(`user_profile_not_found`,t)})})})]})})]})};export{I as default};